
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>PEP 544 – Protocols: Structural subtyping (static duck typing) &#8212; peps.python.org</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="PEP 545 – Python Documentation Translations" href="../pep-0545/" />
    <link rel="prev" title="PEP 543 – A Unified TLS API for Python" href="../pep-0543/" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="pep-544-protocols-structural-subtyping-static-duck-typing">
<h1 class="page-title">PEP 544 – Protocols: Structural subtyping (static duck typing)<a class="headerlink" href="#pep-544-protocols-structural-subtyping-static-duck-typing" title="Permalink to this headline">¶</a></h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">PEP</dt>
<dd class="field-odd"><p>544</p>
</dd>
<dt class="field-even">Title</dt>
<dd class="field-even"><p>Protocols: Structural subtyping (static duck typing)</p>
</dd>
<dt class="field-odd">Author</dt>
<dd class="field-odd"><p>Ivan Levkivskyi &lt;<a class="reference external" href="mailto:levkivskyi&#37;&#52;&#48;gmail&#46;com?subject=PEP%20-1">levkivskyi&#32;&#97;t&#32;gmail.com</a>&gt;, Jukka Lehtosalo &lt;<a class="reference external" href="mailto:jukka&#46;lehtosalo&#37;&#52;&#48;iki&#46;fi?subject=PEP%20-1">jukka.lehtosalo&#32;&#97;t&#32;iki.fi</a>&gt;, Łukasz Langa &lt;<a class="reference external" href="mailto:lukasz&#37;&#52;&#48;python&#46;org?subject=PEP%20-1">lukasz&#32;&#97;t&#32;python.org</a>&gt;</p>
</dd>
<dt class="field-even">BDFL-Delegate</dt>
<dd class="field-even"><p>Guido van Rossum &lt;<a class="reference external" href="mailto:guido&#37;&#52;&#48;python&#46;org?subject=PEP%20-1">guido&#32;&#97;t&#32;python.org</a>&gt;</p>
</dd>
<dt class="field-odd">Discussions-To</dt>
<dd class="field-odd"><p>Python-Dev &lt;<a class="reference external" href="mailto:python-dev&#37;&#52;&#48;python&#46;org">python-dev<span>&#64;</span>python<span>&#46;</span>org</a>&gt;</p>
</dd>
<dt class="field-even">Status</dt>
<dd class="field-even"><p>Accepted</p>
</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Standards Track</p>
</dd>
<dt class="field-even">Created</dt>
<dd class="field-even"><p>05-Mar-2017</p>
</dd>
<dt class="field-odd">Python-Version</dt>
<dd class="field-odd"><p>3.8</p>
</dd>
<dt class="field-even">Resolution</dt>
<dd class="field-even"><p><a class="reference external" href="https://mail.python.org/archives/list/typing-sig&#64;python.org/message/FDO4KFYWYQEP3U2HVVBEBR3SXPHQSHYR/">https://mail.python.org/archives/list/typing-sig&#64;python.org/message/FDO4KFYWYQEP3U2HVVBEBR3SXPHQSHYR/</a></p>
</dd>
</dl>
<hr class="docutils" />
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#abstract" id="id17">Abstract</a></p></li>
<li><p><a class="reference internal" href="#rationale-and-goals" id="id18">Rationale and Goals</a></p>
<ul>
<li><p><a class="reference internal" href="#nominal-vs-structural-subtyping" id="id19">Nominal vs structural subtyping</a></p></li>
<li><p><a class="reference internal" href="#non-goals" id="id20">Non-goals</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#existing-approaches-to-structural-subtyping" id="id21">Existing Approaches to Structural Subtyping</a></p></li>
<li><p><a class="reference internal" href="#specification" id="id22">Specification</a></p>
<ul>
<li><p><a class="reference internal" href="#terminology" id="id23">Terminology</a></p></li>
<li><p><a class="reference internal" href="#defining-a-protocol" id="id24">Defining a protocol</a></p></li>
<li><p><a class="reference internal" href="#protocol-members" id="id25">Protocol members</a></p></li>
<li><p><a class="reference internal" href="#explicitly-declaring-implementation" id="id26">Explicitly declaring implementation</a></p></li>
<li><p><a class="reference internal" href="#merging-and-extending-protocols" id="id27">Merging and extending protocols</a></p></li>
<li><p><a class="reference internal" href="#generic-protocols" id="id28">Generic protocols</a></p></li>
<li><p><a class="reference internal" href="#recursive-protocols" id="id29">Recursive protocols</a></p></li>
<li><p><a class="reference internal" href="#self-types-in-protocols" id="id30">Self-types in protocols</a></p></li>
<li><p><a class="reference internal" href="#callback-protocols" id="id31">Callback protocols</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#using-protocols" id="id32">Using Protocols</a></p>
<ul>
<li><p><a class="reference internal" href="#subtyping-relationships-with-other-types" id="id33">Subtyping relationships with other types</a></p></li>
<li><p><a class="reference internal" href="#unions-and-intersections-of-protocols" id="id34">Unions and intersections of protocols</a></p></li>
<li><p><a class="reference internal" href="#type-and-class-objects-vs-protocols" id="id35"><code class="docutils literal notranslate"><span class="pre">Type[]</span></code> and class objects vs protocols</a></p></li>
<li><p><a class="reference internal" href="#newtype-and-type-aliases" id="id36"><code class="docutils literal notranslate"><span class="pre">NewType()</span></code> and type aliases</a></p></li>
<li><p><a class="reference internal" href="#modules-as-implementations-of-protocols" id="id37">Modules as implementations of protocols</a></p></li>
<li><p><a class="reference internal" href="#runtime-checkable-decorator-and-narrowing-types-by-isinstance" id="id38"><code class="docutils literal notranslate"><span class="pre">&#64;runtime_checkable</span></code> decorator and narrowing types by <code class="docutils literal notranslate"><span class="pre">isinstance()</span></code></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#using-protocols-in-python-2-7-3-5" id="id39">Using Protocols in Python 2.7 - 3.5</a></p></li>
<li><p><a class="reference internal" href="#runtime-implementation-of-protocol-classes" id="id40">Runtime Implementation of Protocol Classes</a></p>
<ul>
<li><p><a class="reference internal" href="#implementation-details" id="id41">Implementation details</a></p></li>
<li><p><a class="reference internal" href="#changes-in-the-typing-module" id="id42">Changes in the typing module</a></p></li>
<li><p><a class="reference internal" href="#introspection" id="id43">Introspection</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#rejected-postponed-ideas" id="id44">Rejected/Postponed Ideas</a></p>
<ul>
<li><p><a class="reference internal" href="#make-every-class-a-protocol-by-default" id="id45">Make every class a protocol by default</a></p></li>
<li><p><a class="reference internal" href="#protocols-subclassing-normal-classes" id="id46">Protocols subclassing normal classes</a></p></li>
<li><p><a class="reference internal" href="#support-optional-protocol-members" id="id47">Support optional protocol members</a></p></li>
<li><p><a class="reference internal" href="#allow-only-protocol-methods-and-force-use-of-getters-and-setters" id="id48">Allow only protocol methods and force use of getters and setters</a></p></li>
<li><p><a class="reference internal" href="#support-non-protocol-members" id="id49">Support non-protocol members</a></p></li>
<li><p><a class="reference internal" href="#make-protocols-interoperable-with-other-approaches" id="id50">Make protocols interoperable with other approaches</a></p></li>
<li><p><a class="reference internal" href="#use-assignments-to-check-explicitly-that-a-class-implements-a-protocol" id="id51">Use assignments to check explicitly that a class implements a protocol</a></p></li>
<li><p><a class="reference internal" href="#support-isinstance-checks-by-default" id="id52">Support <code class="docutils literal notranslate"><span class="pre">isinstance()</span></code> checks by default</a></p></li>
<li><p><a class="reference internal" href="#provide-a-special-intersection-type-construct" id="id53">Provide a special intersection type construct</a></p></li>
<li><p><a class="reference internal" href="#prohibit-explicit-subclassing-of-protocols-by-non-protocols" id="id54">Prohibit explicit subclassing of protocols by non-protocols</a></p></li>
<li><p><a class="reference internal" href="#covariant-subtyping-of-mutable-attributes" id="id55">Covariant subtyping of mutable attributes</a></p></li>
<li><p><a class="reference internal" href="#overriding-inferred-variance-of-protocol-classes" id="id56">Overriding inferred variance of protocol classes</a></p></li>
<li><p><a class="reference internal" href="#support-adapters-and-adaptation" id="id57">Support adapters and adaptation</a></p></li>
<li><p><a class="reference internal" href="#call-structural-base-types-interfaces" id="id58">Call structural base types “interfaces”</a></p></li>
<li><p><a class="reference internal" href="#make-protocols-special-objects-at-runtime-rather-than-normal-abcs" id="id59">Make protocols special objects at runtime rather than normal ABCs</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#backwards-compatibility" id="id60">Backwards Compatibility</a></p></li>
<li><p><a class="reference internal" href="#implementation" id="id61">Implementation</a></p></li>
<li><p><a class="reference internal" href="#references" id="id62">References</a></p></li>
<li><p><a class="reference internal" href="#copyright" id="id63">Copyright</a></p></li>
</ul>
</div>
<section id="abstract">
<h2><a class="toc-backref" href="#id17">Abstract</a><a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h2>
<p>Type hints introduced in <a class="reference external" href="pep-0484.html">PEP 484</a> can be used to specify type metadata
for static type checkers and other third party tools. However, <a class="reference external" href="pep-0484.html">PEP 484</a>
only specifies the semantics of <em>nominal</em> subtyping. In this PEP we specify
static and runtime semantics of protocol classes that will provide a support
for <em>structural</em> subtyping (static duck typing).</p>
</section>
<section id="rationale-and-goals">
<span id="rationale"></span><h2><a class="toc-backref" href="#id18">Rationale and Goals</a><a class="headerlink" href="#rationale-and-goals" title="Permalink to this headline">¶</a></h2>
<p>Currently, <a class="reference external" href="pep-0484.html">PEP 484</a> and the <code class="docutils literal notranslate"><span class="pre">typing</span></code> module <a class="reference internal" href="#typing" id="id1"><span>[typing]</span></a> define abstract
base classes for several common Python protocols such as <code class="docutils literal notranslate"><span class="pre">Iterable</span></code> and
<code class="docutils literal notranslate"><span class="pre">Sized</span></code>. The problem with them is that a class has to be explicitly marked
to support them, which is unpythonic and unlike what one would
normally do in idiomatic dynamically typed Python code. For example,
this conforms to <a class="reference external" href="pep-0484.html">PEP 484</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Sized</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">Iterator</span>

<span class="k">class</span> <span class="nc">Bucket</span><span class="p">(</span><span class="n">Sized</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>
    <span class="o">...</span>
    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span> <span class="o">...</span>
    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span> <span class="o">...</span>
</pre></div>
</div>
<p>The same problem appears with user-defined ABCs: they must be explicitly
subclassed or registered. This is particularly difficult to do with library
types as the type objects may be hidden deep in the implementation
of the library. Also, extensive use of ABCs might impose additional
runtime costs.</p>
<p>The intention of this PEP is to solve all these problems
by allowing users to write the above code without explicit base classes in
the class definition, allowing <code class="docutils literal notranslate"><span class="pre">Bucket</span></code> to be implicitly considered
a subtype of both <code class="docutils literal notranslate"><span class="pre">Sized</span></code> and <code class="docutils literal notranslate"><span class="pre">Iterable[int]</span></code> by static type checkers
using structural <a class="reference internal" href="#wiki-structural" id="id2"><span>[wiki-structural]</span></a> subtyping:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Iterator</span><span class="p">,</span> <span class="n">Iterable</span>

<span class="k">class</span> <span class="nc">Bucket</span><span class="p">:</span>
    <span class="o">...</span>
    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span> <span class="o">...</span>
    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span> <span class="o">...</span>

<span class="k">def</span> <span class="nf">collect</span><span class="p">(</span><span class="n">items</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span> <span class="o">...</span>
<span class="n">result</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">collect</span><span class="p">(</span><span class="n">Bucket</span><span class="p">())</span>  <span class="c1"># Passes type check</span>
</pre></div>
</div>
<p>Note that ABCs in <code class="docutils literal notranslate"><span class="pre">typing</span></code> module already provide structural behavior
at runtime, <code class="docutils literal notranslate"><span class="pre">isinstance(Bucket(),</span> <span class="pre">Iterable)</span></code> returns <code class="docutils literal notranslate"><span class="pre">True</span></code>.
The main goal of this proposal is to support such behavior statically.
The same functionality will be provided for user-defined protocols, as
specified below. The above code with a protocol class matches common Python
conventions much better. It is also automatically extensible and works
with additional, unrelated classes that happen to implement
the required protocol.</p>
<section id="nominal-vs-structural-subtyping">
<h3><a class="toc-backref" href="#id19">Nominal vs structural subtyping</a><a class="headerlink" href="#nominal-vs-structural-subtyping" title="Permalink to this headline">¶</a></h3>
<p>Structural subtyping is natural for Python programmers since it matches
the runtime semantics of duck typing: an object that has certain properties
is treated independently of its actual runtime class.
However, as discussed in <a class="reference external" href="pep-0483.html">PEP 483</a>, both nominal and structural
subtyping have their strengths and weaknesses. Therefore, in this PEP we
<em>do not propose</em> to replace the nominal subtyping described by <a class="reference external" href="pep-0484.html">PEP 484</a> with
structural subtyping completely. Instead, protocol classes as specified in
this PEP complement normal classes, and users are free to choose
where to apply a particular solution. See section on <a class="reference internal" href="#rejected">rejected</a> ideas at the
end of this PEP for additional motivation.</p>
</section>
<section id="non-goals">
<h3><a class="toc-backref" href="#id20">Non-goals</a><a class="headerlink" href="#non-goals" title="Permalink to this headline">¶</a></h3>
<p>At runtime, protocol classes will be simple ABCs. There is no intent to
provide sophisticated runtime instance and class checks against protocol
classes. This would be difficult and error-prone and will contradict the logic
of <a class="reference external" href="pep-0484.html">PEP 484</a>. As well, following <a class="reference external" href="pep-0484.html">PEP 484</a> and <a class="reference external" href="pep-0526.html">PEP 526</a> we state that protocols are
<strong>completely optional</strong>:</p>
<ul class="simple">
<li><p>No runtime semantics will be imposed for variables or parameters annotated
with a protocol class.</p></li>
<li><p>Any checks will be performed only by third-party type checkers and
other tools.</p></li>
<li><p>Programmers are free to not use them even if they use type annotations.</p></li>
<li><p>There is no intent to make protocols non-optional in the future.</p></li>
</ul>
<p>To reiterate, providing complex runtime semantics for protocol classes
is not a goal of this PEP, the main goal is to provide a support and standards
for <em>static</em> structural subtyping. The possibility to use protocols
in the runtime context as ABCs is rather a minor bonus that exists mostly
to provide a seamless transition for projects that already use ABCs.</p>
</section>
</section>
<section id="existing-approaches-to-structural-subtyping">
<h2><a class="toc-backref" href="#id21">Existing Approaches to Structural Subtyping</a><a class="headerlink" href="#existing-approaches-to-structural-subtyping" title="Permalink to this headline">¶</a></h2>
<p>Before describing the actual specification, we review and comment on existing
approaches related to structural subtyping in Python and other languages:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">zope.interface</span></code> <a class="reference internal" href="#zope-interfaces" id="id3"><span>[zope-interfaces]</span></a> was one of the first widely used
approaches to structural subtyping in Python. It is implemented by providing
special classes to distinguish interface classes from normal classes,
to mark interface attributes, and to explicitly declare implementation.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">zope.interface</span> <span class="kn">import</span> <span class="n">Interface</span><span class="p">,</span> <span class="n">Attribute</span><span class="p">,</span> <span class="n">implementer</span>

<span class="k">class</span> <span class="nc">IEmployee</span><span class="p">(</span><span class="n">Interface</span><span class="p">):</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">Attribute</span><span class="p">(</span><span class="s2">&quot;Name of employee&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">do</span><span class="p">(</span><span class="n">work</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Do some work&quot;&quot;&quot;</span>

<span class="nd">@implementer</span><span class="p">(</span><span class="n">IEmployee</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Employee</span><span class="p">:</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Anonymous&#39;</span>

    <span class="k">def</span> <span class="nf">do</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">work</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">work</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
<p>Zope interfaces support various contracts and constraints for interface
classes. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">zope.interface</span> <span class="kn">import</span> <span class="n">invariant</span>

<span class="k">def</span> <span class="nf">required_contact</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">email</span> <span class="ow">or</span> <span class="n">obj</span><span class="o">.</span><span class="n">phone</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;At least one contact info is required&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">IPerson</span><span class="p">(</span><span class="n">Interface</span><span class="p">):</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">Attribute</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">Attribute</span><span class="p">(</span><span class="s2">&quot;Email Address&quot;</span><span class="p">)</span>
    <span class="n">phone</span> <span class="o">=</span> <span class="n">Attribute</span><span class="p">(</span><span class="s2">&quot;Phone Number&quot;</span><span class="p">)</span>

    <span class="n">invariant</span><span class="p">(</span><span class="n">required_contact</span><span class="p">)</span>
</pre></div>
</div>
<p>Even more detailed invariants are supported. However, Zope interfaces rely
entirely on runtime validation. Such focus on runtime properties goes
beyond the scope of the current proposal, and static support for invariants
might be difficult to implement. However, the idea of marking an interface
class with a special base class is reasonable and easy to implement both
statically and at runtime.</p>
</li>
<li><p>Python abstract base classes <a class="reference internal" href="#abstract-classes" id="id4"><span>[abstract-classes]</span></a> are the standard
library tool to provide some functionality similar to structural subtyping.
The drawback of this approach is the necessity to either subclass
the abstract class or register an implementation explicitly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span>

<span class="k">class</span> <span class="nc">MyTuple</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">MyTuple</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="nb">tuple</span><span class="p">)</span>

<span class="k">assert</span> <span class="nb">issubclass</span><span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="n">MyTuple</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">((),</span> <span class="n">MyTuple</span><span class="p">)</span>
</pre></div>
</div>
<p>As mentioned in the <a class="reference internal" href="#rationale">rationale</a>, we want to avoid such necessity, especially
in static context. However, in a runtime context, ABCs are good candidates for
protocol classes and they are already used extensively in
the <code class="docutils literal notranslate"><span class="pre">typing</span></code> module.</p>
</li>
<li><p>Abstract classes defined in <code class="docutils literal notranslate"><span class="pre">collections.abc</span></code> module <a class="reference internal" href="#collections-abc" id="id5"><span>[collections-abc]</span></a>
are slightly more advanced since they implement a custom
<code class="docutils literal notranslate"><span class="pre">__subclasshook__()</span></code> method that allows runtime structural checks without
explicit registration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Iterable</span>

<span class="k">class</span> <span class="nc">MyIterable</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[]</span>

<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">MyIterable</span><span class="p">(),</span> <span class="n">Iterable</span><span class="p">)</span>
</pre></div>
</div>
<p>Such behavior seems to be a perfect fit for both runtime and static behavior
of protocols. As discussed in <a class="reference internal" href="#rationale">rationale</a>, we propose to add static support
for such behavior. In addition, to allow users to achieve such runtime
behavior for <em>user-defined</em> protocols a special <code class="docutils literal notranslate"><span class="pre">&#64;runtime_checkable</span></code> decorator
will be provided, see detailed <a class="reference internal" href="#discussion">discussion</a> below.</p>
</li>
<li><p>TypeScript <a class="reference internal" href="../pep-0482/#id18" id="id6"><span>[typescript]</span></a> provides support for user-defined classes and
interfaces. Explicit implementation declaration is not required and
structural subtyping is verified statically. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>interface LabeledItem {
    label: string;
    size?: int;
}

function printLabel(obj: LabeledItem) {
    console.log(obj.label);
}

let myObj = {size: 10, label: &quot;Size 10 Object&quot;};
printLabel(myObj);
</pre></div>
</div>
<p>Note that optional interface members are supported. Also, TypeScript
prohibits redundant members in implementations. While the idea of
optional members looks interesting, it would complicate this proposal and
it is not clear how useful it will be. Therefore, it is proposed to postpone
this; see <a class="reference internal" href="#rejected">rejected</a> ideas. In general, the idea of static protocol
checking without runtime implications looks reasonable, and basically
this proposal follows the same line.</p>
</li>
<li><p>Go <a class="reference internal" href="#golang" id="id7"><span>[golang]</span></a> uses a more radical approach and makes interfaces the primary
way to provide type information. Also, assignments are used to explicitly
ensure implementation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span> <span class="n">SomeInterface</span> <span class="n">interface</span> <span class="p">{</span>
    <span class="n">SomeMethod</span><span class="p">()</span> <span class="p">([]</span><span class="n">byte</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">if</span> <span class="n">_</span><span class="p">,</span> <span class="n">ok</span> <span class="o">:=</span> <span class="n">someval</span><span class="o">.</span><span class="p">(</span><span class="n">SomeInterface</span><span class="p">);</span> <span class="n">ok</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s2">&quot;value implements some interface&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Both these ideas are questionable in the context of this proposal. See
the section on <a class="reference internal" href="#rejected">rejected</a> ideas.</p>
</li>
</ul>
</section>
<section id="specification">
<span id="id8"></span><h2><a class="toc-backref" href="#id22">Specification</a><a class="headerlink" href="#specification" title="Permalink to this headline">¶</a></h2>
<section id="terminology">
<h3><a class="toc-backref" href="#id23">Terminology</a><a class="headerlink" href="#terminology" title="Permalink to this headline">¶</a></h3>
<p>We propose to use the term <em>protocols</em> for types supporting structural
subtyping. The reason is that the term <em>iterator protocol</em>,
for example, is widely understood in the community, and coming up with
a new term for this concept in a statically typed context would just create
confusion.</p>
<p>This has the drawback that the term <em>protocol</em> becomes overloaded with
two subtly different meanings: the first is the traditional, well-known but
slightly fuzzy concept of protocols such as iterator; the second is the more
explicitly defined concept of protocols in statically typed code.
The distinction is not important most of the time, and in other
cases we propose to just add a qualifier such as <em>protocol classes</em>
when referring to the static type concept.</p>
<p>If a class includes a protocol in its MRO, the class is called
an <em>explicit</em> subclass of the protocol. If a class is a structural subtype
of a protocol, it is said to implement the protocol and to be compatible
with a protocol. If a class is compatible with a protocol but the protocol
is not included in the MRO, the class is an <em>implicit</em> subtype
of the protocol. (Note that one can explicitly subclass a protocol and
still not implement it if a protocol attribute is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>
in the subclass, see Python <a class="reference internal" href="#data-model" id="id9"><span>[data-model]</span></a> for details.)</p>
<p>The attributes (variables and methods) of a protocol that are mandatory
for other class in order to be considered a structural subtype are called
protocol members.</p>
</section>
<section id="defining-a-protocol">
<span id="definition"></span><h3><a class="toc-backref" href="#id24">Defining a protocol</a><a class="headerlink" href="#defining-a-protocol" title="Permalink to this headline">¶</a></h3>
<p>Protocols are defined by including a special new class <code class="docutils literal notranslate"><span class="pre">typing.Protocol</span></code>
(an instance of <code class="docutils literal notranslate"><span class="pre">abc.ABCMeta</span></code>) in the base classes list, typically
at the end of the list. Here is a simple example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Protocol</span>

<span class="k">class</span> <span class="nc">SupportsClose</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>Now if one defines a class <code class="docutils literal notranslate"><span class="pre">Resource</span></code> with a <code class="docutils literal notranslate"><span class="pre">close()</span></code> method that has
a compatible signature, it would implicitly be a subtype of
<code class="docutils literal notranslate"><span class="pre">SupportsClose</span></code>, since the structural subtyping is used for
protocol types:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Resource</span><span class="p">:</span>
    <span class="o">...</span>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
</pre></div>
</div>
<p>Apart from few restrictions explicitly mentioned below, protocol types can
be used in every context where a normal types can:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">close_all</span><span class="p">(</span><span class="n">things</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">SupportsClose</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">things</span><span class="p">:</span>
        <span class="n">t</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;foo.txt&#39;</span><span class="p">)</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">Resource</span><span class="p">()</span>
<span class="n">close_all</span><span class="p">([</span><span class="n">f</span><span class="p">,</span> <span class="n">r</span><span class="p">])</span>  <span class="c1"># OK!</span>
<span class="n">close_all</span><span class="p">([</span><span class="mi">1</span><span class="p">])</span>     <span class="c1"># Error: &#39;int&#39; has no &#39;close&#39; method</span>
</pre></div>
</div>
<p>Note that both the user-defined class <code class="docutils literal notranslate"><span class="pre">Resource</span></code> and the built-in
<code class="docutils literal notranslate"><span class="pre">IO</span></code> type (the return type of <code class="docutils literal notranslate"><span class="pre">open()</span></code>) are considered subtypes of
<code class="docutils literal notranslate"><span class="pre">SupportsClose</span></code>, because they provide a <code class="docutils literal notranslate"><span class="pre">close()</span></code> method with
a compatible type signature.</p>
</section>
<section id="protocol-members">
<h3><a class="toc-backref" href="#id25">Protocol members</a><a class="headerlink" href="#protocol-members" title="Permalink to this headline">¶</a></h3>
<p>All methods defined in the protocol class body are protocol members, both
normal and decorated with <code class="docutils literal notranslate"><span class="pre">&#64;abstractmethod</span></code>. If any parameters of a
protocol method are not annotated, then their types are assumed to be <code class="docutils literal notranslate"><span class="pre">Any</span></code>
(see <a class="reference external" href="pep-0484.html">PEP 484</a>). Bodies of protocol methods are type checked.
An abstract method that should not be called via <code class="docutils literal notranslate"><span class="pre">super()</span></code> ought to raise
<code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code>. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Protocol</span>
<span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">abstractmethod</span>

<span class="k">class</span> <span class="nc">Example</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">first</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>     <span class="c1"># This is a protocol member</span>
        <span class="k">return</span> <span class="mi">42</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">second</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>    <span class="c1"># Method without a default implementation</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</pre></div>
</div>
<p>Static methods, class methods, and properties are equally allowed
in protocols.</p>
<p>To define a protocol variable, one can use <a class="reference external" href="pep-0526.html">PEP 526</a> variable
annotations in the class body. Additional attributes <em>only</em> defined in
the body of a method by assignment via <code class="docutils literal notranslate"><span class="pre">self</span></code> are not allowed. The rationale
for this is that the protocol class implementation is often not shared by
subtypes, so the interface should not depend on the default implementation.
Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Protocol</span><span class="p">,</span> <span class="n">List</span>

<span class="k">class</span> <span class="nc">Template</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>        <span class="c1"># This is a protocol member</span>
    <span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>   <span class="c1"># This one too (with default)</span>

    <span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">temp</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># Error in type checker</span>

<span class="k">class</span> <span class="nc">Concrete</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>

<span class="n">var</span><span class="p">:</span> <span class="n">Template</span> <span class="o">=</span> <span class="n">Concrete</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>  <span class="c1"># OK</span>
</pre></div>
</div>
<p>To distinguish between protocol class variables and protocol instance
variables, the special <code class="docutils literal notranslate"><span class="pre">ClassVar</span></code> annotation should be used as specified
by <a class="reference external" href="pep-0526.html">PEP 526</a>. By default, protocol variables as defined above are considered
readable and writable. To define a read-only protocol variable, one can use
an (abstract) property.</p>
</section>
<section id="explicitly-declaring-implementation">
<h3><a class="toc-backref" href="#id26">Explicitly declaring implementation</a><a class="headerlink" href="#explicitly-declaring-implementation" title="Permalink to this headline">¶</a></h3>
<p>To explicitly declare that a certain class implements a given protocol,
it can be used as a regular base class. In this case a class could use
default implementations of protocol members. Static analysis tools are
expected to automatically detect that a class implements a given protocol.
So while it’s possible to subclass a protocol explicitly, it’s <em>not necessary</em>
to do so for the sake of type-checking.</p>
<p>The default implementations cannot be used if
the subtype relationship is implicit and only via structural
subtyping – the semantics of inheritance is not changed. Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PColor</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="o">...</span>
    <span class="k">def</span> <span class="nf">complex_method</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="c1"># some complex code here</span>

<span class="k">class</span> <span class="nc">NiceColor</span><span class="p">(</span><span class="n">PColor</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;deep blue&quot;</span>

<span class="k">class</span> <span class="nc">BadColor</span><span class="p">(</span><span class="n">PColor</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>  <span class="c1"># Error, no default implementation</span>

<span class="k">class</span> <span class="nc">ImplicitColor</span><span class="p">:</span>   <span class="c1"># Note no &#39;PColor&#39; base here</span>
    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;probably gray&quot;</span>
    <span class="k">def</span> <span class="nf">complex_method</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="c1"># class needs to implement this</span>

<span class="n">nice</span><span class="p">:</span> <span class="n">NiceColor</span>
<span class="n">another</span><span class="p">:</span> <span class="n">ImplicitColor</span>

<span class="k">def</span> <span class="nf">represent</span><span class="p">(</span><span class="n">c</span><span class="p">:</span> <span class="n">PColor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">draw</span><span class="p">(),</span> <span class="n">c</span><span class="o">.</span><span class="n">complex_method</span><span class="p">())</span>

<span class="n">represent</span><span class="p">(</span><span class="n">nice</span><span class="p">)</span> <span class="c1"># OK</span>
<span class="n">represent</span><span class="p">(</span><span class="n">another</span><span class="p">)</span> <span class="c1"># Also OK</span>
</pre></div>
</div>
<p>Note that there is little difference between explicit and implicit
subtypes, the main benefit of explicit subclassing is to get some protocol
methods “for free”. In addition, type checkers can statically verify that
the class actually implements the protocol correctly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">RGB</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="n">rgb</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">intensity</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>

<span class="k">class</span> <span class="nc">Point</span><span class="p">(</span><span class="n">RGB</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">red</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">green</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">blue</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rgb</span> <span class="o">=</span> <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span>  <span class="c1"># Error, &#39;blue&#39; must be &#39;int&#39;</span>

    <span class="c1"># Type checker might warn that &#39;intensity&#39; is not defined</span>
</pre></div>
</div>
<p>A class can explicitly inherit from multiple protocols and also from normal
classes. In this case methods are resolved using normal MRO and a type checker
verifies that all subtyping are correct. The semantics of <code class="docutils literal notranslate"><span class="pre">&#64;abstractmethod</span></code>
is not changed, all of them must be implemented by an explicit subclass
before it can be instantiated.</p>
</section>
<section id="merging-and-extending-protocols">
<h3><a class="toc-backref" href="#id27">Merging and extending protocols</a><a class="headerlink" href="#merging-and-extending-protocols" title="Permalink to this headline">¶</a></h3>
<p>The general philosophy is that protocols are mostly like regular ABCs,
but a static type checker will handle them specially. Subclassing a protocol
class would not turn the subclass into a protocol unless it also has
<code class="docutils literal notranslate"><span class="pre">typing.Protocol</span></code> as an explicit base class. Without this base, the class
is “downgraded” to a regular ABC that cannot be used with structural
subtyping. The rationale for this rule is that we don’t want to accidentally
have some class act as a protocol just because one of its base classes
happens to be one. We still slightly prefer nominal subtyping over structural
subtyping in the static typing world.</p>
<p>A subprotocol can be defined by having <em>both</em> one or more protocols as
immediate base classes and also having <code class="docutils literal notranslate"><span class="pre">typing.Protocol</span></code> as an immediate
base class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Sized</span><span class="p">,</span> <span class="n">Protocol</span>

<span class="k">class</span> <span class="nc">SizedAndClosable</span><span class="p">(</span><span class="n">Sized</span><span class="p">,</span> <span class="n">Protocol</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>Now the protocol <code class="docutils literal notranslate"><span class="pre">SizedAndClosable</span></code> is a protocol with two methods,
<code class="docutils literal notranslate"><span class="pre">__len__</span></code> and <code class="docutils literal notranslate"><span class="pre">close</span></code>. If one omits <code class="docutils literal notranslate"><span class="pre">Protocol</span></code> in the base class list,
this would be a regular (non-protocol) class that must implement <code class="docutils literal notranslate"><span class="pre">Sized</span></code>.
Alternatively, one can implement <code class="docutils literal notranslate"><span class="pre">SizedAndClosable</span></code> protocol by merging
the <code class="docutils literal notranslate"><span class="pre">SupportsClose</span></code> protocol from the example in the <a class="reference internal" href="#definition">definition</a> section
with <code class="docutils literal notranslate"><span class="pre">typing.Sized</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Sized</span>

<span class="k">class</span> <span class="nc">SupportsClose</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="o">...</span>

<span class="k">class</span> <span class="nc">SizedAndClosable</span><span class="p">(</span><span class="n">Sized</span><span class="p">,</span> <span class="n">SupportsClose</span><span class="p">,</span> <span class="n">Protocol</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>The two definitions of <code class="docutils literal notranslate"><span class="pre">SizedAndClosable</span></code> are equivalent.
Subclass relationships between protocols are not meaningful when
considering subtyping, since structural compatibility is
the criterion, not the MRO.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">Protocol</span></code> is included in the base class list, all the other base classes
must be protocols. A protocol can’t extend a regular class, see <a class="reference internal" href="#rejected">rejected</a>
ideas for rationale. Note that rules around explicit subclassing are different
from regular ABCs, where abstractness is simply defined by having at least one
abstract method being unimplemented. Protocol classes must be marked
<em>explicitly</em>.</p>
</section>
<section id="generic-protocols">
<h3><a class="toc-backref" href="#id28">Generic protocols</a><a class="headerlink" href="#generic-protocols" title="Permalink to this headline">¶</a></h3>
<p>Generic protocols are important. For example, <code class="docutils literal notranslate"><span class="pre">SupportsAbs</span></code>, <code class="docutils literal notranslate"><span class="pre">Iterable</span></code>
and <code class="docutils literal notranslate"><span class="pre">Iterator</span></code> are generic protocols. They are defined similar to normal
non-protocol generic types:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Iterable</span><span class="p">(</span><span class="n">Protocol</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">T</span><span class="p">]:</span>
        <span class="o">...</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Protocol[T,</span> <span class="pre">S,</span> <span class="pre">...]</span></code> is allowed as a shorthand for
<code class="docutils literal notranslate"><span class="pre">Protocol,</span> <span class="pre">Generic[T,</span> <span class="pre">S,</span> <span class="pre">...]</span></code>.</p>
<p>User-defined generic protocols support explicitly declared variance.
Type checkers will warn if the inferred variance is different from
the declared variance. Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>
<span class="n">T_co</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T_co&#39;</span><span class="p">,</span> <span class="n">covariant</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">T_contra</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T_contra&#39;</span><span class="p">,</span> <span class="n">contravariant</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Box</span><span class="p">(</span><span class="n">Protocol</span><span class="p">[</span><span class="n">T_co</span><span class="p">]):</span>
    <span class="k">def</span> <span class="nf">content</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T_co</span><span class="p">:</span>
        <span class="o">...</span>

<span class="n">box</span><span class="p">:</span> <span class="n">Box</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>
<span class="n">second_box</span><span class="p">:</span> <span class="n">Box</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
<span class="n">box</span> <span class="o">=</span> <span class="n">second_box</span>  <span class="c1"># This is OK due to the covariance of &#39;Box&#39;.</span>

<span class="k">class</span> <span class="nc">Sender</span><span class="p">(</span><span class="n">Protocol</span><span class="p">[</span><span class="n">T_contra</span><span class="p">]):</span>
    <span class="k">def</span> <span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">T_contra</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="o">...</span>

<span class="n">sender</span><span class="p">:</span> <span class="n">Sender</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>
<span class="n">new_sender</span><span class="p">:</span> <span class="n">Sender</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
<span class="n">new_sender</span> <span class="o">=</span> <span class="n">sender</span>  <span class="c1"># OK, &#39;Sender&#39; is contravariant.</span>

<span class="k">class</span> <span class="nc">Proto</span><span class="p">(</span><span class="n">Protocol</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
    <span class="n">attr</span><span class="p">:</span> <span class="n">T</span>  <span class="c1"># this class is invariant, since it has a mutable attribute</span>

<span class="n">var</span><span class="p">:</span> <span class="n">Proto</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>
<span class="n">another_var</span><span class="p">:</span> <span class="n">Proto</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
<span class="n">var</span> <span class="o">=</span> <span class="n">another_var</span>  <span class="c1"># Error! &#39;Proto[float]&#39; is incompatible with &#39;Proto[int]&#39;.</span>
</pre></div>
</div>
<p>Note that unlike nominal classes, de facto covariant protocols cannot be
declared as invariant, since this can break transitivity of subtyping
(see <a class="reference internal" href="#rejected">rejected</a> ideas for details). For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">AnotherBox</span><span class="p">(</span><span class="n">Protocol</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>  <span class="c1"># Error, this protocol is covariant in T,</span>
    <span class="k">def</span> <span class="nf">content</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>     <span class="c1"># not invariant.</span>
        <span class="o">...</span>
</pre></div>
</div>
</section>
<section id="recursive-protocols">
<h3><a class="toc-backref" href="#id29">Recursive protocols</a><a class="headerlink" href="#recursive-protocols" title="Permalink to this headline">¶</a></h3>
<p>Recursive protocols are also supported. Forward references to the protocol
class names can be given as strings as specified by <a class="reference external" href="pep-0484.html">PEP 484</a>. Recursive
protocols are useful for representing self-referential data structures
like trees in an abstract fashion:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Traversable</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">leaves</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="s1">&#39;Traversable&#39;</span><span class="p">]:</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>Note that for recursive protocols, a class is considered a subtype of
the protocol in situations where the decision depends on itself.
Continuing the previous example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SimpleTree</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">leaves</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="s1">&#39;SimpleTree&#39;</span><span class="p">]:</span>
        <span class="o">...</span>

<span class="n">root</span><span class="p">:</span> <span class="n">Traversable</span> <span class="o">=</span> <span class="n">SimpleTree</span><span class="p">()</span>  <span class="c1"># OK</span>

<span class="k">class</span> <span class="nc">Tree</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
    <span class="k">def</span> <span class="nf">leaves</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="s1">&#39;Tree[T]&#39;</span><span class="p">]:</span>
        <span class="o">...</span>

<span class="k">def</span> <span class="nf">walk</span><span class="p">(</span><span class="n">graph</span><span class="p">:</span> <span class="n">Traversable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>
<span class="n">tree</span><span class="p">:</span> <span class="n">Tree</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">Tree</span><span class="p">()</span>
<span class="n">walk</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>  <span class="c1"># OK, &#39;Tree[float]&#39; is a subtype of &#39;Traversable&#39;</span>
</pre></div>
</div>
</section>
<section id="self-types-in-protocols">
<h3><a class="toc-backref" href="#id30">Self-types in protocols</a><a class="headerlink" href="#self-types-in-protocols" title="Permalink to this headline">¶</a></h3>
<p>The self-types in protocols follow the corresponding specification
<a class="reference internal" href="#self-types" id="id10"><span>[self-types]</span></a> of <a class="reference external" href="pep-0484.html">PEP 484</a>. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="s1">&#39;Copyable&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Copyable</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="n">C</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">C</span><span class="p">:</span>

<span class="k">class</span> <span class="nc">One</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;One&#39;</span><span class="p">:</span>
        <span class="o">...</span>

<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="s1">&#39;Other&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Other</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
        <span class="o">...</span>

<span class="n">c</span><span class="p">:</span> <span class="n">Copyable</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">One</span><span class="p">()</span>  <span class="c1"># OK</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">Other</span><span class="p">()</span>  <span class="c1"># Also OK</span>
</pre></div>
</div>
</section>
<section id="callback-protocols">
<h3><a class="toc-backref" href="#id31">Callback protocols</a><a class="headerlink" href="#callback-protocols" title="Permalink to this headline">¶</a></h3>
<p>Protocols can be used to define flexible callback types that are hard
(or even impossible) to express using the <code class="docutils literal notranslate"><span class="pre">Callable[...]</span></code> syntax
specified by <a class="reference external" href="pep-0484.html">PEP 484</a>, such as variadic, overloaded, and complex generic
callbacks. They can be defined as protocols with a <code class="docutils literal notranslate"><span class="pre">__call__</span></code> member:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Protocol</span>

<span class="k">class</span> <span class="nc">Combiner</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">vals</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
                 <span class="n">maxlen</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]:</span> <span class="o">...</span>

<span class="k">def</span> <span class="nf">good_cb</span><span class="p">(</span><span class="o">*</span><span class="n">vals</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">maxlen</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]:</span>
    <span class="o">...</span>
<span class="k">def</span> <span class="nf">bad_cb</span><span class="p">(</span><span class="o">*</span><span class="n">vals</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">maxitems</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]:</span>
    <span class="o">...</span>

<span class="n">comb</span><span class="p">:</span> <span class="n">Combiner</span> <span class="o">=</span> <span class="n">good_cb</span>  <span class="c1"># OK</span>
<span class="n">comb</span> <span class="o">=</span> <span class="n">bad_cb</span>  <span class="c1"># Error! Argument 2 has incompatible type because of</span>
               <span class="c1"># different name and kind in the callback</span>
</pre></div>
</div>
<p>Callback protocols and <code class="docutils literal notranslate"><span class="pre">Callable[...]</span></code> types can be used interchangeably.</p>
</section>
</section>
<section id="using-protocols">
<h2><a class="toc-backref" href="#id32">Using Protocols</a><a class="headerlink" href="#using-protocols" title="Permalink to this headline">¶</a></h2>
<section id="subtyping-relationships-with-other-types">
<h3><a class="toc-backref" href="#id33">Subtyping relationships with other types</a><a class="headerlink" href="#subtyping-relationships-with-other-types" title="Permalink to this headline">¶</a></h3>
<p>Protocols cannot be instantiated, so there are no values whose
runtime type is a protocol. For variables and parameters with protocol types,
subtyping relationships are subject to the following rules:</p>
<ul class="simple">
<li><p>A protocol is never a subtype of a concrete type.</p></li>
<li><p>A concrete type <code class="docutils literal notranslate"><span class="pre">X</span></code> is a subtype of protocol <code class="docutils literal notranslate"><span class="pre">P</span></code>
if and only if <code class="docutils literal notranslate"><span class="pre">X</span></code> implements all protocol members of <code class="docutils literal notranslate"><span class="pre">P</span></code> with
compatible types. In other words, subtyping with respect to a protocol is
always structural.</p></li>
<li><p>A protocol <code class="docutils literal notranslate"><span class="pre">P1</span></code> is a subtype of another protocol <code class="docutils literal notranslate"><span class="pre">P2</span></code> if <code class="docutils literal notranslate"><span class="pre">P1</span></code> defines
all protocol members of <code class="docutils literal notranslate"><span class="pre">P2</span></code> with compatible types.</p></li>
</ul>
<p>Generic protocol types follow the same rules of variance as non-protocol
types. Protocol types can be used in all contexts where any other types
can be used, such as in <code class="docutils literal notranslate"><span class="pre">Union</span></code>, <code class="docutils literal notranslate"><span class="pre">ClassVar</span></code>, type variables bounds, etc.
Generic protocols follow the rules for generic abstract classes, except for
using structural compatibility instead of compatibility defined by
inheritance relationships.</p>
<p>Static type checkers will recognize protocol implementations, even if the
corresponding protocols are <em>not imported</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># file lib.py</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Sized</span>

<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="n">contravariant</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">ListLike</span><span class="p">(</span><span class="n">Sized</span><span class="p">,</span> <span class="n">Protocol</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span>

<span class="k">def</span> <span class="nf">populate</span><span class="p">(</span><span class="n">lst</span><span class="p">:</span> <span class="n">ListLike</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>

<span class="c1"># file main.py</span>
<span class="kn">from</span> <span class="nn">lib</span> <span class="kn">import</span> <span class="n">populate</span>  <span class="c1"># Note that ListLike is NOT imported</span>

<span class="k">class</span> <span class="nc">MockStack</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">42</span>
    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">populate</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>    <span class="c1"># Passes type check</span>
<span class="n">populate</span><span class="p">(</span><span class="n">MockStack</span><span class="p">())</span>  <span class="c1"># Also OK</span>
</pre></div>
</div>
</section>
<section id="unions-and-intersections-of-protocols">
<h3><a class="toc-backref" href="#id34">Unions and intersections of protocols</a><a class="headerlink" href="#unions-and-intersections-of-protocols" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Union</span></code> of protocol classes behaves the same way as for non-protocol
classes. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Protocol</span>

<span class="k">class</span> <span class="nc">Exitable</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">exit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="o">...</span>
<span class="k">class</span> <span class="nc">Quittable</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">quit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="o">...</span>

<span class="k">def</span> <span class="nf">finish</span><span class="p">(</span><span class="n">task</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Exitable</span><span class="p">,</span> <span class="n">Quittable</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="o">...</span>
<span class="k">class</span> <span class="nc">DefaultJob</span><span class="p">:</span>
    <span class="o">...</span>
    <span class="k">def</span> <span class="nf">quit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
<span class="n">finish</span><span class="p">(</span><span class="n">DefaultJob</span><span class="p">())</span> <span class="c1"># OK</span>
</pre></div>
</div>
<p>One can use multiple inheritance to define an intersection of protocols.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">Hashable</span>

<span class="k">class</span> <span class="nc">HashableFloats</span><span class="p">(</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">Hashable</span><span class="p">,</span> <span class="n">Protocol</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">cached_func</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">HashableFloats</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
    <span class="o">...</span>
<span class="n">cached_func</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span> <span class="c1"># OK, tuple is both hashable and iterable</span>
</pre></div>
</div>
<p>If this will prove to be a widely used scenario, then a special
intersection type construct could be added in future as specified by <a class="reference external" href="pep-0483.html">PEP 483</a>,
see <a class="reference internal" href="#rejected">rejected</a> ideas for more details.</p>
</section>
<section id="type-and-class-objects-vs-protocols">
<h3><a class="toc-backref" href="#id35"><code class="docutils literal notranslate"><span class="pre">Type[]</span></code> and class objects vs protocols</a><a class="headerlink" href="#type-and-class-objects-vs-protocols" title="Permalink to this headline">¶</a></h3>
<p>Variables and parameters annotated with <code class="docutils literal notranslate"><span class="pre">Type[Proto]</span></code> accept only concrete
(non-protocol) subtypes of <code class="docutils literal notranslate"><span class="pre">Proto</span></code>. The main reason for this is to allow
instantiation of parameters with such type. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Proto</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">meth</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="o">...</span>
<span class="k">class</span> <span class="nc">Concrete</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">meth</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">42</span>

<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="bp">cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">Proto</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">()</span><span class="o">.</span><span class="n">meth</span><span class="p">()</span> <span class="c1"># OK</span>
<span class="n">fun</span><span class="p">(</span><span class="n">Proto</span><span class="p">)</span>              <span class="c1"># Error</span>
<span class="n">fun</span><span class="p">(</span><span class="n">Concrete</span><span class="p">)</span>           <span class="c1"># OK</span>
</pre></div>
</div>
<p>The same rule applies to variables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">Proto</span><span class="p">]</span>
<span class="n">var</span> <span class="o">=</span> <span class="n">Proto</span>    <span class="c1"># Error</span>
<span class="n">var</span> <span class="o">=</span> <span class="n">Concrete</span> <span class="c1"># OK</span>
<span class="n">var</span><span class="p">()</span><span class="o">.</span><span class="n">meth</span><span class="p">()</span>   <span class="c1"># OK</span>
</pre></div>
</div>
<p>Assigning an ABC or a protocol class to a variable is allowed if it is
not explicitly typed, and such assignment creates a type alias.
For normal (non-abstract) classes, the behavior of <code class="docutils literal notranslate"><span class="pre">Type[]</span></code> is
not changed.</p>
<p>A class object is considered an implementation of a protocol if accessing
all members on it results in types compatible with the protocol members.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Protocol</span>

<span class="k">class</span> <span class="nc">ProtoA</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">meth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span> <span class="o">...</span>
<span class="k">class</span> <span class="nc">ProtoB</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">meth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span> <span class="o">...</span>

<span class="k">class</span> <span class="nc">C</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">meth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span> <span class="o">...</span>

<span class="n">a</span><span class="p">:</span> <span class="n">ProtoA</span> <span class="o">=</span> <span class="n">C</span>  <span class="c1"># Type check error, signatures don&#39;t match!</span>
<span class="n">b</span><span class="p">:</span> <span class="n">ProtoB</span> <span class="o">=</span> <span class="n">C</span>  <span class="c1"># OK</span>
</pre></div>
</div>
</section>
<section id="newtype-and-type-aliases">
<h3><a class="toc-backref" href="#id36"><code class="docutils literal notranslate"><span class="pre">NewType()</span></code> and type aliases</a><a class="headerlink" href="#newtype-and-type-aliases" title="Permalink to this headline">¶</a></h3>
<p>Protocols are essentially anonymous. To emphasize this point, static type
checkers might refuse protocol classes inside <code class="docutils literal notranslate"><span class="pre">NewType()</span></code> to avoid an
illusion that a distinct type is provided:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">NewType</span><span class="p">,</span> <span class="n">Protocol</span><span class="p">,</span> <span class="n">Iterator</span>

<span class="k">class</span> <span class="nc">Id</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="n">code</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">secrets</span><span class="p">:</span> <span class="n">Iterator</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span>

<span class="n">UserId</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s1">&#39;UserId&#39;</span><span class="p">,</span> <span class="n">Id</span><span class="p">)</span>  <span class="c1"># Error, can&#39;t provide distinct type</span>
</pre></div>
</div>
<p>In contrast, type aliases are fully supported, including generic type
aliases:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">TypeVar</span><span class="p">,</span> <span class="n">Reversible</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">Sized</span>

<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">SizedIterable</span><span class="p">(</span><span class="n">Iterable</span><span class="p">[</span><span class="n">T</span><span class="p">],</span> <span class="n">Sized</span><span class="p">,</span> <span class="n">Protocol</span><span class="p">):</span>
    <span class="k">pass</span>
<span class="n">CompatReversible</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span><span class="n">Reversible</span><span class="p">[</span><span class="n">T</span><span class="p">],</span> <span class="n">SizedIterable</span><span class="p">[</span><span class="n">T</span><span class="p">]]</span>
</pre></div>
</div>
</section>
<section id="modules-as-implementations-of-protocols">
<h3><a class="toc-backref" href="#id37">Modules as implementations of protocols</a><a class="headerlink" href="#modules-as-implementations-of-protocols" title="Permalink to this headline">¶</a></h3>
<p>A module object is accepted where a protocol is expected if the public
interface of the given module is compatible with the expected protocol.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># file default_config.py</span>
<span class="n">timeout</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">one_flag</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">other_flag</span> <span class="o">=</span> <span class="kc">False</span>

<span class="c1"># file main.py</span>
<span class="kn">import</span> <span class="nn">default_config</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Protocol</span>

<span class="k">class</span> <span class="nc">Options</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">one_flag</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="n">other_flag</span><span class="p">:</span> <span class="nb">bool</span>

<span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="n">options</span><span class="p">:</span> <span class="n">Options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>

<span class="n">setup</span><span class="p">(</span><span class="n">default_config</span><span class="p">)</span>  <span class="c1"># OK</span>
</pre></div>
</div>
<p>To determine compatibility of module level functions, the <code class="docutils literal notranslate"><span class="pre">self</span></code> argument
of the corresponding protocol methods is dropped. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># callbacks.py</span>
<span class="k">def</span> <span class="nf">on_error</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>
<span class="k">def</span> <span class="nf">on_success</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>

<span class="c1"># main.py</span>
<span class="kn">import</span> <span class="nn">callbacks</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Protocol</span>

<span class="k">class</span> <span class="nc">Reporter</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="o">...</span>
    <span class="k">def</span> <span class="nf">on_success</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="o">...</span>

<span class="n">rp</span><span class="p">:</span> <span class="n">Reporter</span> <span class="o">=</span> <span class="n">callbacks</span>  <span class="c1"># Passes type check</span>
</pre></div>
</div>
</section>
<section id="runtime-checkable-decorator-and-narrowing-types-by-isinstance">
<span id="discussion"></span><h3><a class="toc-backref" href="#id38"><code class="docutils literal notranslate"><span class="pre">&#64;runtime_checkable</span></code> decorator and narrowing types by <code class="docutils literal notranslate"><span class="pre">isinstance()</span></code></a><a class="headerlink" href="#runtime-checkable-decorator-and-narrowing-types-by-isinstance" title="Permalink to this headline">¶</a></h3>
<p>The default semantics is that <code class="docutils literal notranslate"><span class="pre">isinstance()</span></code> and <code class="docutils literal notranslate"><span class="pre">issubclass()</span></code> fail
for protocol types. This is in the spirit of duck typing – protocols
basically would be used to model duck typing statically, not explicitly
at runtime.</p>
<p>However, it should be possible for protocol types to implement custom
instance and class checks when this makes sense, similar to how <code class="docutils literal notranslate"><span class="pre">Iterable</span></code>
and other ABCs in <code class="docutils literal notranslate"><span class="pre">collections.abc</span></code> and <code class="docutils literal notranslate"><span class="pre">typing</span></code> already do it,
but this is limited to non-generic and unsubscripted generic protocols
(<code class="docutils literal notranslate"><span class="pre">Iterable</span></code> is statically equivalent to <code class="docutils literal notranslate"><span class="pre">Iterable[Any]</span></code>).
The <code class="docutils literal notranslate"><span class="pre">typing</span></code> module will define a special <code class="docutils literal notranslate"><span class="pre">&#64;runtime_checkable</span></code> class decorator
that provides the same semantics for class and instance checks as for
<code class="docutils literal notranslate"><span class="pre">collections.abc</span></code> classes, essentially making them “runtime protocols”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">runtime_checkable</span><span class="p">,</span> <span class="n">Protocol</span>

<span class="nd">@runtime_checkable</span>
<span class="k">class</span> <span class="nc">SupportsClose</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;some/file&#39;</span><span class="p">),</span> <span class="n">SupportsClose</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that instance checks are not 100% reliable statically, this is why
this behavior is opt-in, see section on <a class="reference internal" href="#rejected">rejected</a> ideas for examples.
The most type checkers can do is to treat <code class="docutils literal notranslate"><span class="pre">isinstance(obj,</span> <span class="pre">Iterator)</span></code>
roughly as a simpler way to write
<code class="docutils literal notranslate"><span class="pre">hasattr(x,</span> <span class="pre">'__iter__')</span> <span class="pre">and</span> <span class="pre">hasattr(x,</span> <span class="pre">'__next__')</span></code>. To minimize
the risks for this feature, the following rules are applied.</p>
<p><strong>Definitions</strong>:</p>
<ul class="simple">
<li><p><em>Data, and non-data protocols</em>: A protocol is called non-data protocol
if it only contains methods as members (for example <code class="docutils literal notranslate"><span class="pre">Sized</span></code>,
<code class="docutils literal notranslate"><span class="pre">Iterator</span></code>, etc). A protocol that contains at least one non-method member
(like <code class="docutils literal notranslate"><span class="pre">x:</span> <span class="pre">int</span></code>) is called a data protocol.</p></li>
<li><p><em>Unsafe overlap</em>: A type <code class="docutils literal notranslate"><span class="pre">X</span></code> is called unsafely overlapping with
a protocol <code class="docutils literal notranslate"><span class="pre">P</span></code>, if <code class="docutils literal notranslate"><span class="pre">X</span></code> is not a subtype of <code class="docutils literal notranslate"><span class="pre">P</span></code>, but it is a subtype
of the type erased version of <code class="docutils literal notranslate"><span class="pre">P</span></code> where all members have type <code class="docutils literal notranslate"><span class="pre">Any</span></code>.
In addition, if at least one element of a union unsafely overlaps with
a protocol <code class="docutils literal notranslate"><span class="pre">P</span></code>, then the whole union is unsafely overlapping with <code class="docutils literal notranslate"><span class="pre">P</span></code>.</p></li>
</ul>
<p><strong>Specification</strong>:</p>
<ul class="simple">
<li><p>A protocol can be used as a second argument in <code class="docutils literal notranslate"><span class="pre">isinstance()</span></code> and
<code class="docutils literal notranslate"><span class="pre">issubclass()</span></code> only if it is explicitly opt-in by <code class="docutils literal notranslate"><span class="pre">&#64;runtime_checkable</span></code>
decorator. This requirement exists because protocol checks are not type safe
in case of dynamically set attributes, and because type checkers can only prove
that an <code class="docutils literal notranslate"><span class="pre">isinstance()</span></code> check is safe only for a given class, not for all its
subclasses.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isinstance()</span></code> can be used with both data and non-data protocols, while
<code class="docutils literal notranslate"><span class="pre">issubclass()</span></code> can be used only with non-data protocols. This restriction
exists because some data attributes can be set on an instance in constructor
and this information is not always available on the class object.</p></li>
<li><p>Type checkers should reject an <code class="docutils literal notranslate"><span class="pre">isinstance()</span></code> or <code class="docutils literal notranslate"><span class="pre">issubclass()</span></code> call, if
there is an unsafe overlap between the type of the first argument and
the protocol.</p></li>
<li><p>Type checkers should be able to select a correct element from a union after
a safe <code class="docutils literal notranslate"><span class="pre">isinstance()</span></code> or <code class="docutils literal notranslate"><span class="pre">issubclass()</span></code> call. For narrowing from non-union
types, type checkers can use their best judgement (this is intentionally
unspecified, since a precise specification would require intersection types).</p></li>
</ul>
</section>
</section>
<section id="using-protocols-in-python-2-7-3-5">
<h2><a class="toc-backref" href="#id39">Using Protocols in Python 2.7 - 3.5</a><a class="headerlink" href="#using-protocols-in-python-2-7-3-5" title="Permalink to this headline">¶</a></h2>
<p>Variable annotation syntax was added in Python 3.6, so that the syntax
for defining protocol variables proposed in <a class="reference internal" href="#specification">specification</a> section can’t
be used if support for earlier versions is needed. To define these
in a manner compatible with older versions of Python one can use properties.
Properties can be settable and/or abstract if needed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">c</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">42</span>         <span class="c1"># Default value can be provided for property...</span>

    <span class="nd">@abstractproperty</span>
    <span class="k">def</span> <span class="nf">d</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>   <span class="c1"># ... or it can be abstract</span>
        <span class="k">return</span> <span class="mi">0</span>
</pre></div>
</div>
<p>Also function type comments can be used as per <a class="reference external" href="pep-0484.html">PEP 484</a> (for example
to provide compatibility with Python 2). The <code class="docutils literal notranslate"><span class="pre">typing</span></code> module changes
proposed in this PEP will also be backported to earlier versions via the
backport currently available on PyPI.</p>
</section>
<section id="runtime-implementation-of-protocol-classes">
<h2><a class="toc-backref" href="#id40">Runtime Implementation of Protocol Classes</a><a class="headerlink" href="#runtime-implementation-of-protocol-classes" title="Permalink to this headline">¶</a></h2>
<section id="implementation-details">
<h3><a class="toc-backref" href="#id41">Implementation details</a><a class="headerlink" href="#implementation-details" title="Permalink to this headline">¶</a></h3>
<p>The runtime implementation could be done in pure Python without any
effects on the core interpreter and standard library except in the
<code class="docutils literal notranslate"><span class="pre">typing</span></code> module, and a minor update to <code class="docutils literal notranslate"><span class="pre">collections.abc</span></code>:</p>
<ul class="simple">
<li><p>Define class <code class="docutils literal notranslate"><span class="pre">typing.Protocol</span></code> similar to <code class="docutils literal notranslate"><span class="pre">typing.Generic</span></code>.</p></li>
<li><p>Implement functionality to detect whether a class is
a protocol or not. Add a class attribute <code class="docutils literal notranslate"><span class="pre">_is_protocol</span> <span class="pre">=</span> <span class="pre">True</span></code>
if that is the case. Verify that a protocol class only has protocol
base classes in the MRO (except for object).</p></li>
<li><p>Implement <code class="docutils literal notranslate"><span class="pre">&#64;runtime_checkable</span></code> that allows <code class="docutils literal notranslate"><span class="pre">__subclasshook__()</span></code>
performing structural instance and subclass checks as in <code class="docutils literal notranslate"><span class="pre">collections.abc</span></code>
classes.</p></li>
<li><p>All structural subtyping checks will be performed by static type checkers,
such as <code class="docutils literal notranslate"><span class="pre">mypy</span></code> <a class="reference internal" href="../pep-0484/#mypy" id="id11"><span>[mypy]</span></a>. No additional support for protocol validation will
be provided at runtime.</p></li>
</ul>
</section>
<section id="changes-in-the-typing-module">
<h3><a class="toc-backref" href="#id42">Changes in the typing module</a><a class="headerlink" href="#changes-in-the-typing-module" title="Permalink to this headline">¶</a></h3>
<p>The following classes in <code class="docutils literal notranslate"><span class="pre">typing</span></code> module will be protocols:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Callable</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Awaitable</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Iterable</span></code>, <code class="docutils literal notranslate"><span class="pre">Iterator</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AsyncIterable</span></code>, <code class="docutils literal notranslate"><span class="pre">AsyncIterator</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Hashable</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Sized</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Container</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Collection</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Reversible</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ContextManager</span></code>, <code class="docutils literal notranslate"><span class="pre">AsyncContextManager</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SupportsAbs</span></code> (and other <code class="docutils literal notranslate"><span class="pre">Supports*</span></code> classes)</p></li>
</ul>
<p>Most of these classes are small and conceptually simple. It is easy to see
what are the methods these protocols implement, and immediately recognize
the corresponding runtime protocol counterpart.
Practically, few changes will be needed in <code class="docutils literal notranslate"><span class="pre">typing</span></code> since some of these
classes already behave the necessary way at runtime. Most of these will need
to be updated only in the corresponding <code class="docutils literal notranslate"><span class="pre">typeshed</span></code> stubs <a class="reference internal" href="../pep-0484/#typeshed" id="id12"><span>[typeshed]</span></a>.</p>
<p>All other concrete generic classes such as <code class="docutils literal notranslate"><span class="pre">List</span></code>, <code class="docutils literal notranslate"><span class="pre">Set</span></code>, <code class="docutils literal notranslate"><span class="pre">IO</span></code>,
<code class="docutils literal notranslate"><span class="pre">Deque</span></code>, etc are sufficiently complex that it makes sense to keep
them non-protocols (i.e. require code to be explicit about them). Also, it is
too easy to leave some methods unimplemented by accident, and explicitly
marking the subclass relationship allows type checkers to pinpoint the missing
implementations.</p>
</section>
<section id="introspection">
<h3><a class="toc-backref" href="#id43">Introspection</a><a class="headerlink" href="#introspection" title="Permalink to this headline">¶</a></h3>
<p>The existing class introspection machinery (<code class="docutils literal notranslate"><span class="pre">dir</span></code>, <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> etc)
can be used with protocols. In addition, all introspection tools implemented
in the <code class="docutils literal notranslate"><span class="pre">typing</span></code> module will support protocols. Since all attributes need
to be defined in the class body based on this proposal, protocol classes will
have even better perspective for introspection than regular classes where
attributes can be defined implicitly – protocol attributes can’t be
initialized in ways that are not visible to introspection
(using <code class="docutils literal notranslate"><span class="pre">setattr()</span></code>, assignment via <code class="docutils literal notranslate"><span class="pre">self</span></code>, etc.). Still, some things like
types of attributes will not be visible at runtime in Python 3.5 and earlier,
but this looks like a reasonable limitation.</p>
<p>There will be only limited support of <code class="docutils literal notranslate"><span class="pre">isinstance()</span></code> and <code class="docutils literal notranslate"><span class="pre">issubclass()</span></code>
as discussed above (these will <em>always</em> fail with <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> for
subscripted generic protocols, since a reliable answer could not be given
at runtime in this case). But together with other introspection tools this
give a reasonable perspective for runtime type checking tools.</p>
</section>
</section>
<section id="rejected-postponed-ideas">
<span id="rejected"></span><h2><a class="toc-backref" href="#id44">Rejected/Postponed Ideas</a><a class="headerlink" href="#rejected-postponed-ideas" title="Permalink to this headline">¶</a></h2>
<p>The ideas in this section were previously discussed in <a class="reference internal" href="#several" id="id13"><span>[several]</span></a>
<a class="reference internal" href="#discussions" id="id14"><span>[discussions]</span></a> <a class="reference internal" href="#elsewhere" id="id15"><span>[elsewhere]</span></a>.</p>
<section id="make-every-class-a-protocol-by-default">
<h3><a class="toc-backref" href="#id45">Make every class a protocol by default</a><a class="headerlink" href="#make-every-class-a-protocol-by-default" title="Permalink to this headline">¶</a></h3>
<p>Some languages such as Go make structural subtyping the only or the primary
form of subtyping. We could achieve a similar result by making all classes
protocols by default (or even always). However we believe that it is better
to require classes to be explicitly marked as protocols, for the following
reasons:</p>
<ul class="simple">
<li><p>Protocols don’t have some properties of regular classes. In particular,
<code class="docutils literal notranslate"><span class="pre">isinstance()</span></code>, as defined for normal classes, is based on the nominal
hierarchy. In order to make everything a protocol by default, and have
<code class="docutils literal notranslate"><span class="pre">isinstance()</span></code> work would require changing its semantics,
which won’t happen.</p></li>
<li><p>Protocol classes should generally not have many method implementations,
as they describe an interface, not an implementation.
Most classes have many method implementations, making them bad protocol
classes.</p></li>
<li><p>Experience suggests that many classes are not practical as protocols anyway,
mainly because their interfaces are too large, complex or
implementation-oriented (for example, they may include de facto
private attributes and methods without a <code class="docutils literal notranslate"><span class="pre">__</span></code> prefix).</p></li>
<li><p>Most actually useful protocols in existing Python code seem to be implicit.
The ABCs in <code class="docutils literal notranslate"><span class="pre">typing</span></code> and <code class="docutils literal notranslate"><span class="pre">collections.abc</span></code> are rather an exception, but
even they are recent additions to Python and most programmers
do not use them yet.</p></li>
<li><p>Many built-in functions only accept concrete instances of <code class="docutils literal notranslate"><span class="pre">int</span></code>
(and subclass instances), and similarly for other built-in classes. Making
<code class="docutils literal notranslate"><span class="pre">int</span></code> a structural type wouldn’t be safe without major changes to the
Python runtime, which won’t happen.</p></li>
</ul>
</section>
<section id="protocols-subclassing-normal-classes">
<h3><a class="toc-backref" href="#id46">Protocols subclassing normal classes</a><a class="headerlink" href="#protocols-subclassing-normal-classes" title="Permalink to this headline">¶</a></h3>
<p>The main rationale to prohibit this is to preserve transitivity of subtyping,
consider this example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Protocol</span>

<span class="k">class</span> <span class="nc">Base</span><span class="p">:</span>
    <span class="n">attr</span><span class="p">:</span> <span class="nb">str</span>

<span class="k">class</span> <span class="nc">Proto</span><span class="p">(</span><span class="n">Base</span><span class="p">,</span> <span class="n">Protocol</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">meth</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="o">...</span>

<span class="k">class</span> <span class="nc">C</span><span class="p">:</span>
    <span class="n">attr</span><span class="p">:</span> <span class="nb">str</span>
    <span class="k">def</span> <span class="nf">meth</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
</pre></div>
</div>
<p>Now, <code class="docutils literal notranslate"><span class="pre">C</span></code> is a subtype of <code class="docutils literal notranslate"><span class="pre">Proto</span></code>, and <code class="docutils literal notranslate"><span class="pre">Proto</span></code> is a subtype of <code class="docutils literal notranslate"><span class="pre">Base</span></code>.
But <code class="docutils literal notranslate"><span class="pre">C</span></code> cannot be a subtype of <code class="docutils literal notranslate"><span class="pre">Base</span></code> (since the latter is not
a protocol). This situation would be really weird. In addition, there is
an ambiguity about whether attributes of <code class="docutils literal notranslate"><span class="pre">Base</span></code> should become protocol
members of <code class="docutils literal notranslate"><span class="pre">Proto</span></code>.</p>
</section>
<section id="support-optional-protocol-members">
<h3><a class="toc-backref" href="#id47">Support optional protocol members</a><a class="headerlink" href="#support-optional-protocol-members" title="Permalink to this headline">¶</a></h3>
<p>We can come up with examples where it would be handy to be able to say
that a method or data attribute does not need to be present in a class
implementing a protocol, but if it is present, it must conform to a specific
signature or type. One could use a <code class="docutils literal notranslate"><span class="pre">hasattr()</span></code> check to determine whether
they can use the attribute on a particular instance.</p>
<p>Languages such as TypeScript have similar features and
apparently they are pretty commonly used. The current realistic potential
use cases for protocols in Python don’t require these. In the interest
of simplicity, we propose to not support optional methods or attributes.
We can always revisit this later if there is an actual need.</p>
</section>
<section id="allow-only-protocol-methods-and-force-use-of-getters-and-setters">
<h3><a class="toc-backref" href="#id48">Allow only protocol methods and force use of getters and setters</a><a class="headerlink" href="#allow-only-protocol-methods-and-force-use-of-getters-and-setters" title="Permalink to this headline">¶</a></h3>
<p>One could argue that protocols typically only define methods, but not
variables. However, using getters and setters in cases where only a
simple variable is needed would be quite unpythonic. Moreover, the widespread
use of properties (that often act as type validators) in large code bases
is partially due to previous absence of static type checkers for Python,
the problem that <a class="reference external" href="pep-0484.html">PEP 484</a> and this PEP are aiming to solve. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># without static types</span>

<span class="k">class</span> <span class="nc">MyClass</span><span class="p">:</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">my_attr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_my_attr</span>
    <span class="nd">@my_attr</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">my_attr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;An integer expected for my_attr&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_my_attr</span> <span class="o">=</span> <span class="n">value</span>

<span class="c1"># with static types</span>

<span class="k">class</span> <span class="nc">MyClass</span><span class="p">:</span>
    <span class="n">my_attr</span><span class="p">:</span> <span class="nb">int</span>
</pre></div>
</div>
</section>
<section id="support-non-protocol-members">
<h3><a class="toc-backref" href="#id49">Support non-protocol members</a><a class="headerlink" href="#support-non-protocol-members" title="Permalink to this headline">¶</a></h3>
<p>There was an idea to make some methods “non-protocol” (i.e. not necessary
to implement, and inherited in explicit subclassing), but it was rejected,
since this complicates things. For example, consider this situation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Proto</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">first</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>
    <span class="k">def</span> <span class="nf">second</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">first</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span>

<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="n">Proto</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">arg</span><span class="o">.</span><span class="n">second</span><span class="p">()</span>
</pre></div>
</div>
<p>The question is should this be an error? We think most people would expect
this to be valid. Therefore, to be on the safe side, we need to require both
methods to be implemented in implicit subclasses. In addition, if one looks
at definitions in <code class="docutils literal notranslate"><span class="pre">collections.abc</span></code>, there are very few methods that could
be considered “non-protocol”. Therefore, it was decided to not introduce
“non-protocol” methods.</p>
<p>There is only one downside to this: it will require some boilerplate for
implicit subtypes of “large” protocols. But, this doesn’t apply to “built-in”
protocols that are all “small” (i.e. have only few abstract methods).
Also, such style is discouraged for user-defined protocols. It is recommended
to create compact protocols and combine them.</p>
</section>
<section id="make-protocols-interoperable-with-other-approaches">
<h3><a class="toc-backref" href="#id50">Make protocols interoperable with other approaches</a><a class="headerlink" href="#make-protocols-interoperable-with-other-approaches" title="Permalink to this headline">¶</a></h3>
<p>The protocols as described here are basically a minimal extension to
the existing concept of ABCs. We argue that this is the way they should
be understood, instead of as something that <em>replaces</em> Zope interfaces,
for example. Attempting such interoperabilities will significantly
complicate both the concept and the implementation.</p>
<p>On the other hand, Zope interfaces are conceptually a superset of protocols
defined here, but using an incompatible syntax to define them,
because before <a class="reference external" href="pep-0526.html">PEP 526</a> there was no straightforward way to annotate attributes.
In the 3.6+ world, <code class="docutils literal notranslate"><span class="pre">zope.interface</span></code> might potentially adopt the <code class="docutils literal notranslate"><span class="pre">Protocol</span></code>
syntax. In this case, type checkers could be taught to recognize interfaces
as protocols and make simple structural checks with respect to them.</p>
</section>
<section id="use-assignments-to-check-explicitly-that-a-class-implements-a-protocol">
<h3><a class="toc-backref" href="#id51">Use assignments to check explicitly that a class implements a protocol</a><a class="headerlink" href="#use-assignments-to-check-explicitly-that-a-class-implements-a-protocol" title="Permalink to this headline">¶</a></h3>
<p>In the Go language the explicit checks for implementation are performed
via dummy assignments <a class="reference internal" href="#golang" id="id16"><span>[golang]</span></a>. Such a way is also possible with the
current proposal. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">...</span>

<span class="n">_</span><span class="p">:</span> <span class="n">Sized</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>  <span class="c1"># Error: A.__len__ doesn&#39;t conform to &#39;Sized&#39;</span>
                <span class="c1"># (Incompatible return type &#39;float&#39;)</span>
</pre></div>
</div>
<p>This approach moves the check away from
the class definition and it almost requires a comment as otherwise
the code probably would not make any sense to an average reader
– it looks like dead code. Besides, in the simplest form it requires one
to construct an instance of <code class="docutils literal notranslate"><span class="pre">A</span></code>, which could be problematic if this requires
accessing or allocating some resources such as files or sockets.
We could work around the latter by using a cast, for example, but then
the code would be ugly. Therefore, we discourage the use of this pattern.</p>
</section>
<section id="support-isinstance-checks-by-default">
<h3><a class="toc-backref" href="#id52">Support <code class="docutils literal notranslate"><span class="pre">isinstance()</span></code> checks by default</a><a class="headerlink" href="#support-isinstance-checks-by-default" title="Permalink to this headline">¶</a></h3>
<p>The problem with this is instance checks could be unreliable, except for
situations where there is a common signature convention such as <code class="docutils literal notranslate"><span class="pre">Iterable</span></code>.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">P</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">common_method_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span> <span class="o">...</span>

<span class="k">class</span> <span class="nc">X</span><span class="p">:</span>
    <span class="o">&lt;</span><span class="n">a</span> <span class="n">bunch</span> <span class="n">of</span> <span class="n">methods</span><span class="o">&gt;</span>
    <span class="k">def</span> <span class="nf">common_method_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span> <span class="o">...</span> <span class="c1"># Note different signature</span>

<span class="k">def</span> <span class="nf">do_stuff</span><span class="p">(</span><span class="n">o</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">P</span><span class="p">,</span> <span class="n">X</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">P</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">o</span><span class="o">.</span><span class="n">common_method_name</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Results in TypeError not caught</span>
                                        <span class="c1"># statically if o is an X instance.</span>
</pre></div>
</div>
<p>Another potentially problematic case is assignment of attributes
<em>after</em> instantiation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">P</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">int</span>

<span class="k">class</span> <span class="nc">C</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="p">()</span>
<span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span>  <span class="c1"># False</span>
<span class="n">c</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span>  <span class="c1"># True</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">P</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">P</span><span class="p">):</span>
        <span class="c1"># Static type of x is P here.</span>
        <span class="o">...</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Static type of x is int, but can be other type at runtime...</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">f</span><span class="p">(</span><span class="n">C</span><span class="p">())</span>  <span class="c1"># ...causing a TypeError.</span>
</pre></div>
</div>
<p>We argue that requiring an explicit class decorator would be better, since
one can then attach warnings about problems like this in the documentation.
The user would be able to evaluate whether the benefits outweigh
the potential for confusion for each protocol and explicitly opt in – but
the default behavior would be safer. Finally, it will be easy to make this
behavior default if necessary, while it might be problematic to make it opt-in
after being default.</p>
</section>
<section id="provide-a-special-intersection-type-construct">
<h3><a class="toc-backref" href="#id53">Provide a special intersection type construct</a><a class="headerlink" href="#provide-a-special-intersection-type-construct" title="Permalink to this headline">¶</a></h3>
<p>There was an idea to allow <code class="docutils literal notranslate"><span class="pre">Proto</span> <span class="pre">=</span> <span class="pre">All[Proto1,</span> <span class="pre">Proto2,</span> <span class="pre">...]</span></code> as a shorthand
for:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Proto</span><span class="p">(</span><span class="n">Proto1</span><span class="p">,</span> <span class="n">Proto2</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">Protocol</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>However, it is not yet clear how popular/useful it will be and implementing
this in type checkers for non-protocol classes could be difficult. Finally, it
will be very easy to add this later if needed.</p>
</section>
<section id="prohibit-explicit-subclassing-of-protocols-by-non-protocols">
<h3><a class="toc-backref" href="#id54">Prohibit explicit subclassing of protocols by non-protocols</a><a class="headerlink" href="#prohibit-explicit-subclassing-of-protocols-by-non-protocols" title="Permalink to this headline">¶</a></h3>
<p>This was rejected for the following reasons:</p>
<ul class="simple">
<li><p>Backward compatibility: People are already using ABCs, including generic
ABCs from <code class="docutils literal notranslate"><span class="pre">typing</span></code> module. If we prohibit explicit subclassing of these
ABCs, then quite a lot of code will break.</p></li>
<li><p>Convenience: There are existing protocol-like ABCs (that may be turned
into protocols) that have many useful “mix-in” (non-abstract) methods.
For example, in the case of <code class="docutils literal notranslate"><span class="pre">Sequence</span></code> one only needs to implement
<code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> and <code class="docutils literal notranslate"><span class="pre">__len__</span></code> in an explicit subclass, and one gets
<code class="docutils literal notranslate"><span class="pre">__iter__</span></code>, <code class="docutils literal notranslate"><span class="pre">__contains__</span></code>, <code class="docutils literal notranslate"><span class="pre">__reversed__</span></code>, <code class="docutils literal notranslate"><span class="pre">index</span></code>, and <code class="docutils literal notranslate"><span class="pre">count</span></code>
for free.</p></li>
<li><p>Explicit subclassing makes it explicit that a class implements a particular
protocol, making subtyping relationships easier to see.</p></li>
<li><p>Type checkers can warn about missing protocol members or members with
incompatible types more easily, without having to use hacks like dummy
assignments discussed above in this section.</p></li>
<li><p>Explicit subclassing makes it possible to force a class to be considered
a subtype of a protocol (by using <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">type:</span> <span class="pre">ignore</span></code> together with an
explicit base class) when it is not strictly compatible, such as when
it has an unsafe override.</p></li>
</ul>
</section>
<section id="covariant-subtyping-of-mutable-attributes">
<h3><a class="toc-backref" href="#id55">Covariant subtyping of mutable attributes</a><a class="headerlink" href="#covariant-subtyping-of-mutable-attributes" title="Permalink to this headline">¶</a></h3>
<p>Rejected because covariant subtyping of mutable attributes is not safe.
Consider this example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">P</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">float</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="n">P</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">arg</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.42</span>

<span class="k">class</span> <span class="nc">C</span><span class="p">:</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">int</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="p">()</span>
<span class="n">f</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>  <span class="c1"># Would typecheck if covariant subtyping</span>
      <span class="c1"># of mutable attributes were allowed.</span>
<span class="n">c</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span>  <span class="c1"># But this fails at runtime</span>
</pre></div>
</div>
<p>It was initially proposed to allow this for practical reasons, but it was
subsequently rejected, since this may mask some hard to spot bugs.</p>
</section>
<section id="overriding-inferred-variance-of-protocol-classes">
<h3><a class="toc-backref" href="#id56">Overriding inferred variance of protocol classes</a><a class="headerlink" href="#overriding-inferred-variance-of-protocol-classes" title="Permalink to this headline">¶</a></h3>
<p>It was proposed to allow declaring protocols as invariant if they are actually
covariant or contravariant (as it is possible for nominal classes, see <a class="reference external" href="pep-0484.html">PEP 484</a>).
However, it was decided not to do this because of several downsides:</p>
<ul>
<li><p>Declared protocol invariance breaks transitivity of sub-typing. Consider
this situation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">P</span><span class="p">(</span><span class="n">Protocol</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>  <span class="c1"># Protocol is declared as invariant.</span>
    <span class="k">def</span> <span class="nf">meth</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
        <span class="o">...</span>
<span class="k">class</span> <span class="nc">C</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">meth</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="o">...</span>
<span class="k">class</span> <span class="nc">D</span><span class="p">(</span><span class="n">C</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">meth</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>Now we have that <code class="docutils literal notranslate"><span class="pre">D</span></code> is a subtype of <code class="docutils literal notranslate"><span class="pre">C</span></code>, and <code class="docutils literal notranslate"><span class="pre">C</span></code> is a subtype of
<code class="docutils literal notranslate"><span class="pre">P[float]</span></code>. But <code class="docutils literal notranslate"><span class="pre">D</span></code> is <em>not</em> a subtype of <code class="docutils literal notranslate"><span class="pre">P[float]</span></code> since <code class="docutils literal notranslate"><span class="pre">D</span></code>
implements <code class="docutils literal notranslate"><span class="pre">P[int]</span></code>, and <code class="docutils literal notranslate"><span class="pre">P</span></code> is invariant. There is a possibility
to “cure” this by looking for protocol implementations in MROs but this
will be too complex in a general case, and this “cure” requires abandoning
simple idea of purely structural subtyping for protocols.</p>
</li>
<li><p>Subtyping checks will always require type inference for protocols. In the
above example a user may complain: “Why did you infer <code class="docutils literal notranslate"><span class="pre">P[int]</span></code> for
my <code class="docutils literal notranslate"><span class="pre">D</span></code>? It implements <code class="docutils literal notranslate"><span class="pre">P[float]</span></code>!”. Normally, inference can be overruled
by an explicit annotation, but here this will require explicit subclassing,
defeating the purpose of using protocols.</p></li>
<li><p>Allowing overriding variance will make impossible more detailed error
messages in type checkers citing particular conflicts in member
type signatures.</p></li>
<li><p>Finally, explicit is better than implicit in this case. Requiring user to
declare correct variance will simplify understanding the code and will avoid
unexpected errors at the point of use.</p></li>
</ul>
</section>
<section id="support-adapters-and-adaptation">
<h3><a class="toc-backref" href="#id57">Support adapters and adaptation</a><a class="headerlink" href="#support-adapters-and-adaptation" title="Permalink to this headline">¶</a></h3>
<p>Adaptation was proposed by <a class="reference external" href="pep-0246.html">PEP 246</a> (rejected) and is supported by
<code class="docutils literal notranslate"><span class="pre">zope.interface</span></code>, see <a class="reference external" href="https://docs.zope.org/zope.interface/adapter.html">https://docs.zope.org/zope.interface/adapter.html</a>.
Adapters is quite an advanced concept, and <a class="reference external" href="pep-0484.html">PEP 484</a> supports unions and
generic aliases that can be used instead of adapters. This can be illustrated
with an example of <code class="docutils literal notranslate"><span class="pre">Iterable</span></code> protocol, there is another way of supporting
iteration by providing <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> and <code class="docutils literal notranslate"><span class="pre">__len__</span></code>. If a function
supports both this way and the now standard <code class="docutils literal notranslate"><span class="pre">__iter__</span></code> method, then it could
be annotated by a union type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">OldIterable</span><span class="p">(</span><span class="n">Sized</span><span class="p">,</span> <span class="n">Protocol</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span> <span class="o">...</span>

<span class="n">CompatIterable</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="n">T</span><span class="p">],</span> <span class="n">OldIterable</span><span class="p">[</span><span class="n">T</span><span class="p">]]</span>

<span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span> <span class="o">...</span>
<span class="k">class</span> <span class="nc">B</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span> <span class="o">...</span>
    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span> <span class="o">...</span>

<span class="k">def</span> <span class="nf">iterate</span><span class="p">(</span><span class="n">it</span><span class="p">:</span> <span class="n">CompatIterable</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>

<span class="n">iterate</span><span class="p">(</span><span class="n">A</span><span class="p">())</span>  <span class="c1"># OK</span>
<span class="n">iterate</span><span class="p">(</span><span class="n">B</span><span class="p">())</span>  <span class="c1"># OK</span>
</pre></div>
</div>
<p>Since there is a reasonable alternative for such cases with existing tooling,
it is therefore proposed not to include adaptation in this PEP.</p>
</section>
<section id="call-structural-base-types-interfaces">
<h3><a class="toc-backref" href="#id58">Call structural base types “interfaces”</a><a class="headerlink" href="#call-structural-base-types-interfaces" title="Permalink to this headline">¶</a></h3>
<p>“Protocol” is a term already widely used in Python to describe duck typing
contracts such as the iterator protocol (providing <code class="docutils literal notranslate"><span class="pre">__iter__</span></code>
and <code class="docutils literal notranslate"><span class="pre">__next__</span></code>), and the descriptor protocol (providing <code class="docutils literal notranslate"><span class="pre">__get__</span></code>,
<code class="docutils literal notranslate"><span class="pre">__set__</span></code>, and <code class="docutils literal notranslate"><span class="pre">__delete__</span></code>). In addition to this and other reasons given
in <a class="reference internal" href="#specification">specification</a>, protocols are different from Java interfaces in several
aspects: protocols don’t require explicit declaration of implementation
(they are mainly oriented on duck-typing), protocols can have
default implementations of members and store state.</p>
</section>
<section id="make-protocols-special-objects-at-runtime-rather-than-normal-abcs">
<h3><a class="toc-backref" href="#id59">Make protocols special objects at runtime rather than normal ABCs</a><a class="headerlink" href="#make-protocols-special-objects-at-runtime-rather-than-normal-abcs" title="Permalink to this headline">¶</a></h3>
<p>Making protocols non-ABCs will make the backwards compatibility problematic
if possible at all. For example, <code class="docutils literal notranslate"><span class="pre">collections.abc.Iterable</span></code> is already
an ABC, and lots of existing code use patterns like
<code class="docutils literal notranslate"><span class="pre">isinstance(obj,</span> <span class="pre">collections.abc.Iterable)</span></code> and similar checks with other
ABCs (also in a structural manner, i.e., via <code class="docutils literal notranslate"><span class="pre">__subclasshook__</span></code>).
Disabling this behavior will cause breakages. If we keep this behavior
for ABCs in <code class="docutils literal notranslate"><span class="pre">collections.abc</span></code> but will not provide a similar runtime
behavior for protocols in <code class="docutils literal notranslate"><span class="pre">typing</span></code>, then a smooth transition to protocols
will be not possible. In addition, having two parallel hierarchies may cause
confusions.</p>
</section>
</section>
<section id="backwards-compatibility">
<h2><a class="toc-backref" href="#id60">Backwards Compatibility</a><a class="headerlink" href="#backwards-compatibility" title="Permalink to this headline">¶</a></h2>
<p>This PEP is fully backwards compatible.</p>
</section>
<section id="implementation">
<h2><a class="toc-backref" href="#id61">Implementation</a><a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">mypy</span></code> type checker fully supports protocols (modulo a few
known bugs). This includes treating all the builtin protocols, such as
<code class="docutils literal notranslate"><span class="pre">Iterable</span></code> structurally. The runtime implementation of protocols is
available in <code class="docutils literal notranslate"><span class="pre">typing_extensions</span></code> module on PyPI.</p>
</section>
<section id="references">
<h2><a class="toc-backref" href="#id62">References</a><a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<dl class="citation">
<dt class="label" id="typing"><span class="brackets"><a class="fn-backref" href="#id1">typing</a></span></dt>
<dd><p><a class="reference external" href="https://docs.python.org/3/library/typing.html">https://docs.python.org/3/library/typing.html</a></p>
</dd>
<dt class="label" id="wiki-structural"><span class="brackets"><a class="fn-backref" href="#id2">wiki-structural</a></span></dt>
<dd><p><a class="reference external" href="https://en.wikipedia.org/wiki/Structural_type_system">https://en.wikipedia.org/wiki/Structural_type_system</a></p>
</dd>
<dt class="label" id="zope-interfaces"><span class="brackets"><a class="fn-backref" href="#id3">zope-interfaces</a></span></dt>
<dd><p><a class="reference external" href="https://zopeinterface.readthedocs.io/en/latest/">https://zopeinterface.readthedocs.io/en/latest/</a></p>
</dd>
<dt class="label" id="abstract-classes"><span class="brackets"><a class="fn-backref" href="#id4">abstract-classes</a></span></dt>
<dd><p><a class="reference external" href="https://docs.python.org/3/library/abc.html">https://docs.python.org/3/library/abc.html</a></p>
</dd>
<dt class="label" id="collections-abc"><span class="brackets"><a class="fn-backref" href="#id5">collections-abc</a></span></dt>
<dd><p><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html">https://docs.python.org/3/library/collections.abc.html</a></p>
</dd>
<dt class="label" id="typescript"><span class="brackets"><a class="fn-backref" href="#id6">typescript</a></span></dt>
<dd><p><a class="reference external" href="https://www.typescriptlang.org/docs/handbook/interfaces.html">https://www.typescriptlang.org/docs/handbook/interfaces.html</a></p>
</dd>
<dt class="label" id="golang"><span class="brackets">golang</span><span class="fn-backref">(<a href="#id7">1</a>,<a href="#id16">2</a>)</span></dt>
<dd><p><a class="reference external" href="https://golang.org/doc/effective_go.html#interfaces_and_types">https://golang.org/doc/effective_go.html#interfaces_and_types</a></p>
</dd>
<dt class="label" id="data-model"><span class="brackets"><a class="fn-backref" href="#id9">data-model</a></span></dt>
<dd><p><a class="reference external" href="https://docs.python.org/3/reference/datamodel.html#special-method-names">https://docs.python.org/3/reference/datamodel.html#special-method-names</a></p>
</dd>
<dt class="label" id="typeshed"><span class="brackets"><a class="fn-backref" href="#id12">typeshed</a></span></dt>
<dd><p><a class="reference external" href="https://github.com/python/typeshed/">https://github.com/python/typeshed/</a></p>
</dd>
<dt class="label" id="mypy"><span class="brackets"><a class="fn-backref" href="#id11">mypy</a></span></dt>
<dd><p><a class="reference external" href="http://github.com/python/mypy/">http://github.com/python/mypy/</a></p>
</dd>
<dt class="label" id="several"><span class="brackets"><a class="fn-backref" href="#id13">several</a></span></dt>
<dd><p><a class="reference external" href="https://mail.python.org/pipermail/python-ideas/2015-September/thread.html#35859">https://mail.python.org/pipermail/python-ideas/2015-September/thread.html#35859</a></p>
</dd>
<dt class="label" id="discussions"><span class="brackets"><a class="fn-backref" href="#id14">discussions</a></span></dt>
<dd><p><a class="reference external" href="https://github.com/python/typing/issues/11">https://github.com/python/typing/issues/11</a></p>
</dd>
<dt class="label" id="elsewhere"><span class="brackets"><a class="fn-backref" href="#id15">elsewhere</a></span></dt>
<dd><p><a class="reference external" href="https://github.com/python/peps/pull/224">https://github.com/python/peps/pull/224</a></p>
</dd>
<dt class="label" id="self-types"><span class="brackets"><a class="fn-backref" href="#id10">self-types</a></span></dt>
<dd><p><a class="reference external" href="https://www.python.org/dev/peps/pep-0484/#annotating-instance-and-class-methods">https://www.python.org/dev/peps/pep-0484/#annotating-instance-and-class-methods</a></p>
</dd>
</dl>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#id63">Copyright</a><a class="headerlink" href="#copyright" title="Permalink to this headline">¶</a></h2>
<p>This document has been placed in the public domain.</p>
</section>
</section>
<span>Source: <a class="reference external" href="https://github.com/python/peps/blob/master/pep-0544.txt">https://github.com/python/peps/blob/master/pep-0544.txt</a></span><div class="zero-height line"><br /></div>
<span>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/master/pep-0544.txt">2021-06-28T11:16:08Z</a></span>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../contents/">PEPs</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">PEP Table of Contents (needed for Sphinx):</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../pep-0000/">PEP 0 – Index of Python Enhancement Proposals (PEPs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0001/">PEP 1 – PEP Purpose and Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0002/">PEP 2 – Procedure for Adding New Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0003/">PEP 3 – Guidelines for Handling Bug Reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0004/">PEP 4 – Deprecation of Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0005/">PEP 5 – Guidelines for Language Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0006/">PEP 6 – Bug Fix Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0007/">PEP 7 – Style Guide for C Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0008/">PEP 8 – Style Guide for Python Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0009/">PEP 9 – Sample Plaintext PEP Template</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0010/">PEP 10 – Voting Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0011/">PEP 11 – Removing support for little used platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0012/">PEP 12 – Sample reStructuredText PEP Template</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0013/">PEP 13 – Python Language Governance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0020/">PEP 20 – The Zen of Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0042/">PEP 42 – Feature Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0100/">PEP 100 – Python Unicode Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0101/">PEP 101 – Doing Python Releases 101</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0102/">PEP 102 – Doing Python Micro Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0103/">PEP 103 – Collecting information about git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0160/">PEP 160 – Python 1.6 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0200/">PEP 200 – Python 2.0 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0201/">PEP 201 – Lockstep Iteration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0202/">PEP 202 – List Comprehensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0203/">PEP 203 – Augmented Assignments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0204/">PEP 204 – Range Literals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0205/">PEP 205 – Weak References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0206/">PEP 206 – Python Advanced Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0207/">PEP 207 – Rich Comparisons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0208/">PEP 208 – Reworking the Coercion Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0209/">PEP 209 – Multi-dimensional Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0210/">PEP 210 – Decoupling the Interpreter Loop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0211/">PEP 211 – Adding A New Outer Product Operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0212/">PEP 212 – Loop Counter Iteration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0213/">PEP 213 – Attribute Access Handlers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0214/">PEP 214 – Extended Print Statement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0215/">PEP 215 – String Interpolation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0216/">PEP 216 – Docstring Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0217/">PEP 217 – Display Hook for Interactive Use</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0218/">PEP 218 – Adding a Built-In Set Object Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0219/">PEP 219 – Stackless Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0220/">PEP 220 – Coroutines, Generators, Continuations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0221/">PEP 221 – Import As</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0222/">PEP 222 – Web Library Enhancements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0223/">PEP 223 – Change the Meaning of ``\x`` Escapes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0224/">PEP 224 – Attribute Docstrings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0225/">PEP 225 – Elementwise/Objectwise Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0226/">PEP 226 – Python 2.1 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0227/">PEP 227 – Statically Nested Scopes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0228/">PEP 228 – Reworking Python’s Numeric Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0229/">PEP 229 – Using Distutils to Build Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0230/">PEP 230 – Warning Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0231/">PEP 231 – __findattr__()</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0232/">PEP 232 – Function Attributes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0233/">PEP 233 – Python Online Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0234/">PEP 234 – Iterators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0235/">PEP 235 – Import on Case-Insensitive Platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0236/">PEP 236 – Back to the __future__</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0237/">PEP 237 – Unifying Long Integers and Integers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0238/">PEP 238 – Changing the Division Operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0239/">PEP 239 – Adding a Rational Type to Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0240/">PEP 240 – Adding a Rational Literal to Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0241/">PEP 241 – Metadata for Python Software Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0242/">PEP 242 – Numeric Kinds</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0243/">PEP 243 – Module Repository Upload Mechanism</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0244/">PEP 244 – The ``directive`` statement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0245/">PEP 245 – Python Interface Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0246/">PEP 246 – Object Adaptation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0247/">PEP 247 – API for Cryptographic Hash Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0248/">PEP 248 – Python Database API Specification v1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0249/">PEP 249 – Python Database API Specification v2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0250/">PEP 250 – Using site-packages on Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0251/">PEP 251 – Python 2.2 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0252/">PEP 252 – Making Types Look More Like Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0253/">PEP 253 – Subtyping Built-in Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0254/">PEP 254 – Making Classes Look More Like Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0255/">PEP 255 – Simple Generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0256/">PEP 256 – Docstring Processing System Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0257/">PEP 257 – Docstring Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0258/">PEP 258 – Docutils Design Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0259/">PEP 259 – Omit printing newline after newline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0260/">PEP 260 – Simplify xrange()</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0261/">PEP 261 – Support for “wide” Unicode characters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0262/">PEP 262 – A Database of Installed Python Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0263/">PEP 263 – Defining Python Source Code Encodings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0264/">PEP 264 – Future statements in simulated shells</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0265/">PEP 265 – Sorting Dictionaries by Value</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0266/">PEP 266 – Optimizing Global Variable/Attribute Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0267/">PEP 267 – Optimized Access to Module Namespaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0268/">PEP 268 – Extended HTTP functionality and WebDAV</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0269/">PEP 269 – Pgen Module for Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0270/">PEP 270 – uniq method for list objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0271/">PEP 271 – Prefixing sys.path by command line option</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0272/">PEP 272 – API for Block Encryption Algorithms v1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0273/">PEP 273 – Import Modules from Zip Archives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0274/">PEP 274 – Dict Comprehensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0275/">PEP 275 – Switching on Multiple Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0276/">PEP 276 – Simple Iterator for ints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0277/">PEP 277 – Unicode file name support for Windows NT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0278/">PEP 278 – Universal Newline Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0279/">PEP 279 – The enumerate() built-in function</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0280/">PEP 280 – Optimizing access to globals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0281/">PEP 281 – Loop Counter Iteration with range and xrange</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0282/">PEP 282 – A Logging System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0283/">PEP 283 – Python 2.3 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0284/">PEP 284 – Integer for-loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0285/">PEP 285 – Adding a bool type</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0286/">PEP 286 – Enhanced Argument Tuples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0287/">PEP 287 – reStructuredText Docstring Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0288/">PEP 288 – Generators Attributes and Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0289/">PEP 289 – Generator Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0290/">PEP 290 – Code Migration and Modernization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0291/">PEP 291 – Backward Compatibility for the Python 2 Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0292/">PEP 292 – Simpler String Substitutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0293/">PEP 293 – Codec Error Handling Callbacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0294/">PEP 294 – Type Names in the types Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0295/">PEP 295 – Interpretation of multiline string constants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0296/">PEP 296 – Adding a bytes Object Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0297/">PEP 297 – Support for System Upgrades</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0298/">PEP 298 – The Locked Buffer Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0299/">PEP 299 – Special __main__() function in modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0301/">PEP 301 – Package Index and Metadata for Distutils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0302/">PEP 302 – New Import Hooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0303/">PEP 303 – Extend divmod() for Multiple Divisors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0304/">PEP 304 – Controlling Generation of Bytecode Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0305/">PEP 305 – CSV File API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0306/">PEP 306 – How to Change Python’s Grammar</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0307/">PEP 307 – Extensions to the pickle protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0308/">PEP 308 – Conditional Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0309/">PEP 309 – Partial Function Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0310/">PEP 310 – Reliable Acquisition/Release Pairs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0311/">PEP 311 – Simplified Global Interpreter Lock Acquisition for Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0312/">PEP 312 – Simple Implicit Lambda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0313/">PEP 313 – Adding Roman Numeral Literals to Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0314/">PEP 314 – Metadata for Python Software Packages v1.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0315/">PEP 315 – Enhanced While Loop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0316/">PEP 316 – Programming by Contract for Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0317/">PEP 317 – Eliminate Implicit Exception Instantiation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0318/">PEP 318 – Decorators for Functions and Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0319/">PEP 319 – Python Synchronize/Asynchronize Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0320/">PEP 320 – Python 2.4 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0321/">PEP 321 – Date/Time Parsing and Formatting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0322/">PEP 322 – Reverse Iteration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0323/">PEP 323 – Copyable Iterators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0324/">PEP 324 – subprocess - New process module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0325/">PEP 325 – Resource-Release Support for Generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0326/">PEP 326 – A Case for Top and Bottom Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0327/">PEP 327 – Decimal Data Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0328/">PEP 328 – Imports: Multi-Line and Absolute/Relative</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0329/">PEP 329 – Treating Builtins as Constants in the Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0330/">PEP 330 – Python Bytecode Verification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0331/">PEP 331 – Locale-Independent Float/String Conversions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0332/">PEP 332 – Byte vectors and String/Unicode Unification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0333/">PEP 333 – Python Web Server Gateway Interface v1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0334/">PEP 334 – Simple Coroutines via SuspendIteration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0335/">PEP 335 – Overloadable Boolean Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0336/">PEP 336 – Make None Callable</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0337/">PEP 337 – Logging Usage in the Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0338/">PEP 338 – Executing modules as scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0339/">PEP 339 – Design of the CPython Compiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0340/">PEP 340 – Anonymous Block Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0341/">PEP 341 – Unifying try-except and try-finally</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0342/">PEP 342 – Coroutines via Enhanced Generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0343/">PEP 343 – The “with” Statement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0344/">PEP 344 – Exception Chaining and Embedded Tracebacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0345/">PEP 345 – Metadata for Python Software Packages 1.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0346/">PEP 346 – User Defined (“``with``”) Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0347/">PEP 347 – Migrating the Python CVS to Subversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0348/">PEP 348 – Exception Reorganization for Python 3.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0349/">PEP 349 – Allow str() to return unicode strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0350/">PEP 350 – Codetags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0351/">PEP 351 – The freeze protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0352/">PEP 352 – Required Superclass for Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0353/">PEP 353 – Using ssize_t as the index type</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0354/">PEP 354 – Enumerations in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0355/">PEP 355 – Path - Object oriented filesystem paths</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0356/">PEP 356 – Python 2.5 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0357/">PEP 357 – Allowing Any Object to be Used for Slicing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0358/">PEP 358 – The “bytes” Object</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0359/">PEP 359 – The “make” Statement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0360/">PEP 360 – Externally Maintained Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0361/">PEP 361 – Python 2.6 and 3.0 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0362/">PEP 362 – Function Signature Object</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0363/">PEP 363 – Syntax For Dynamic Attribute Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0364/">PEP 364 – Transitioning to the Py3K Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0365/">PEP 365 – Adding the pkg_resources module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0366/">PEP 366 – Main module explicit relative imports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0367/">PEP 367 – New Super</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0368/">PEP 368 – Standard image protocol and class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0369/">PEP 369 – Post import hooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0370/">PEP 370 – Per user site-packages directory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0371/">PEP 371 – Addition of the multiprocessing package to the standard library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0372/">PEP 372 – Adding an ordered dictionary to collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0373/">PEP 373 – Python 2.7 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0374/">PEP 374 – Choosing a distributed VCS for the Python project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0375/">PEP 375 – Python 3.1 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0376/">PEP 376 – Database of Installed Python Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0377/">PEP 377 – Allow __enter__() methods to skip the statement body</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0378/">PEP 378 – Format Specifier for Thousands Separator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0379/">PEP 379 – Adding an Assignment Expression</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0380/">PEP 380 – Syntax for Delegating to a Subgenerator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0381/">PEP 381 – Mirroring infrastructure for PyPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0382/">PEP 382 – Namespace Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0383/">PEP 383 – Non-decodable Bytes in System Character Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0384/">PEP 384 – Defining a Stable ABI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0385/">PEP 385 – Migrating from Subversion to Mercurial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0386/">PEP 386 – Changing the version comparison module in Distutils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0387/">PEP 387 – Backwards Compatibility Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0389/">PEP 389 – argparse - New Command Line Parsing Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0390/">PEP 390 – Static metadata for Distutils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0391/">PEP 391 – Dictionary-Based Configuration For Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0392/">PEP 392 – Python 3.2 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0393/">PEP 393 – Flexible String Representation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0394/">PEP 394 – The “python” Command on Unix-Like Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0395/">PEP 395 – Qualified Names for Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0396/">PEP 396 – Module Version Numbers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0397/">PEP 397 – Python launcher for Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0398/">PEP 398 – Python 3.3 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0399/">PEP 399 – Pure Python/C Accelerator Module Compatibility Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0400/">PEP 400 – Deprecate codecs.StreamReader and codecs.StreamWriter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0401/">PEP 401 – BDFL Retirement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0402/">PEP 402 – Simplified Package Layout and Partitioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0403/">PEP 403 – General purpose decorator clause (aka “&#64;in” clause)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0404/">PEP 404 – Python 2.8 Un-release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0405/">PEP 405 – Python Virtual Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0406/">PEP 406 – Improved Encapsulation of Import State</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0407/">PEP 407 – New release cycle and introducing long-term support versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0408/">PEP 408 – Standard library __preview__ package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0409/">PEP 409 – Suppressing exception context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0410/">PEP 410 – Use decimal.Decimal type for timestamps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0411/">PEP 411 – Provisional packages in the Python standard library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0412/">PEP 412 – Key-Sharing Dictionary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0413/">PEP 413 – Faster evolution of the Python Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0414/">PEP 414 – Explicit Unicode Literal for Python 3.3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0415/">PEP 415 – Implement context suppression with exception attributes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0416/">PEP 416 – Add a frozendict builtin type</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0417/">PEP 417 – Including mock in the Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0418/">PEP 418 – Add monotonic time, performance counter, and process time functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0419/">PEP 419 – Protecting cleanup statements from interruptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0420/">PEP 420 – Implicit Namespace Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0421/">PEP 421 – Adding sys.implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0422/">PEP 422 – Simpler customisation of class creation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0423/">PEP 423 – Naming conventions and recipes related to packaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0424/">PEP 424 – A method for exposing a length hint</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0425/">PEP 425 – Compatibility Tags for Built Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0426/">PEP 426 – Metadata for Python Software Packages 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0427/">PEP 427 – The Wheel Binary Package Format 1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0428/">PEP 428 – The pathlib module – object-oriented filesystem paths</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0429/">PEP 429 – Python 3.4 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0430/">PEP 430 – Migrating to Python 3 as the default online documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0431/">PEP 431 – Time zone support improvements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0432/">PEP 432 – Restructuring the CPython startup sequence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0433/">PEP 433 – Easier suppression of file descriptor inheritance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0434/">PEP 434 – IDLE Enhancement Exception for All Branches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0435/">PEP 435 – Adding an Enum type to the Python standard library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0436/">PEP 436 – The Argument Clinic DSL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0437/">PEP 437 – A DSL for specifying signatures, annotations and argument converters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0438/">PEP 438 – Transitioning to release-file hosting on PyPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0439/">PEP 439 – Inclusion of implicit pip bootstrap in Python installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0440/">PEP 440 – Version Identification and Dependency Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0441/">PEP 441 – Improving Python ZIP Application Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0442/">PEP 442 – Safe object finalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0443/">PEP 443 – Single-dispatch generic functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0444/">PEP 444 – Python Web3 Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0445/">PEP 445 – Add new APIs to customize Python memory allocators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0446/">PEP 446 – Make newly created file descriptors non-inheritable</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0447/">PEP 447 – Add __getdescriptor__ method to metaclass</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0448/">PEP 448 – Additional Unpacking Generalizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0449/">PEP 449 – Removal of the PyPI Mirror Auto Discovery and Naming Scheme</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0450/">PEP 450 – Adding A Statistics Module To The Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0451/">PEP 451 – A ModuleSpec Type for the Import System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0452/">PEP 452 – API for Cryptographic Hash Functions v2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0453/">PEP 453 – Explicit bootstrapping of pip in Python installations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0454/">PEP 454 – Add a new tracemalloc module to trace Python memory allocations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0455/">PEP 455 – Adding a key-transforming dictionary to collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0456/">PEP 456 – Secure and interchangeable hash algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0457/">PEP 457 – Notation For Positional-Only Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0458/">PEP 458 – Secure PyPI downloads with signed repository metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0459/">PEP 459 – Standard Metadata Extensions for Python Software Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0460/">PEP 460 – Add binary interpolation and formatting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0461/">PEP 461 – Adding % formatting to bytes and bytearray</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0462/">PEP 462 – Core development workflow automation for CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0463/">PEP 463 – Exception-catching expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0464/">PEP 464 – Removal of the PyPI Mirror Authenticity API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0465/">PEP 465 – A dedicated infix operator for matrix multiplication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0466/">PEP 466 – Network Security Enhancements for Python 2.7.x</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0467/">PEP 467 – Minor API improvements for binary sequences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0468/">PEP 468 – Preserving the order of \*\*kwargs in a function.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0469/">PEP 469 – Migration of dict iteration code to Python 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0470/">PEP 470 – Removing External Hosting Support on PyPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0471/">PEP 471 – os.scandir() function – a better and faster directory iterator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0472/">PEP 472 – Support for indexing with keyword arguments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0473/">PEP 473 – Adding structured data to built-in exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0474/">PEP 474 – Creating forge.python.org</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0475/">PEP 475 – Retry system calls failing with EINTR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0476/">PEP 476 – Enabling certificate verification by default for stdlib http clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0477/">PEP 477 – Backport ensurepip (PEP 453) to Python 2.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0478/">PEP 478 – Python 3.5 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0479/">PEP 479 – Change StopIteration handling inside generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0480/">PEP 480 – Surviving a Compromise of PyPI: End-to-end signing of packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0481/">PEP 481 – Migrate CPython to Git, Github, and Phabricator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0482/">PEP 482 – Literature Overview for Type Hints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0483/">PEP 483 – The Theory of Type Hints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0484/">PEP 484 – Type Hints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0485/">PEP 485 – A Function for testing approximate equality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0486/">PEP 486 – Make the Python Launcher aware of virtual environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0487/">PEP 487 – Simpler customisation of class creation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0488/">PEP 488 – Elimination of PYO files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0489/">PEP 489 – Multi-phase extension module initialization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0490/">PEP 490 – Chain exceptions at C level</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0491/">PEP 491 – The Wheel Binary Package Format 1.9</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0492/">PEP 492 – Coroutines with async and await syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0493/">PEP 493 – HTTPS verification migration tools for Python 2.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0494/">PEP 494 – Python 3.6 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0495/">PEP 495 – Local Time Disambiguation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0496/">PEP 496 – Environment Markers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0497/">PEP 497 – A standard mechanism for backward compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0498/">PEP 498 – Literal String Interpolation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0499/">PEP 499 – ``python -m foo`` should bind ``sys.modules[‘foo’]`` in addition to ``sys.modules[‘__main__’]``</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0500/">PEP 500 – A protocol for delegating datetime methods to their
tzinfo implementations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0501/">PEP 501 – General purpose string interpolation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0502/">PEP 502 – String Interpolation - Extended Discussion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0503/">PEP 503 – Simple Repository API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0504/">PEP 504 – Using the System RNG by default</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0505/">PEP 505 – None-aware operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0506/">PEP 506 – Adding A Secrets Module To The Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0507/">PEP 507 – Migrate CPython to Git and GitLab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0508/">PEP 508 – Dependency specification for Python Software Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0509/">PEP 509 – Add a private version to dict</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0510/">PEP 510 – Specialize functions with guards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0511/">PEP 511 – API for code transformers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0512/">PEP 512 – Migrating from hg.python.org to GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0513/">PEP 513 – A Platform Tag for Portable Linux Built Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0514/">PEP 514 – Python registration in the Windows registry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0515/">PEP 515 – Underscores in Numeric Literals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0516/">PEP 516 – Build system abstraction for pip/conda etc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0517/">PEP 517 – A build-system independent format for source trees</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0518/">PEP 518 – Specifying Minimum Build System Requirements for Python Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0519/">PEP 519 – Adding a file system path protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0520/">PEP 520 – Preserving Class Attribute Definition Order</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0521/">PEP 521 – Managing global context via ‘with’ blocks in generators and coroutines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0522/">PEP 522 – Allow BlockingIOError in security sensitive APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0523/">PEP 523 – Adding a frame evaluation API to CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0524/">PEP 524 – Make os.urandom() blocking on Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0525/">PEP 525 – Asynchronous Generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0526/">PEP 526 – Syntax for Variable Annotations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0527/">PEP 527 – Removing Un(der)used file types/extensions on PyPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0528/">PEP 528 – Change Windows console encoding to UTF-8</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0529/">PEP 529 – Change Windows filesystem encoding to UTF-8</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0530/">PEP 530 – Asynchronous Comprehensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0531/">PEP 531 – Existence checking operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0532/">PEP 532 – A circuit breaking protocol and binary operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0533/">PEP 533 – Deterministic cleanup for iterators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0534/">PEP 534 – Improved Errors for Missing Standard Library Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0535/">PEP 535 – Rich comparison chaining</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0536/">PEP 536 – Final Grammar for Literal String Interpolation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0537/">PEP 537 – Python 3.7 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0538/">PEP 538 – Coercing the legacy C locale to a UTF-8 based locale</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0539/">PEP 539 – A New C-API for Thread-Local Storage in CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0540/">PEP 540 – Add a new UTF-8 Mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0541/">PEP 541 – Package Index Name Retention</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0542/">PEP 542 – Dot Notation Assignment In Function Header</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0543/">PEP 543 – A Unified TLS API for Python</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">PEP 544 – Protocols: Structural subtyping (static duck typing)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0545/">PEP 545 – Python Documentation Translations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0546/">PEP 546 – Backport ssl.MemoryBIO and ssl.SSLObject to Python 2.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0547/">PEP 547 – Running extension modules using the -m option</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0548/">PEP 548 – More Flexible Loop Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0549/">PEP 549 – Instance Descriptors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0550/">PEP 550 – Execution Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0551/">PEP 551 – Security transparency in the Python runtime</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0552/">PEP 552 – Deterministic pycs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0553/">PEP 553 – Built-in breakpoint()</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0554/">PEP 554 – Multiple Interpreters in the Stdlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0555/">PEP 555 – Context-local variables (contextvars)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0556/">PEP 556 – Threaded garbage collection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0557/">PEP 557 – Data Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0558/">PEP 558 – Defined semantics for locals()</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0559/">PEP 559 – Built-in noop()</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0560/">PEP 560 – Core support for typing module and generic types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0561/">PEP 561 – Distributing and Packaging Type Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0562/">PEP 562 – Module __getattr__ and __dir__</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0563/">PEP 563 – Postponed Evaluation of Annotations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0564/">PEP 564 – Add new time functions with nanosecond resolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0565/">PEP 565 – Show DeprecationWarning in __main__</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0566/">PEP 566 – Metadata for Python Software Packages 2.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0567/">PEP 567 – Context Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0568/">PEP 568 – Generator-sensitivity for Context Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0569/">PEP 569 – Python 3.8 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0570/">PEP 570 – Python Positional-Only Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0571/">PEP 571 – The manylinux2010 Platform Tag</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0572/">PEP 572 – Assignment Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0573/">PEP 573 – Module State Access from C Extension Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0574/">PEP 574 – Pickle protocol 5 with out-of-band data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0575/">PEP 575 – Unifying function/method classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0576/">PEP 576 – Rationalize Built-in function classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0577/">PEP 577 – Augmented Assignment Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0578/">PEP 578 – Python Runtime Audit Hooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0579/">PEP 579 – Refactoring C functions and methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0580/">PEP 580 – The C call protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0581/">PEP 581 – Using GitHub Issues for CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0582/">PEP 582 – Python local packages directory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0583/">PEP 583 – A Concurrency Memory Model for Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0584/">PEP 584 – Add Union Operators To dict</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0585/">PEP 585 – Type Hinting Generics In Standard Collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0586/">PEP 586 – Literal Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0587/">PEP 587 – Python Initialization Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0588/">PEP 588 – GitHub Issues Migration Plan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0589/">PEP 589 – TypedDict: Type Hints for Dictionaries with a Fixed Set of Keys</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0590/">PEP 590 – Vectorcall: a fast calling protocol for CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0591/">PEP 591 – Adding a final qualifier to typing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0592/">PEP 592 – Adding “Yank” Support to the Simple API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0593/">PEP 593 – Flexible function and variable annotations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0594/">PEP 594 – Removing dead batteries from the standard library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0595/">PEP 595 – Improving bugs.python.org</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0596/">PEP 596 – Python 3.9 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0597/">PEP 597 – Add optional EncodingWarning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0598/">PEP 598 – Introducing incremental feature releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0599/">PEP 599 – The manylinux2014 Platform Tag</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0600/">PEP 600 – Future ‘manylinux’ Platform Tags for Portable Linux Built Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0601/">PEP 601 – Forbid return/break/continue breaking out of finally</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0602/">PEP 602 – Annual Release Cycle for Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0603/">PEP 603 – Adding a frozenmap type to collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0604/">PEP 604 – Allow writing union types as ``X | Y``</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0605/">PEP 605 – A rolling feature release stream for CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0606/">PEP 606 – Python Compatibility Version</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0607/">PEP 607 – Reducing CPython’s Feature Delivery Latency</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0608/">PEP 608 – Coordinated Python release</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0609/">PEP 609 – PyPA Governance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0610/">PEP 610 – Recording the Direct URL Origin of installed distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0611/">PEP 611 – The one million limit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0612/">PEP 612 – Parameter Specification Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0613/">PEP 613 – Explicit Type Aliases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0614/">PEP 614 – Relaxing Grammar Restrictions On Decorators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0615/">PEP 615 – Support for the IANA Time Zone Database in the Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0616/">PEP 616 – String methods to remove prefixes and suffixes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0617/">PEP 617 – New PEG parser for CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0618/">PEP 618 – Add Optional Length-Checking To zip</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0619/">PEP 619 – Python 3.10 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0620/">PEP 620 – Hide implementation details from the C API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0621/">PEP 621 – Storing project metadata in pyproject.toml</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0622/">PEP 622 – Structural Pattern Matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0623/">PEP 623 – Remove wstr from Unicode</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0624/">PEP 624 – Remove Py_UNICODE encoder APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0625/">PEP 625 – File name of a Source Distribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0626/">PEP 626 – Precise line numbers for debugging and other tools.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0627/">PEP 627 – Recording installed projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0628/">PEP 628 – Add ``math.tau``</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0629/">PEP 629 – Versioning PyPI’s Simple API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0630/">PEP 630 – Isolating Extension Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0631/">PEP 631 – Dependency specification in pyproject.toml based on PEP 508</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0632/">PEP 632 – Deprecate distutils module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0633/">PEP 633 – Dependency specification in pyproject.toml using an exploded TOML table</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0634/">PEP 634 – Structural Pattern Matching: Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0635/">PEP 635 – Structural Pattern Matching: Motivation and Rationale</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0636/">PEP 636 – Structural Pattern Matching: Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0637/">PEP 637 – Support for indexing with keyword arguments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0638/">PEP 638 – Syntactic Macros</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0639/">PEP 639 – Metadata for Python Software Packages 2.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0640/">PEP 640 – Unused variable syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0641/">PEP 641 – Using an underscore in the version portion of Python 3.10 compatibility tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0642/">PEP 642 – Explicit Pattern Syntax for Structural Pattern Matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0643/">PEP 643 – Metadata for Package Source Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0644/">PEP 644 – Require OpenSSL 1.1.1 or newer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0645/">PEP 645 – Allow writing optional types as ``x?``</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0646/">PEP 646 – Variadic Generics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0647/">PEP 647 – User-Defined Type Guards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0648/">PEP 648 – Extensible customizations of the interpreter at startup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0649/">PEP 649 – Deferred Evaluation Of Annotations Using Descriptors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0650/">PEP 650 – Specifying Installer Requirements for Python Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0651/">PEP 651 – Robust Stack Overflow Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0652/">PEP 652 – Maintaining the Stable ABI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0653/">PEP 653 – Precise Semantics for Pattern Matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0654/">PEP 654 – Exception Groups and except*</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0655/">PEP 655 – Marking individual TypedDict items as required or potentially-missing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0656/">PEP 656 – Platform Tag for Linux Distributions Using Musl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0657/">PEP 657 – Include Fine Grained Error Locations in Tracebacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0658/">PEP 658 – Serve Distribution Metadata in the Simple Repository API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0659/">PEP 659 – Specializing Adaptive Interpreter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0660/">PEP 660 – Editable installs for pyproject.toml based builds (wheel based)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0661/">PEP 661 – Sentinel Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0662/">PEP 662 – Editable installs via virtual wheels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0666/">PEP 666 – Reject Foolish Indentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0754/">PEP 754 – IEEE 754 Floating Point Special Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0801/">PEP 801 – Reserved</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3000/">PEP 3000 – Python 3000</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3001/">PEP 3001 – Procedure for reviewing and improving standard library modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3002/">PEP 3002 – Procedure for Backwards-Incompatible Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3003/">PEP 3003 – Python Language Moratorium</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3099/">PEP 3099 – Things that will Not Change in Python 3000</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3100/">PEP 3100 – Miscellaneous Python 3.0 Plans</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3101/">PEP 3101 – Advanced String Formatting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3102/">PEP 3102 – Keyword-Only Arguments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3103/">PEP 3103 – A Switch/Case Statement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3104/">PEP 3104 – Access to Names in Outer Scopes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3105/">PEP 3105 – Make print a function</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3106/">PEP 3106 – Revamping dict.keys(), .values() and .items()</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3107/">PEP 3107 – Function Annotations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3108/">PEP 3108 – Standard Library Reorganization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3109/">PEP 3109 – Raising Exceptions in Python 3000</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3110/">PEP 3110 – Catching Exceptions in Python 3000</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3111/">PEP 3111 – Simple input built-in in Python 3000</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3112/">PEP 3112 – Bytes literals in Python 3000</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3113/">PEP 3113 – Removal of Tuple Parameter Unpacking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3114/">PEP 3114 – Renaming iterator.next() to iterator.__next__()</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3115/">PEP 3115 – Metaclasses in Python 3000</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3116/">PEP 3116 – New I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3117/">PEP 3117 – Postfix type declarations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3118/">PEP 3118 – Revising the buffer protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3119/">PEP 3119 – Introducing Abstract Base Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3120/">PEP 3120 – Using UTF-8 as the default source encoding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3121/">PEP 3121 – Extension Module Initialization and Finalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3122/">PEP 3122 – Delineation of the main module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3123/">PEP 3123 – Making PyObject_HEAD conform to standard C</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3124/">PEP 3124 – Overloading, Generic Functions, Interfaces, and Adaptation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3125/">PEP 3125 – Remove Backslash Continuation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3126/">PEP 3126 – Remove Implicit String Concatenation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3127/">PEP 3127 – Integer Literal Support and Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3128/">PEP 3128 – BList: A Faster List-like Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3129/">PEP 3129 – Class Decorators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3130/">PEP 3130 – Access to Current Module/Class/Function</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3131/">PEP 3131 – Supporting Non-ASCII Identifiers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3132/">PEP 3132 – Extended Iterable Unpacking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3133/">PEP 3133 – Introducing Roles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3134/">PEP 3134 – Exception Chaining and Embedded Tracebacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3135/">PEP 3135 – New Super</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3136/">PEP 3136 – Labeled break and continue</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3137/">PEP 3137 – Immutable Bytes and Mutable Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3138/">PEP 3138 – String representation in Python 3000</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3139/">PEP 3139 – Cleaning out sys and the “interpreter” module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3140/">PEP 3140 – str(container) should call str(item), not repr(item)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3141/">PEP 3141 – A Type Hierarchy for Numbers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3142/">PEP 3142 – Add a “while” clause to generator expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3143/">PEP 3143 – Standard daemon process library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3144/">PEP 3144 – IP Address Manipulation Library for the Python Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3145/">PEP 3145 – Asynchronous I/O For subprocess.Popen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3146/">PEP 3146 – Merging Unladen Swallow into CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3147/">PEP 3147 – PYC Repository Directories</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3148/">PEP 3148 – futures - execute computations asynchronously</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3149/">PEP 3149 – ABI version tagged .so files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3150/">PEP 3150 – Statement local namespaces (aka “given” clause)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3151/">PEP 3151 – Reworking the OS and IO exception hierarchy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3152/">PEP 3152 – Cofunctions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3153/">PEP 3153 – Asynchronous IO support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3154/">PEP 3154 – Pickle protocol version 4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3155/">PEP 3155 – Qualified name for classes and functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3156/">PEP 3156 – Asynchronous IO Support Rebooted: the “asyncio” Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3333/">PEP 3333 – Python Web Server Gateway Interface v1.0.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8000/">PEP 8000 – Python Language Governance Proposal Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8001/">PEP 8001 – Python Governance Voting Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8002/">PEP 8002 – Open Source Governance Survey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8010/">PEP 8010 – The Technical Leader Governance Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8011/">PEP 8011 – Python Governance Model Lead by Trio of Pythonistas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8012/">PEP 8012 – The Community Governance Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8013/">PEP 8013 – The External Council Governance Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8014/">PEP 8014 – The Commons Governance Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8015/">PEP 8015 – Organization of the Python community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8016/">PEP 8016 – The Steering Council Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8100/">PEP 8100 – January 2019 steering council election</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8101/">PEP 8101 – 2020 Term steering council election</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8102/">PEP 8102 – 2021 Term steering council election</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../contents/">Documentation overview</a><ul>
      <li>Previous: <a href="../pep-0543/" title="previous chapter">PEP 543 – A Unified TLS API for Python</a></li>
      <li>Next: <a href="../pep-0545/" title="next chapter">PEP 545 – Python Documentation Translations</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      
      
      
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/pep-0544.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
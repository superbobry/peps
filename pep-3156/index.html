
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>PEP 3156 – Asynchronous IO Support Rebooted: the “asyncio” Module &#8212; peps.python.org</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="PEP 3333 – Python Web Server Gateway Interface v1.0.1" href="../pep-3333/" />
    <link rel="prev" title="PEP 3155 – Qualified name for classes and functions" href="../pep-3155/" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="pep-3156-asynchronous-io-support-rebooted-the-asyncio-module">
<h1 class="page-title">PEP 3156 – Asynchronous IO Support Rebooted: the “asyncio” Module<a class="headerlink" href="#pep-3156-asynchronous-io-support-rebooted-the-asyncio-module" title="Permalink to this headline">¶</a></h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">PEP</dt>
<dd class="field-odd"><p>3156</p>
</dd>
<dt class="field-even">Title</dt>
<dd class="field-even"><p>Asynchronous IO Support Rebooted: the “asyncio” Module</p>
</dd>
<dt class="field-odd">Author</dt>
<dd class="field-odd"><p>Guido van Rossum &lt;<a class="reference external" href="mailto:guido&#37;&#52;&#48;python&#46;org?subject=PEP%20-1">guido&#32;&#97;t&#32;python.org</a>&gt;</p>
</dd>
<dt class="field-even">BDFL-Delegate</dt>
<dd class="field-even"><p>Antoine Pitrou &lt;<a class="reference external" href="mailto:antoine&#37;&#52;&#48;python&#46;org?subject=PEP%20-1">antoine&#32;&#97;t&#32;python.org</a>&gt;</p>
</dd>
<dt class="field-odd">Discussions-To</dt>
<dd class="field-odd"><p>&lt;<a class="reference external" href="mailto:python-tulip&#37;&#52;&#48;googlegroups&#46;com">python-tulip<span>&#64;</span>googlegroups<span>&#46;</span>com</a>&gt;</p>
</dd>
<dt class="field-even">Status</dt>
<dd class="field-even"><p>Final</p>
</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Standards Track</p>
</dd>
<dt class="field-even">Created</dt>
<dd class="field-even"><p>12-Dec-2012</p>
</dd>
<dt class="field-odd">Post-History</dt>
<dd class="field-odd"><p>21-Dec-2012</p>
</dd>
<dt class="field-even">Replaces</dt>
<dd class="field-even"><p><a class="reference external" href="pep-3153.html">3153</a></p>
</dd>
<dt class="field-odd">Resolution</dt>
<dd class="field-odd"><p><a class="reference external" href="https://mail.python.org/pipermail/python-dev/2013-November/130419.html">https://mail.python.org/pipermail/python-dev/2013-November/130419.html</a></p>
</dd>
</dl>
<hr class="docutils" />
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#abstract" id="id1">Abstract</a></p></li>
<li><p><a class="reference internal" href="#introduction" id="id2">Introduction</a></p>
<ul>
<li><p><a class="reference internal" href="#status" id="id3">Status</a></p></li>
<li><p><a class="reference internal" href="#dependencies" id="id4">Dependencies</a></p></li>
<li><p><a class="reference internal" href="#module-namespace" id="id5">Module Namespace</a></p></li>
<li><p><a class="reference internal" href="#interoperability" id="id6">Interoperability</a></p></li>
<li><p><a class="reference internal" href="#transports-and-protocols" id="id7">Transports and Protocols</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#event-loop-interface-specification" id="id8">Event Loop Interface Specification</a></p>
<ul>
<li><p><a class="reference internal" href="#event-loop-policy-getting-and-setting-the-current-event-loop" id="id9">Event Loop Policy: Getting and Setting the Current Event Loop</a></p>
<ul>
<li><p><a class="reference internal" href="#passing-an-event-loop-around-explicitly" id="id10">Passing an Event Loop Around Explicitly</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#specifying-times" id="id11">Specifying Times</a></p></li>
<li><p><a class="reference internal" href="#embedded-event-loops" id="id12">Embedded Event Loops</a></p></li>
<li><p><a class="reference internal" href="#event-loop-classes" id="id13">Event Loop Classes</a></p></li>
<li><p><a class="reference internal" href="#event-loop-methods-overview" id="id14">Event Loop Methods Overview</a></p></li>
<li><p><a class="reference internal" href="#event-loop-methods" id="id15">Event Loop Methods</a></p>
<ul>
<li><p><a class="reference internal" href="#starting-stopping-and-closing" id="id16">Starting, Stopping and Closing</a></p></li>
<li><p><a class="reference internal" href="#basic-callbacks" id="id17">Basic Callbacks</a></p></li>
<li><p><a class="reference internal" href="#thread-interaction" id="id18">Thread interaction</a></p></li>
<li><p><a class="reference internal" href="#internet-name-lookups" id="id19">Internet name lookups</a></p></li>
<li><p><a class="reference internal" href="#internet-connections" id="id20">Internet connections</a></p></li>
<li><p><a class="reference internal" href="#wrapped-socket-methods" id="id21">Wrapped Socket Methods</a></p></li>
<li><p><a class="reference internal" href="#i-o-callbacks" id="id22">I/O Callbacks</a></p></li>
<li><p><a class="reference internal" href="#pipes-and-subprocesses" id="id23">Pipes and Subprocesses</a></p></li>
<li><p><a class="reference internal" href="#signal-callbacks" id="id24">Signal callbacks</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#mutual-exclusion-of-callbacks" id="id25">Mutual Exclusion of Callbacks</a></p></li>
<li><p><a class="reference internal" href="#exceptions" id="id26">Exceptions</a></p></li>
<li><p><a class="reference internal" href="#debug-mode" id="id27">Debug Mode</a></p></li>
<li><p><a class="reference internal" href="#handles" id="id28">Handles</a></p></li>
<li><p><a class="reference internal" href="#servers" id="id29">Servers</a></p></li>
<li><p><a class="reference internal" href="#futures" id="id30">Futures</a></p></li>
<li><p><a class="reference internal" href="#transports" id="id31">Transports</a></p>
<ul>
<li><p><a class="reference internal" href="#methods-for-all-transports" id="id32">Methods For All Transports</a></p></li>
<li><p><a class="reference internal" href="#bidirectional-stream-transports" id="id33">Bidirectional Stream Transports</a></p></li>
<li><p><a class="reference internal" href="#unidirectional-stream-transports" id="id34">Unidirectional Stream Transports</a></p></li>
<li><p><a class="reference internal" href="#datagram-transports" id="id35">Datagram Transports</a></p></li>
<li><p><a class="reference internal" href="#subprocess-transports" id="id36">Subprocess Transports</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#protocols" id="id37">Protocols</a></p>
<ul>
<li><p><a class="reference internal" href="#stream-protocols" id="id38">Stream Protocols</a></p></li>
<li><p><a class="reference internal" href="#datagram-protocols" id="id39">Datagram Protocols</a></p></li>
<li><p><a class="reference internal" href="#subprocess-protocol" id="id40">Subprocess Protocol</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#callback-style" id="id41">Callback Style</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#coroutines-and-the-scheduler" id="id42">Coroutines and the Scheduler</a></p>
<ul>
<li><p><a class="reference internal" href="#coroutines" id="id43">Coroutines</a></p></li>
<li><p><a class="reference internal" href="#waiting-for-multiple-coroutines" id="id44">Waiting for Multiple Coroutines</a></p></li>
<li><p><a class="reference internal" href="#sleeping" id="id45">Sleeping</a></p></li>
<li><p><a class="reference internal" href="#tasks" id="id46">Tasks</a></p></li>
<li><p><a class="reference internal" href="#the-scheduler" id="id47">The Scheduler</a></p></li>
<li><p><a class="reference internal" href="#convenience-utilities" id="id48">Convenience Utilities</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#synchronization" id="id49">Synchronization</a></p>
<ul>
<li><p><a class="reference internal" href="#locks" id="id50">Locks</a></p></li>
<li><p><a class="reference internal" href="#queues" id="id51">Queues</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#miscellaneous" id="id52">Miscellaneous</a></p>
<ul>
<li><p><a class="reference internal" href="#logging" id="id53">Logging</a></p></li>
<li><p><a class="reference internal" href="#sigchld-handling-on-unix" id="id54"><code class="docutils literal notranslate"><span class="pre">SIGCHLD</span></code> handling on UNIX</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#wish-list" id="id55">Wish List</a></p></li>
<li><p><a class="reference internal" href="#open-issues" id="id56">Open Issues</a></p></li>
<li><p><a class="reference internal" href="#references" id="id57">References</a></p></li>
<li><p><a class="reference internal" href="#acknowledgments" id="id58">Acknowledgments</a></p></li>
<li><p><a class="reference internal" href="#copyright" id="id59">Copyright</a></p></li>
</ul>
</div>
<section id="abstract">
<h2><a class="toc-backref" href="#id1">Abstract</a><a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h2>
<p>This is a proposal for asynchronous I/O in Python 3, starting at
Python 3.3.  Consider this the concrete proposal that is missing from
<a class="reference external" href="pep-3153.html">PEP 3153</a>.  The proposal includes a pluggable event loop, transport and
protocol abstractions similar to those in Twisted, and a higher-level
scheduler based on <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code> (<a class="reference external" href="pep-0380.html">PEP 380</a>).  The proposed package
name is <code class="docutils literal notranslate"><span class="pre">asyncio</span></code>.</p>
</section>
<section id="introduction">
<h2><a class="toc-backref" href="#id2">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<section id="status">
<h3><a class="toc-backref" href="#id3">Status</a><a class="headerlink" href="#status" title="Permalink to this headline">¶</a></h3>
<p>A reference implementation exists under the code name Tulip.  The
Tulip repo is linked from the References section at the end.  Packages
based on this repo will be provided on PyPI (see References) to enable
using the <code class="docutils literal notranslate"><span class="pre">asyncio</span></code> package with Python 3.3 installations.</p>
<p>As of October 20th 2013, the <code class="docutils literal notranslate"><span class="pre">asyncio</span></code> package has been checked into
the Python 3.4 repository and released with Python 3.4-alpha-4, with
“provisional” API status.  This is an expression of confidence and
intended to increase early feedback on the API, and not intended to
force acceptance of the PEP.  The expectation is that the package will
keep provisional status in Python 3.4 and progress to final status in
Python 3.5.  Development continues to occur primarily in the Tulip
repo, with changes occasionally merged into the CPython repo.</p>
</section>
<section id="dependencies">
<h3><a class="toc-backref" href="#id4">Dependencies</a><a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h3>
<p>Python 3.3 is required for many of the proposed features.  The
reference implementation (Tulip) requires no new language or standard
library features beyond Python 3.3, no third-party modules or
packages, and no C code, except for the (optional) IOCP support on
Windows.</p>
</section>
<section id="module-namespace">
<h3><a class="toc-backref" href="#id5">Module Namespace</a><a class="headerlink" href="#module-namespace" title="Permalink to this headline">¶</a></h3>
<p>The specification here lives in a new top-level package, <code class="docutils literal notranslate"><span class="pre">asyncio</span></code>.
Different components live in separate submodules of the package.  The
package will import common APIs from their respective submodules and
make them available as package attributes (similar to the way the
email package works).  For such common APIs, the name of the submodule
that actually defines them is not part of the specification.  Less
common APIs may have to explicitly be imported from their respective
submodule, and in this case the submodule name is part of the
specification.</p>
<p>Classes and functions defined without a submodule name are assumed to
live in the namespace of the top-level package.  (But do not confuse
these with methods of various classes, which for brevity are also used
without a namespace prefix in certain contexts.)</p>
</section>
<section id="interoperability">
<h3><a class="toc-backref" href="#id6">Interoperability</a><a class="headerlink" href="#interoperability" title="Permalink to this headline">¶</a></h3>
<p>The event loop is the place where most interoperability occurs.  It
should be easy for (Python 3.3 ports of) frameworks like Twisted,
Tornado, or even gevents to either adapt the default event loop
implementation to their needs using a lightweight adapter or proxy, or
to replace the default event loop implementation with an adaptation of
their own event loop implementation.  (Some frameworks, like Twisted,
have multiple event loop implementations.  This should not be a
problem since these all have the same interface.)</p>
<p>In most cases it should be possible for two different third-party
frameworks to interoperate, either by sharing the default event loop
implementation (each using its own adapter), or by sharing the event
loop implementation of either framework.  In the latter case two
levels of adaptation would occur (from framework A’s event loop to the
standard event loop interface, and from there to framework B’s event
loop).  Which event loop implementation is used should be under
control of the main program (though a default policy for event loop
selection is provided).</p>
<p>For this interoperability to be effective, the preferred direction of
adaptation in third party frameworks is to keep the default event loop
and adapt it to the framework’s API.  Ideally all third party
frameworks would give up their own event loop implementation in favor
of the standard implementation.  But not all frameworks may be
satisfied with the functionality provided by the standard
implementation.</p>
<p>In order to support both directions of adaptation, two separate APIs
are specified:</p>
<ul class="simple">
<li><p>An interface for managing the current event loop</p></li>
<li><p>The interface of a conforming event loop</p></li>
</ul>
<p>An event loop implementation may provide additional methods and
guarantees, as long as these are called out in the documentation as
non-standard.  An event loop implementation may also leave certain
methods unimplemented if they cannot be implemented in the given
environment; however, such deviations from the standard API should be
considered only as a last resort, and only if the platform or
environment forces the issue.  (An example would be a platform where
there is a system event loop that cannot be started or stopped; see
“Embedded Event Loops” below.)</p>
<p>The event loop API does not depend on <code class="docutils literal notranslate"><span class="pre">await/yield</span> <span class="pre">from</span></code>.  Rather, it uses
a combination of callbacks, additional interfaces (transports and
protocols), and Futures.  The latter are similar to those defined in
<a class="reference external" href="pep-3148.html">PEP 3148</a>, but have a different implementation and are not tied to
threads.  In particular, the <code class="docutils literal notranslate"><span class="pre">result()</span></code> method raises an exception
instead of blocking when a result is not yet ready; the user is
expected to use callbacks (or <code class="docutils literal notranslate"><span class="pre">await/yield</span> <span class="pre">from</span></code>) to wait for the result.</p>
<p>All event loop methods specified as returning a coroutine are allowed
to return either a Future or a coroutine, at the implementation’s
choice (the standard implementation always returns coroutines).  All
event loop methods documented as accepting coroutine arguments <em>must</em>
accept both Futures and coroutines for such arguments.  (A convenience
function, <code class="docutils literal notranslate"><span class="pre">ensure_future()</span></code>, exists to convert an argument that is either a
coroutine or a Future into a Future.)</p>
<p>For users (like myself) who don’t like using callbacks, a scheduler is
provided for writing asynchronous I/O code as coroutines using the <a class="reference external" href="pep-0380.html">PEP
380</a> <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code> or <a class="reference external" href="pep-0492.html">PEP 492</a> <code class="docutils literal notranslate"><span class="pre">await</span></code> expressions.
The scheduler is not pluggable;
pluggability occurs at the event loop level, and the standard
scheduler implementation should work with any conforming event loop
implementation.  (In fact this is an important litmus test for
conforming implementations.)</p>
<p>For interoperability between code written using coroutines and other
async frameworks, the scheduler defines a Task class that behaves like a
Future.  A framework that interoperates at the event loop level can
wait for a Future to complete by adding a callback to the Future.
Likewise, the scheduler offers an operation to suspend a coroutine
until a callback is called.</p>
<p>If such a framework cannot use the Future and Task classes as-is, it
may reimplement the <code class="docutils literal notranslate"><span class="pre">loop.create_future()</span></code> and
<code class="docutils literal notranslate"><span class="pre">loop.create_task()</span></code> methods.  These should return objects
implementing (a superset of) the Future/Task interfaces.</p>
<p>A less ambitious framework may just call the
<code class="docutils literal notranslate"><span class="pre">loop.set_task_factory()</span></code> to replace the Task class without
implementing its own event loop.</p>
<p>The event loop API provides limited interoperability with threads:
there is an API to submit a function to an executor (see <a class="reference external" href="pep-3148.html">PEP 3148</a>)
which returns a Future that is compatible with the event loop, and
there is a method to schedule a callback with an event loop from
another thread in a thread-safe manner.</p>
</section>
<section id="transports-and-protocols">
<h3><a class="toc-backref" href="#id7">Transports and Protocols</a><a class="headerlink" href="#transports-and-protocols" title="Permalink to this headline">¶</a></h3>
<p>For those not familiar with Twisted, a quick explanation of the
relationship between transports and protocols is in order.  At the
highest level, the transport is concerned with <em>how</em> bytes are
transmitted, while the protocol determines <em>which</em> bytes to transmit
(and to some extent when).</p>
<p>A different way of saying the same thing: a transport is an
abstraction for a socket (or similar I/O endpoint) while a protocol is
an abstraction for an application, from the transport’s point of view.</p>
<p>Yet another view is simply that the transport and protocol interfaces
<em>together</em> define an abstract interface for using network I/O and
interprocess I/O.</p>
<p>There is almost always a 1:1 relationship between transport and
protocol objects: the protocol calls transport methods to send data,
while the transport calls protocol methods to pass it data that has
been received.  Neither transport nor protocol methods “block” – they
set events into motion and then return.</p>
<p>The most common type of transport is a bidirectional stream transport.
It represents a pair of buffered streams (one in each direction) that
each transmit a sequence of bytes.  The most common example of a
bidirectional stream transport is probably a TCP connection.  Another
common example is an SSL/TLS connection.  But there are some other things
that can be viewed this way, for example an SSH session or a pair of
UNIX pipes.  Typically there aren’t many different transport
implementations, and most of them come with the event loop
implementation.  However, there is no requirement that all transports
must be created by calling an event loop method: a third party module
may well implement a new transport and provide a constructor or
factory function for it that simply takes an event loop as an argument
or calls <code class="docutils literal notranslate"><span class="pre">get_event_loop()</span></code>.</p>
<p>Note that transports don’t need to use sockets, not even if they use
TCP – sockets are a platform-specific implementation detail.</p>
<p>A bidirectional stream transport has two “ends”: one end talks to
the network (or another process, or whatever low-level interface it
wraps), and the other end talks to the protocol.  The former uses
whatever API is necessary to implement the transport; but the
interface between transport and protocol is standardized by this PEP.</p>
<p>A protocol can represent some kind of “application-level” protocol
such as HTTP or SMTP; it can also implement an abstraction shared by
multiple protocols, or a whole application.  A protocol’s primary
interface is with the transport.  While some popular protocols (and
other abstractions) may have standard implementations, often
applications implement custom protocols.  It also makes sense to have
libraries of useful third party protocol implementations that can be
downloaded and installed from PyPI.</p>
<p>There general notion of transport and protocol includes other
interfaces, where the transport wraps some other communication
abstraction.  Examples include interfaces for sending and receiving
datagrams (e.g. UDP), or a subprocess manager.  The separation of
concerns is the same as for bidirectional stream transports and
protocols, but the specific interface between transport and protocol
is different in each case.</p>
<p>Details of the interfaces defined by the various standard types of
transports and protocols are given later.</p>
</section>
</section>
<section id="event-loop-interface-specification">
<h2><a class="toc-backref" href="#id8">Event Loop Interface Specification</a><a class="headerlink" href="#event-loop-interface-specification" title="Permalink to this headline">¶</a></h2>
<section id="event-loop-policy-getting-and-setting-the-current-event-loop">
<h3><a class="toc-backref" href="#id9">Event Loop Policy: Getting and Setting the Current Event Loop</a><a class="headerlink" href="#event-loop-policy-getting-and-setting-the-current-event-loop" title="Permalink to this headline">¶</a></h3>
<p>Event loop management is controlled by an event loop policy, which is
a global (per-process) object.  There is a default policy, and an API
to change the policy.  A policy defines the notion of context; a
policy manages a separate event loop per context.  The default
policy’s notion of context is defined as the current thread.</p>
<p>Certain platforms or programming frameworks may change the default
policy to something more suitable to the expectations of the users of
that platform or framework.  Such platforms or frameworks must
document their policy and at what point during their initialization
sequence the policy is set, in order to avoid undefined behavior when
multiple active frameworks want to override the default policy.
(See also “Embedded Event Loops” below.)</p>
<p>To get the event loop for current context, use <code class="docutils literal notranslate"><span class="pre">get_event_loop()</span></code>.
This returns an event loop object implementing the interface specified
below, or raises an exception in case no event loop has been set for
the current context and the current policy does not specify to create
one.  It should never return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>To set the event loop for the current context, use
<code class="docutils literal notranslate"><span class="pre">set_event_loop(event_loop)</span></code>, where <code class="docutils literal notranslate"><span class="pre">event_loop</span></code> is an event loop
object, i.e. an instance of <code class="docutils literal notranslate"><span class="pre">AbstractEventLoop</span></code>, or <code class="docutils literal notranslate"><span class="pre">None</span></code>.
It is okay to set the current event loop to <code class="docutils literal notranslate"><span class="pre">None</span></code>, in
which case subsequent calls to <code class="docutils literal notranslate"><span class="pre">get_event_loop()</span></code> will raise an
exception.  This is useful for testing code that should not depend on
the existence of a default event loop.</p>
<p>It is expected that <code class="docutils literal notranslate"><span class="pre">get_event_loop()</span></code> returns a different event
loop object depending on the context (in fact, this is the definition
of context).  It may create a new event loop object if none is set and
creation is allowed by the policy.  The default policy will create a
new event loop only in the main thread (as defined by threading.py,
which uses a special subclass for the main thread), and only if
<code class="docutils literal notranslate"><span class="pre">get_event_loop()</span></code> is called before <code class="docutils literal notranslate"><span class="pre">set_event_loop()</span></code> is ever
called.  (To reset this state, reset the policy.)  In other threads an
event loop must be explicitly set.  Other policies may behave
differently.  Event loop by the default policy creation is lazy;
i.e. the first call to <code class="docutils literal notranslate"><span class="pre">get_event_loop()</span></code> creates an event loop
instance if necessary and specified by the current policy.</p>
<p>For the benefit of unit tests and other special cases there’s a third
policy function: <code class="docutils literal notranslate"><span class="pre">new_event_loop()</span></code>, which creates and returns a new
event loop object according to the policy’s default rules.  To make
this the current event loop, you must call <code class="docutils literal notranslate"><span class="pre">set_event_loop()</span></code> with
it.</p>
<p>To change the event loop policy, call
<code class="docutils literal notranslate"><span class="pre">set_event_loop_policy(policy)</span></code>, where <code class="docutils literal notranslate"><span class="pre">policy</span></code> is an event loop
policy object or <code class="docutils literal notranslate"><span class="pre">None</span></code>.  If not <code class="docutils literal notranslate"><span class="pre">None</span></code>, the policy object must be
an instance of <code class="docutils literal notranslate"><span class="pre">AbstractEventLoopPolicy</span></code> that defines methods
<code class="docutils literal notranslate"><span class="pre">get_event_loop()</span></code>, <code class="docutils literal notranslate"><span class="pre">set_event_loop(loop)</span></code> and
<code class="docutils literal notranslate"><span class="pre">new_event_loop()</span></code>, all behaving like the functions described above.</p>
<p>Passing a policy value of <code class="docutils literal notranslate"><span class="pre">None</span></code> restores the default event loop
policy (overriding the alternate default set by the platform or
framework).  The default event loop policy is an instance of the class
<code class="docutils literal notranslate"><span class="pre">DefaultEventLoopPolicy</span></code>.  The current event loop policy object can
be retrieved by calling <code class="docutils literal notranslate"><span class="pre">get_event_loop_policy()</span></code>.</p>
<p>TBD: describe child watchers and UNIX quirks for subprocess processing.</p>
<section id="passing-an-event-loop-around-explicitly">
<h4><a class="toc-backref" href="#id10">Passing an Event Loop Around Explicitly</a><a class="headerlink" href="#passing-an-event-loop-around-explicitly" title="Permalink to this headline">¶</a></h4>
<p>It is possible to write code that uses an event loop without relying
on a global or per-thread default event loop.  For this purpose, all
APIs that need access to the current event loop (and aren’t methods on
an event class) take an optional keyword argument named <code class="docutils literal notranslate"><span class="pre">loop</span></code>.  If
this argument is <code class="docutils literal notranslate"><span class="pre">None</span></code> or unspecified, such APIs will call
<code class="docutils literal notranslate"><span class="pre">get_event_loop()</span></code> to get the default event loop, but if the
<code class="docutils literal notranslate"><span class="pre">loop</span></code> keyword argument is set to an event loop object, they will
use that event loop, and pass it along to any other such APIs they
call.  For example, <code class="docutils literal notranslate"><span class="pre">Future(loop=my_loop)</span></code> will create a Future tied
to the event loop <code class="docutils literal notranslate"><span class="pre">my_loop</span></code>.  When the default current event is
<code class="docutils literal notranslate"><span class="pre">None</span></code>, the <code class="docutils literal notranslate"><span class="pre">loop</span></code> keyword argument is effectively mandatory.</p>
<p>Note that an explicitly passed event loop must still belong to the
current thread; the <code class="docutils literal notranslate"><span class="pre">loop</span></code> keyword argument does not magically
change the constraints on how an event loop can be used.</p>
</section>
</section>
<section id="specifying-times">
<h3><a class="toc-backref" href="#id11">Specifying Times</a><a class="headerlink" href="#specifying-times" title="Permalink to this headline">¶</a></h3>
<p>As usual in Python, all timeouts, intervals and delays are measured in
seconds, and may be ints or floats.  However, absolute times are not
specified as POSIX timestamps.  The accuracy, precision and epoch of
the clock are up to the implementation.</p>
<p>The default implementation uses <code class="docutils literal notranslate"><span class="pre">time.monotonic()</span></code>.  Books could be
written about the implications of this choice.  Better read the docs
for the standard library <code class="docutils literal notranslate"><span class="pre">time</span></code> module.</p>
</section>
<section id="embedded-event-loops">
<h3><a class="toc-backref" href="#id12">Embedded Event Loops</a><a class="headerlink" href="#embedded-event-loops" title="Permalink to this headline">¶</a></h3>
<p>On some platforms an event loop is provided by the system.  Such a
loop may already be running when the user code starts, and there may
be no way to stop or close it without exiting from the program.  In
this case, the methods for starting, stopping and closing the event
loop may not be implementable, and <code class="docutils literal notranslate"><span class="pre">is_running()</span></code> may always return
<code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</section>
<section id="event-loop-classes">
<h3><a class="toc-backref" href="#id13">Event Loop Classes</a><a class="headerlink" href="#event-loop-classes" title="Permalink to this headline">¶</a></h3>
<p>There is no actual class named <code class="docutils literal notranslate"><span class="pre">EventLoop</span></code>.  There is an
<code class="docutils literal notranslate"><span class="pre">AbstractEventLoop</span></code> class which defines all the methods without
implementations, and serves primarily as documentation.  The following
concrete classes are defined:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SelectorEventLoop</span></code> is a concrete implementation of the full API
based on the <code class="docutils literal notranslate"><span class="pre">selectors</span></code> module (new in Python 3.4).  The
constructor takes one optional argument, a <code class="docutils literal notranslate"><span class="pre">selectors.Selector</span></code>
object.  By default an instance of <code class="docutils literal notranslate"><span class="pre">selectors.DefaultSelector</span></code> is
created and used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ProactorEventLoop</span></code> is a concrete implementation of the API except
for the I/O event handling and signal handling methods.  It is only
defined on Windows (or on other platforms which support a similar
API for “overlapped I/O”).  The constructor takes one optional
argument, a <code class="docutils literal notranslate"><span class="pre">Proactor</span></code> object.  By default an instance of
<code class="docutils literal notranslate"><span class="pre">IocpProactor</span></code> is created and used.  (The <code class="docutils literal notranslate"><span class="pre">IocpProactor</span></code> class
is not specified by this PEP; it is just an implementation
detail of the <code class="docutils literal notranslate"><span class="pre">ProactorEventLoop</span></code> class.)</p></li>
</ul>
</section>
<section id="event-loop-methods-overview">
<h3><a class="toc-backref" href="#id14">Event Loop Methods Overview</a><a class="headerlink" href="#event-loop-methods-overview" title="Permalink to this headline">¶</a></h3>
<p>The methods of a conforming event loop are grouped into several
categories.  The first set of categories must be supported by all
conforming event loop implementations, with the exception that
embedded event loops may not implement the methods for starting,
stopping and closing.  (However, a partially-conforming event loop is
still better than nothing. :-)</p>
<ul class="simple">
<li><p>Starting, stopping and closing: <code class="docutils literal notranslate"><span class="pre">run_forever()</span></code>,
<code class="docutils literal notranslate"><span class="pre">run_until_complete()</span></code>, <code class="docutils literal notranslate"><span class="pre">stop()</span></code>, <code class="docutils literal notranslate"><span class="pre">is_running()</span></code>, <code class="docutils literal notranslate"><span class="pre">close()</span></code>,
<code class="docutils literal notranslate"><span class="pre">is_closed()</span></code>.</p></li>
<li><p>Basic and timed callbacks: <code class="docutils literal notranslate"><span class="pre">call_soon()</span></code>, <code class="docutils literal notranslate"><span class="pre">call_later()</span></code>,
<code class="docutils literal notranslate"><span class="pre">call_at()</span></code>, <code class="docutils literal notranslate"><span class="pre">time()</span></code>.</p></li>
<li><p>Thread interaction: <code class="docutils literal notranslate"><span class="pre">call_soon_threadsafe()</span></code>,
<code class="docutils literal notranslate"><span class="pre">run_in_executor()</span></code>, <code class="docutils literal notranslate"><span class="pre">set_default_executor()</span></code>.</p></li>
<li><p>Internet name lookups: <code class="docutils literal notranslate"><span class="pre">getaddrinfo()</span></code>, <code class="docutils literal notranslate"><span class="pre">getnameinfo()</span></code>.</p></li>
<li><p>Internet connections: <code class="docutils literal notranslate"><span class="pre">create_connection()</span></code>, <code class="docutils literal notranslate"><span class="pre">create_server()</span></code>,
<code class="docutils literal notranslate"><span class="pre">create_datagram_endpoint()</span></code>.</p></li>
<li><p>Wrapped socket methods: <code class="docutils literal notranslate"><span class="pre">sock_recv()</span></code>, <code class="docutils literal notranslate"><span class="pre">sock_sendall()</span></code>,
<code class="docutils literal notranslate"><span class="pre">sock_connect()</span></code>, <code class="docutils literal notranslate"><span class="pre">sock_accept()</span></code>.</p></li>
<li><p>Tasks and futures support: <code class="docutils literal notranslate"><span class="pre">create_future()</span></code>, <code class="docutils literal notranslate"><span class="pre">create_task()</span></code>,
<code class="docutils literal notranslate"><span class="pre">set_task_factory()</span></code>, <code class="docutils literal notranslate"><span class="pre">get_task_factory()</span></code>.</p></li>
<li><p>Error handling: <code class="docutils literal notranslate"><span class="pre">get_exception_handler()</span></code>, <code class="docutils literal notranslate"><span class="pre">set_exception_handler()</span></code>,
<code class="docutils literal notranslate"><span class="pre">default_exception_handler()</span></code>, <code class="docutils literal notranslate"><span class="pre">call_exception_handler()</span></code>.</p></li>
<li><p>Debug mode: <code class="docutils literal notranslate"><span class="pre">get_debug()</span></code>, <code class="docutils literal notranslate"><span class="pre">set_debug()</span></code>.</p></li>
</ul>
<p>The second set of categories <em>may</em> be supported by conforming event
loop implementations.  If not supported, they will raise
<code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code>.  (In the default implementation,
<code class="docutils literal notranslate"><span class="pre">SelectorEventLoop</span></code> on UNIX systems supports all of these;
<code class="docutils literal notranslate"><span class="pre">SelectorEventLoop</span></code> on Windows supports the I/O event handling
category; <code class="docutils literal notranslate"><span class="pre">ProactorEventLoop</span></code> on Windows supports the pipes and
subprocess category.)</p>
<ul class="simple">
<li><p>I/O callbacks: <code class="docutils literal notranslate"><span class="pre">add_reader()</span></code>, <code class="docutils literal notranslate"><span class="pre">remove_reader()</span></code>,
<code class="docutils literal notranslate"><span class="pre">add_writer()</span></code>, <code class="docutils literal notranslate"><span class="pre">remove_writer()</span></code>.</p></li>
<li><p>Pipes and subprocesses: <code class="docutils literal notranslate"><span class="pre">connect_read_pipe()</span></code>,
<code class="docutils literal notranslate"><span class="pre">connect_write_pipe()</span></code>, <code class="docutils literal notranslate"><span class="pre">subprocess_shell()</span></code>,
<code class="docutils literal notranslate"><span class="pre">subprocess_exec()</span></code>.</p></li>
<li><p>Signal callbacks: <code class="docutils literal notranslate"><span class="pre">add_signal_handler()</span></code>,
<code class="docutils literal notranslate"><span class="pre">remove_signal_handler()</span></code>.</p></li>
</ul>
</section>
<section id="event-loop-methods">
<h3><a class="toc-backref" href="#id15">Event Loop Methods</a><a class="headerlink" href="#event-loop-methods" title="Permalink to this headline">¶</a></h3>
<section id="starting-stopping-and-closing">
<h4><a class="toc-backref" href="#id16">Starting, Stopping and Closing</a><a class="headerlink" href="#starting-stopping-and-closing" title="Permalink to this headline">¶</a></h4>
<p>An (unclosed) event loop can be in one of two states: running or
stopped.  These methods deal with starting and stopping an event loop:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">run_forever()</span></code>.  Runs the event loop until <code class="docutils literal notranslate"><span class="pre">stop()</span></code> is called.
This cannot be called when the event loop is already running.  (This
has a long name in part to avoid confusion with earlier versions of
this PEP, where <code class="docutils literal notranslate"><span class="pre">run()</span></code> had different behavior, in part because
there are already too many APIs that have a method named <code class="docutils literal notranslate"><span class="pre">run()</span></code>,
and in part because there shouldn’t be many places where this is
called anyway.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">run_until_complete(future)</span></code>.  Runs the event loop until the
Future is done.  If the Future is done, its result is returned, or
its exception is raised.  This cannot be called when the event loop
is already running.
The method creates a new <code class="docutils literal notranslate"><span class="pre">Task</span></code> object if the
parameter is a coroutine.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stop()</span></code>.  Stops the event loop as soon as it is convenient.  It
is fine to restart the loop with <code class="docutils literal notranslate"><span class="pre">run_forever()</span></code> or
<code class="docutils literal notranslate"><span class="pre">run_until_complete()</span></code> subsequently; no scheduled callbacks will
be lost if this is done.  Note: <code class="docutils literal notranslate"><span class="pre">stop()</span></code> returns normally and the
current callback is allowed to continue.  How soon after this point
the event loop stops is up to the implementation, but the intention
is to stop short of polling for I/O, and not to run any callbacks
scheduled in the future; the major freedom an implementation has is
how much of the “ready queue” (callbacks already scheduled with
<code class="docutils literal notranslate"><span class="pre">call_soon()</span></code>) it processes before stopping.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_running()</span></code>.  Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if the event loop is currently
running, <code class="docutils literal notranslate"><span class="pre">False</span></code> if it is stopped.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">close()</span></code>.  Closes the event loop, releasing any resources it may
hold, such as the file descriptor used by <code class="docutils literal notranslate"><span class="pre">epoll()</span></code> or
<code class="docutils literal notranslate"><span class="pre">kqueue()</span></code>, and the default executor.  This should not be called
while the event loop is running.  After it has been called the event
loop should not be used again.  It may be called multiple times;
subsequent calls are no-ops.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_closed()</span></code>.  Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if the event loop is closed,
<code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.  (Primarily intended for error reporting;
please don’t implement functionality based on this method.)</p></li>
</ul>
</section>
<section id="basic-callbacks">
<h4><a class="toc-backref" href="#id17">Basic Callbacks</a><a class="headerlink" href="#basic-callbacks" title="Permalink to this headline">¶</a></h4>
<p>Callbacks associated with the same event loop are strictly serialized:
one callback must finish before the next one will be called.  This is
an important guarantee: when two or more callbacks use or modify
shared state, each callback is guaranteed that while it is running, the
shared state isn’t changed by another callback.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">call_soon(callback,</span> <span class="pre">*args)</span></code>.  This schedules a callback to be
called as soon as possible.  Returns a <code class="docutils literal notranslate"><span class="pre">Handle</span></code> (see below)
representing the callback, whose <code class="docutils literal notranslate"><span class="pre">cancel()</span></code> method can be used to
cancel the callback.  It guarantees that callbacks are called in the
order in which they were scheduled.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">call_later(delay,</span> <span class="pre">callback,</span> <span class="pre">*args)</span></code>.  Arrange for
<code class="docutils literal notranslate"><span class="pre">callback(*args)</span></code> to be called approximately <code class="docutils literal notranslate"><span class="pre">delay</span></code> seconds in
the future, once, unless cancelled.  Returns a <code class="docutils literal notranslate"><span class="pre">Handle</span></code> representing
the callback, whose <code class="docutils literal notranslate"><span class="pre">cancel()</span></code> method can be used to cancel the
callback.  Callbacks scheduled in the past or at exactly the same
time will be called in an undefined order.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">call_at(when,</span> <span class="pre">callback,</span> <span class="pre">*args)</span></code>.  This is like <code class="docutils literal notranslate"><span class="pre">call_later()</span></code>,
but the time is expressed as an absolute time.  Returns a similar
<code class="docutils literal notranslate"><span class="pre">Handle</span></code>.  There is a simple equivalency: <code class="docutils literal notranslate"><span class="pre">loop.call_later(delay,</span>
<span class="pre">callback,</span> <span class="pre">*args)</span></code> is the same as <code class="docutils literal notranslate"><span class="pre">loop.call_at(loop.time()</span> <span class="pre">+</span>
<span class="pre">delay,</span> <span class="pre">callback,</span> <span class="pre">*args)</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">time()</span></code>.  Returns the current time according to the event loop’s
clock.  This may be <code class="docutils literal notranslate"><span class="pre">time.time()</span></code> or <code class="docutils literal notranslate"><span class="pre">time.monotonic()</span></code> or some
other system-specific clock, but it must return a float expressing
the time in units of approximately one second since some epoch.
(No clock is perfect – see <a class="reference external" href="pep-0418.html">PEP 418</a>.)</p></li>
</ul>
<p>Note: A previous version of this PEP defined a method named
<code class="docutils literal notranslate"><span class="pre">call_repeatedly()</span></code>, which promised to call a callback at regular
intervals.  This has been withdrawn because the design of such a
function is overspecified.  On the one hand, a simple timer loop can
easily be emulated using a callback that reschedules itself using
<code class="docutils literal notranslate"><span class="pre">call_later()</span></code>; it is also easy to write coroutine containing a loop
and a <code class="docutils literal notranslate"><span class="pre">sleep()</span></code> call (a toplevel function in the module, see below).
On the other hand, due to the complexities of accurate timekeeping
there are many traps and pitfalls here for the unaware (see <a class="reference external" href="pep-0418.html">PEP 418</a>),
and different use cases require different behavior in edge cases.  It
is impossible to offer an API for this purpose that is bullet-proof in
all cases, so it is deemed better to let application designers decide
for themselves what kind of timer loop to implement.</p>
</section>
<section id="thread-interaction">
<h4><a class="toc-backref" href="#id18">Thread interaction</a><a class="headerlink" href="#thread-interaction" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">call_soon_threadsafe(callback,</span> <span class="pre">*args)</span></code>.  Like
<code class="docutils literal notranslate"><span class="pre">call_soon(callback,</span> <span class="pre">*args)</span></code>, but when called from another thread
while the event loop is blocked waiting for I/O, unblocks the event
loop.  Returns a <code class="docutils literal notranslate"><span class="pre">Handle</span></code>.  This is the <em>only</em> method that is safe
to call from another thread.  (To schedule a callback for a later
time in a threadsafe manner, you can use
<code class="docutils literal notranslate"><span class="pre">loop.call_soon_threadsafe(loop.call_later,</span> <span class="pre">when,</span> <span class="pre">callback,</span>
<span class="pre">*args)</span></code>.)  Note: this is not safe to call from a signal handler
(since it may use locks).  In fact, no API is signal-safe; if you
want to handle signals, use <code class="docutils literal notranslate"><span class="pre">add_signal_handler()</span></code> described
below.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">run_in_executor(executor,</span> <span class="pre">callback,</span> <span class="pre">*args)</span></code>.  Arrange to call
<code class="docutils literal notranslate"><span class="pre">callback(*args)</span></code> in an executor (see <a class="reference external" href="pep-3148.html">PEP 3148</a>).  Returns an
<code class="docutils literal notranslate"><span class="pre">asyncio.Future</span></code> instance whose result on success is the return
value of that call.  This is equivalent to
<code class="docutils literal notranslate"><span class="pre">wrap_future(executor.submit(callback,</span> <span class="pre">*args))</span></code>.  If <code class="docutils literal notranslate"><span class="pre">executor</span></code>
is <code class="docutils literal notranslate"><span class="pre">None</span></code>, the default executor set by <code class="docutils literal notranslate"><span class="pre">set_default_executor()</span></code>
is used.  If no default executor has been set yet, a
<code class="docutils literal notranslate"><span class="pre">ThreadPoolExecutor</span></code> with a default number of threads is created
and set as the default executor.  (The default implementation uses
5 threads in this case.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set_default_executor(executor)</span></code>.  Set the default executor used
by <code class="docutils literal notranslate"><span class="pre">run_in_executor()</span></code>.  The argument must be a <a class="reference external" href="pep-3148.html">PEP 3148</a>
<code class="docutils literal notranslate"><span class="pre">Executor</span></code> instance or <code class="docutils literal notranslate"><span class="pre">None</span></code>, in order to reset the default
executor.</p></li>
</ul>
<p>See also the <code class="docutils literal notranslate"><span class="pre">wrap_future()</span></code> function described in the section about
Futures.</p>
</section>
<section id="internet-name-lookups">
<h4><a class="toc-backref" href="#id19">Internet name lookups</a><a class="headerlink" href="#internet-name-lookups" title="Permalink to this headline">¶</a></h4>
<p>These methods are useful if you want to connect or bind a socket to an
address without the risk of blocking for the name lookup.  They are
usually called implicitly by <code class="docutils literal notranslate"><span class="pre">create_connection()</span></code>,
<code class="docutils literal notranslate"><span class="pre">create_server()</span></code> or <code class="docutils literal notranslate"><span class="pre">create_datagram_endpoint()</span></code>.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">getaddrinfo(host,</span> <span class="pre">port,</span> <span class="pre">family=0,</span> <span class="pre">type=0,</span> <span class="pre">proto=0,</span> <span class="pre">flags=0)</span></code>.
Similar to the <code class="docutils literal notranslate"><span class="pre">socket.getaddrinfo()</span></code> function but returns a
Future.  The Future’s result on success will be a list of the same
format as returned by <code class="docutils literal notranslate"><span class="pre">socket.getaddrinfo()</span></code>, i.e. a list of
<code class="docutils literal notranslate"><span class="pre">(address_family,</span> <span class="pre">socket_type,</span> <span class="pre">socket_protocol,</span> <span class="pre">canonical_name,</span>
<span class="pre">address)</span></code> where <code class="docutils literal notranslate"><span class="pre">address</span></code> is a 2-tuple <code class="docutils literal notranslate"><span class="pre">(ipv4_address,</span> <span class="pre">port)</span></code>
for IPv4 addresses and a 4-tuple <code class="docutils literal notranslate"><span class="pre">(ipv4_address,</span> <span class="pre">port,</span> <span class="pre">flow_info,</span>
<span class="pre">scope_id)</span></code> for IPv6 addresses.  If the <code class="docutils literal notranslate"><span class="pre">family</span></code> argument is zero
or unspecified, the list returned may contain a mixture of IPv4 and
IPv6 addresses; otherwise the addresses returned are constrained by
the <code class="docutils literal notranslate"><span class="pre">family</span></code> value (similar for <code class="docutils literal notranslate"><span class="pre">proto</span></code> and <code class="docutils literal notranslate"><span class="pre">flags</span></code>).  The
default implementation calls <code class="docutils literal notranslate"><span class="pre">socket.getaddrinfo()</span></code> using
<code class="docutils literal notranslate"><span class="pre">run_in_executor()</span></code>, but other implementations may choose to
implement their own DNS lookup.  The optional arguments <em>must</em> be
specified as keyword arguments.</p>
<p>Note: implementations are allowed to implement a subset of the full
socket.getaddrinfo() interface; e.g. they may not support symbolic
port names, or they may ignore or incompletely implement the
<code class="docutils literal notranslate"><span class="pre">type</span></code>, <code class="docutils literal notranslate"><span class="pre">proto</span></code> and <code class="docutils literal notranslate"><span class="pre">flags</span></code> arguments.  However, if <code class="docutils literal notranslate"><span class="pre">type</span></code>
and <code class="docutils literal notranslate"><span class="pre">proto</span></code> are ignored, the argument values passed in should be
copied unchanged into the return tuples’ <code class="docutils literal notranslate"><span class="pre">socket_type</span></code> and
<code class="docutils literal notranslate"><span class="pre">socket_protocol</span></code> elements.  (You can’t ignore <code class="docutils literal notranslate"><span class="pre">family</span></code>, since
IPv4 and IPv6 addresses must be looked up differently.  The only
permissible values for <code class="docutils literal notranslate"><span class="pre">family</span></code> are <code class="docutils literal notranslate"><span class="pre">socket.AF_UNSPEC</span></code> (<code class="docutils literal notranslate"><span class="pre">0</span></code>),
<code class="docutils literal notranslate"><span class="pre">socket.AF_INET</span></code> and <code class="docutils literal notranslate"><span class="pre">socket.AF_INET6</span></code>, and the latter only if
it is defined by the platform.)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">getnameinfo(sockaddr,</span> <span class="pre">flags=0)</span></code>.  Similar to
<code class="docutils literal notranslate"><span class="pre">socket.getnameinfo()</span></code> but returns a Future.  The Future’s result
on success will be a tuple <code class="docutils literal notranslate"><span class="pre">(host,</span> <span class="pre">port)</span></code>.  Same implementation
remarks as for <code class="docutils literal notranslate"><span class="pre">getaddrinfo()</span></code>.</p></li>
</ul>
</section>
<section id="internet-connections">
<h4><a class="toc-backref" href="#id20">Internet connections</a><a class="headerlink" href="#internet-connections" title="Permalink to this headline">¶</a></h4>
<p>These are the high-level interfaces for managing internet connections.
Their use is recommended over the corresponding lower-level interfaces
because they abstract away the differences between selector-based
and proactor-based event loops.</p>
<p>Note that the client and server side of stream connections use the
same transport and protocol interface.  However, datagram endpoints
use a different transport and protocol interface.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">create_connection(protocol_factory,</span> <span class="pre">host,</span> <span class="pre">port,</span> <span class="pre">&lt;options&gt;)</span></code>.
Creates a stream connection to a given internet host and port.  This
is a task that is typically called from the client side of the
connection.  It creates an implementation-dependent bidirectional
stream Transport to represent the connection, then calls
<code class="docutils literal notranslate"><span class="pre">protocol_factory()</span></code> to instantiate (or retrieve) the user’s
Protocol implementation, and finally ties the two together.  (See
below for the definitions of Transport and Protocol.)  The user’s
Protocol implementation is created or retrieved by calling
<code class="docutils literal notranslate"><span class="pre">protocol_factory()</span></code> without arguments(*).  The coroutine’s result
on success is the <code class="docutils literal notranslate"><span class="pre">(transport,</span> <span class="pre">protocol)</span></code> pair; if a failure
prevents the creation of a successful connection, an appropriate
exception will be raised.  Note that when the coroutine completes,
the protocol’s <code class="docutils literal notranslate"><span class="pre">connection_made()</span></code> method has not yet been called;
that will happen when the connection handshake is complete.</p>
<p>(*) There is no requirement that <code class="docutils literal notranslate"><span class="pre">protocol_factory</span></code> is a class.
If your protocol class needs to have specific arguments passed to
its constructor, you can use <code class="docutils literal notranslate"><span class="pre">lambda</span></code>.
You can also pass a trivial <code class="docutils literal notranslate"><span class="pre">lambda</span></code> that returns a previously
constructed Protocol instance.</p>
<p>The &lt;options&gt; are all specified using optional keyword arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ssl</span></code>: Pass <code class="docutils literal notranslate"><span class="pre">True</span></code> to create an SSL/TLS transport (by default
a plain TCP transport is created).  Or pass an <code class="docutils literal notranslate"><span class="pre">ssl.SSLContext</span></code>
object to override the default SSL context object to be used.  If
a default context is created it is up to the implementation to
configure reasonable defaults.  The reference implementation
currently uses <code class="docutils literal notranslate"><span class="pre">PROTOCOL_SSLv23</span></code> and sets the <code class="docutils literal notranslate"><span class="pre">OP_NO_SSLv2</span></code>
option, calls <code class="docutils literal notranslate"><span class="pre">set_default_verify_paths()</span></code> and sets <code class="docutils literal notranslate"><span class="pre">verify_mode</span></code>
to <code class="docutils literal notranslate"><span class="pre">CERT_REQUIRED</span></code>.  In addition, whenever the context (default
or otherwise) specifies a <code class="docutils literal notranslate"><span class="pre">verify_mode</span></code> of <code class="docutils literal notranslate"><span class="pre">CERT_REQUIRED</span></code> or
<code class="docutils literal notranslate"><span class="pre">CERT_OPTIONAL</span></code>, if a hostname is given, immediately after a
successful handshake <code class="docutils literal notranslate"><span class="pre">ssl.match_hostname(peercert,</span> <span class="pre">hostname)</span></code> is
called, and if this raises an exception the connection is closed.
(To avoid this behavior, pass in an SSL context that has
<code class="docutils literal notranslate"><span class="pre">verify_mode</span></code> set to <code class="docutils literal notranslate"><span class="pre">CERT_NONE</span></code>.  But this means you are not
secure, and vulnerable to for example man-in-the-middle attacks.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">family</span></code>, <code class="docutils literal notranslate"><span class="pre">proto</span></code>, <code class="docutils literal notranslate"><span class="pre">flags</span></code>: Address family, protocol and
flags to be passed through to <code class="docutils literal notranslate"><span class="pre">getaddrinfo()</span></code>.  These all
default to <code class="docutils literal notranslate"><span class="pre">0</span></code>, which means “not specified”.  (The socket type
is always <code class="docutils literal notranslate"><span class="pre">SOCK_STREAM</span></code>.)  If any of these values are not
specified, the <code class="docutils literal notranslate"><span class="pre">getaddrinfo()</span></code> method will choose appropriate
values.  Note: <code class="docutils literal notranslate"><span class="pre">proto</span></code> has nothing to do with the high-level
Protocol concept or the <code class="docutils literal notranslate"><span class="pre">protocol_factory</span></code> argument.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sock</span></code>: An optional socket to be used instead of using the
<code class="docutils literal notranslate"><span class="pre">host</span></code>, <code class="docutils literal notranslate"><span class="pre">port</span></code>, <code class="docutils literal notranslate"><span class="pre">family</span></code>, <code class="docutils literal notranslate"><span class="pre">proto</span></code> and <code class="docutils literal notranslate"><span class="pre">flags</span></code>
arguments.  If this is given, <code class="docutils literal notranslate"><span class="pre">host</span></code> and <code class="docutils literal notranslate"><span class="pre">port</span></code> must be
explicitly set to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">local_addr</span></code>: If given, a <code class="docutils literal notranslate"><span class="pre">(host,</span> <span class="pre">port)</span></code> tuple used to bind
the socket to locally.  This is rarely needed but on multi-homed
servers you occasionally need to force a connection to come from a
specific address.  This is how you would do that.  The host and
port are looked up using <code class="docutils literal notranslate"><span class="pre">getaddrinfo()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">server_hostname</span></code>: This is only relevant when using SSL/TLS; it
should not be used when <code class="docutils literal notranslate"><span class="pre">ssl</span></code> is not set.  When <code class="docutils literal notranslate"><span class="pre">ssl</span></code> is set,
this sets or overrides the hostname that will be verified.  By
default the value of the <code class="docutils literal notranslate"><span class="pre">host</span></code> argument is used.  If <code class="docutils literal notranslate"><span class="pre">host</span></code>
is empty, there is no default and you must pass a value for
<code class="docutils literal notranslate"><span class="pre">server_hostname</span></code>.  To disable hostname verification (which is a
serious security risk) you must pass an empty string here and pass
an <code class="docutils literal notranslate"><span class="pre">ssl.SSLContext</span></code> object whose <code class="docutils literal notranslate"><span class="pre">verify_mode</span></code> is set to
<code class="docutils literal notranslate"><span class="pre">ssl.CERT_NONE</span></code> as the <code class="docutils literal notranslate"><span class="pre">ssl</span></code> argument.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">create_server(protocol_factory,</span> <span class="pre">host,</span> <span class="pre">port,</span> <span class="pre">&lt;options&gt;)</span></code>.
Enters a serving loop that accepts connections.
This is a coroutine that completes once the serving loop is set up
to serve.  The return value is a <code class="docutils literal notranslate"><span class="pre">Server</span></code> object which can be used
to stop the serving loop in a controlled fashion (see below).
Multiple sockets may be bound if the specified address allows
both IPv4 and IPv6 connections.</p>
<p>Each time a connection is accepted,
<code class="docutils literal notranslate"><span class="pre">protocol_factory</span></code> is called without arguments(**) to create a
Protocol, a bidirectional stream Transport is created to represent
the network side of the connection, and the two are tied together by
calling <code class="docutils literal notranslate"><span class="pre">protocol.connection_made(transport)</span></code>.</p>
<p>(**) See previous footnote for <code class="docutils literal notranslate"><span class="pre">create_connection()</span></code>.  However, since
<code class="docutils literal notranslate"><span class="pre">protocol_factory()</span></code> is called once for each new incoming
connection, it should return a new Protocol object each time it is
called.</p>
<p>The &lt;options&gt; are all specified using optional keyword arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ssl</span></code>: Pass an <code class="docutils literal notranslate"><span class="pre">ssl.SSLContext</span></code> object (or an object with the
same interface) to override the default SSL context object to be
used.  (Unlike for <code class="docutils literal notranslate"><span class="pre">create_connection()</span></code>, passing <code class="docutils literal notranslate"><span class="pre">True</span></code> does
not make sense here – the <code class="docutils literal notranslate"><span class="pre">SSLContext</span></code> object is needed to
specify the certificate and key.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">backlog</span></code>: Backlog value to be passed to the <code class="docutils literal notranslate"><span class="pre">listen()</span></code> call.
The default is implementation-dependent; in the default
implementation the default value is <code class="docutils literal notranslate"><span class="pre">100</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reuse_address</span></code>: Whether to set the <code class="docutils literal notranslate"><span class="pre">SO_REUSEADDR</span></code> option on
the socket.  The default is <code class="docutils literal notranslate"><span class="pre">True</span></code> on UNIX, <code class="docutils literal notranslate"><span class="pre">False</span></code> on
Windows.</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">family</span></code>, <code class="docutils literal notranslate"><span class="pre">flags</span></code>: Address family and flags to be passed</dt><dd><p>through to <code class="docutils literal notranslate"><span class="pre">getaddrinfo()</span></code>.  The family defaults to
<code class="docutils literal notranslate"><span class="pre">AF_UNSPEC</span></code>; the flags default to <code class="docutils literal notranslate"><span class="pre">AI_PASSIVE</span></code>.  (The socket
type is always <code class="docutils literal notranslate"><span class="pre">SOCK_STREAM</span></code>; the socket protocol always set to
<code class="docutils literal notranslate"><span class="pre">0</span></code>, to let <code class="docutils literal notranslate"><span class="pre">getaddrinfo()</span></code> choose.)</p>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">sock</span></code>: An optional socket to be used instead of using the
<code class="docutils literal notranslate"><span class="pre">host</span></code>, <code class="docutils literal notranslate"><span class="pre">port</span></code>, <code class="docutils literal notranslate"><span class="pre">family</span></code> and <code class="docutils literal notranslate"><span class="pre">flags</span></code> arguments.  If this
is given, <code class="docutils literal notranslate"><span class="pre">host</span></code> and <code class="docutils literal notranslate"><span class="pre">port</span></code> must be explicitly set to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">create_datagram_endpoint(protocol_factory,</span> <span class="pre">local_addr=None,</span>
<span class="pre">remote_addr=None,</span> <span class="pre">&lt;options&gt;)</span></code>.  Creates an endpoint for sending and
receiving datagrams (typically UDP packets).  Because of the nature
of datagram traffic, there are no separate calls to set up client
and server side, since usually a single endpoint acts as both client
and server.  This is a coroutine that returns a <code class="docutils literal notranslate"><span class="pre">(transport,</span>
<span class="pre">protocol)</span></code> pair on success, or raises an exception on failure.  If
the coroutine returns successfully, the transport will call
callbacks on the protocol whenever a datagram is received or the
socket is closed; it is up to the protocol to call methods on the
protocol to send datagrams.  The transport returned is a
<code class="docutils literal notranslate"><span class="pre">DatagramTransport</span></code>.  The protocol returned is a
<code class="docutils literal notranslate"><span class="pre">DatagramProtocol</span></code>.  These are described later.</p>
<p>Mandatory positional argument:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">protocol_factory</span></code>: A class or factory function that will be
called exactly once, without arguments, to construct the protocol
object to be returned.  The interface between datagram transport
and protocol is described below.</p></li>
</ul>
<p>Optional arguments that may be specified positionally or as keyword
arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">local_addr</span></code>: An optional tuple indicating the address to which
the socket will be bound.  If given this must be a <code class="docutils literal notranslate"><span class="pre">(host,</span>
<span class="pre">port)</span></code> pair.  It will be passed to <code class="docutils literal notranslate"><span class="pre">getaddrinfo()</span></code> to be
resolved and the result will be passed to the <code class="docutils literal notranslate"><span class="pre">bind()</span></code> method of
the socket created.  If <code class="docutils literal notranslate"><span class="pre">getaddrinfo()</span></code> returns more than one
address, they will be tried in turn.  If omitted, no <code class="docutils literal notranslate"><span class="pre">bind()</span></code>
call will be made.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">remote_addr</span></code>: An optional tuple indicating the address to which
the socket will be “connected”.  (Since there is no such thing as
a datagram connection, this just specifies a default value for the
destination address of outgoing datagrams.)  If given this must be
a <code class="docutils literal notranslate"><span class="pre">(host,</span> <span class="pre">port)</span></code> pair.  It will be passed to <code class="docutils literal notranslate"><span class="pre">getaddrinfo()</span></code>
to be resolved and the result will be passed to <code class="docutils literal notranslate"><span class="pre">sock_connect()</span></code>
together with the socket created.  If <code class="docutils literal notranslate"><span class="pre">getaddrinfo()</span></code> returns
more than one address, they will be tried in turn.  If omitted,
no <code class="docutils literal notranslate"><span class="pre">sock_connect()</span></code> call will be made.</p></li>
</ul>
<p>The &lt;options&gt; are all specified using optional keyword arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">family</span></code>, <code class="docutils literal notranslate"><span class="pre">proto</span></code>, <code class="docutils literal notranslate"><span class="pre">flags</span></code>: Address family, protocol and
flags to be passed through to <code class="docutils literal notranslate"><span class="pre">getaddrinfo()</span></code>.  These all
default to <code class="docutils literal notranslate"><span class="pre">0</span></code>, which means “not specified”.  (The socket type
is always <code class="docutils literal notranslate"><span class="pre">SOCK_DGRAM</span></code>.)  If any of these values are not
specified, the <code class="docutils literal notranslate"><span class="pre">getaddrinfo()</span></code> method will choose appropriate
values.</p></li>
</ul>
<p>Note that if both <code class="docutils literal notranslate"><span class="pre">local_addr</span></code> and <code class="docutils literal notranslate"><span class="pre">remote_addr</span></code> are present,
all combinations of local and remote addresses with matching address
family will be tried.</p>
</li>
</ul>
</section>
<section id="wrapped-socket-methods">
<h4><a class="toc-backref" href="#id21">Wrapped Socket Methods</a><a class="headerlink" href="#wrapped-socket-methods" title="Permalink to this headline">¶</a></h4>
<p>The following methods for doing async I/O on sockets are not for
general use.  They are primarily meant for transport implementations
working with IOCP through the <code class="docutils literal notranslate"><span class="pre">ProactorEventLoop</span></code> class.  However,
they are easily implementable for other event loop types, so there is
no reason not to require them.  The socket argument has to be a
non-blocking socket.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sock_recv(sock,</span> <span class="pre">n)</span></code>.  Receive up to <code class="docutils literal notranslate"><span class="pre">n</span></code> bytes from socket
<code class="docutils literal notranslate"><span class="pre">sock</span></code>.  Returns a Future whose result on success will be a
bytes object.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sock_sendall(sock,</span> <span class="pre">data)</span></code>.  Send bytes <code class="docutils literal notranslate"><span class="pre">data</span></code> to socket
<code class="docutils literal notranslate"><span class="pre">sock</span></code>.  Returns a Future whose result on success will be
<code class="docutils literal notranslate"><span class="pre">None</span></code>.  Note: the name uses <code class="docutils literal notranslate"><span class="pre">sendall</span></code> instead of <code class="docutils literal notranslate"><span class="pre">send</span></code>, to
reflect that the semantics and signature of this method echo those
of the standard library socket method <code class="docutils literal notranslate"><span class="pre">sendall()</span></code> rather than
<code class="docutils literal notranslate"><span class="pre">send()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sock_connect(sock,</span> <span class="pre">address)</span></code>.  Connect to the given address.
Returns a Future whose result on success will be <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sock_accept(sock)</span></code>.  Accept a connection from a socket.  The
socket must be in listening mode and bound to an address.  Returns a
Future whose result on success will be a tuple <code class="docutils literal notranslate"><span class="pre">(conn,</span> <span class="pre">peer)</span></code>
where <code class="docutils literal notranslate"><span class="pre">conn</span></code> is a connected non-blocking socket and <code class="docutils literal notranslate"><span class="pre">peer</span></code> is
the peer address.</p></li>
</ul>
</section>
<section id="i-o-callbacks">
<h4><a class="toc-backref" href="#id22">I/O Callbacks</a><a class="headerlink" href="#i-o-callbacks" title="Permalink to this headline">¶</a></h4>
<p>These methods are primarily meant for transport implementations
working with a selector.  They are implemented by
<code class="docutils literal notranslate"><span class="pre">SelectorEventLoop</span></code> but not by <code class="docutils literal notranslate"><span class="pre">ProactorEventLoop</span></code>.  Custom event
loop implementations may or may not implement them.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">fd</span></code> arguments below may be integer file descriptors, or
“file-like” objects with a <code class="docutils literal notranslate"><span class="pre">fileno()</span></code> method that wrap integer file
descriptors.  Not all file-like objects or file descriptors are
acceptable.  Sockets (and socket file descriptors) are always
accepted.  On Windows no other types are supported.  On UNIX, pipes
and possibly tty devices are also supported, but disk files are not.
Exactly which special file types are supported may vary by platform
and per selector implementation.  (Experimentally, there is at least
one kind of pseudo-tty on OS X that is supported by <code class="docutils literal notranslate"><span class="pre">select</span></code> and
<code class="docutils literal notranslate"><span class="pre">poll</span></code> but not by <code class="docutils literal notranslate"><span class="pre">kqueue</span></code>: it is used by Emacs shell windows.)</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">add_reader(fd,</span> <span class="pre">callback,</span> <span class="pre">*args)</span></code>.  Arrange for
<code class="docutils literal notranslate"><span class="pre">callback(*args)</span></code> to be called whenever file descriptor <code class="docutils literal notranslate"><span class="pre">fd</span></code> is
deemed ready for reading.  Calling <code class="docutils literal notranslate"><span class="pre">add_reader()</span></code> again for the
same file descriptor implies a call to <code class="docutils literal notranslate"><span class="pre">remove_reader()</span></code> for the
same file descriptor.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">add_writer(fd,</span> <span class="pre">callback,</span> <span class="pre">*args)</span></code>.  Like <code class="docutils literal notranslate"><span class="pre">add_reader()</span></code>,
but registers the callback for writing instead of for reading.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">remove_reader(fd)</span></code>.  Cancels the current read callback for file
descriptor <code class="docutils literal notranslate"><span class="pre">fd</span></code>, if one is set.  If no callback is currently set
for the file descriptor, this is a no-op and returns <code class="docutils literal notranslate"><span class="pre">False</span></code>.
Otherwise, it removes the callback arrangement and returns <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">remove_writer(fd)</span></code>.  This is to <code class="docutils literal notranslate"><span class="pre">add_writer()</span></code> as
<code class="docutils literal notranslate"><span class="pre">remove_reader()</span></code> is to <code class="docutils literal notranslate"><span class="pre">add_reader()</span></code>.</p></li>
</ul>
</section>
<section id="pipes-and-subprocesses">
<h4><a class="toc-backref" href="#id23">Pipes and Subprocesses</a><a class="headerlink" href="#pipes-and-subprocesses" title="Permalink to this headline">¶</a></h4>
<p>These methods are supported by <code class="docutils literal notranslate"><span class="pre">SelectorEventLoop</span></code> on UNIX and
<code class="docutils literal notranslate"><span class="pre">ProactorEventLoop</span></code> on Windows.</p>
<p>The transports and protocols used with pipes and subprocesses differ
from those used with regular stream connections.  These are described
later.</p>
<p>Each of the methods below has a <code class="docutils literal notranslate"><span class="pre">protocol_factory</span></code> argument, similar
to <code class="docutils literal notranslate"><span class="pre">create_connection()</span></code>; this will be called exactly once, without
arguments, to construct the protocol object to be returned.</p>
<p>Each method is a coroutine that returns a <code class="docutils literal notranslate"><span class="pre">(transport,</span> <span class="pre">protocol)</span></code>
pair on success, or raises an exception on failure.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">connect_read_pipe(protocol_factory,</span> <span class="pre">pipe)</span></code>: Create a
unidrectional stream connection from a file-like object wrapping the
read end of a UNIX pipe, which must be in non-blocking mode.  The
transport returned is a <code class="docutils literal notranslate"><span class="pre">ReadTransport</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">connect_write_pipe(protocol_factory,</span> <span class="pre">pipe)</span></code>: Create a
unidrectional stream connection from a file-like object wrapping the
write end of a UNIX pipe, which must be in non-blocking mode.  The
transport returned is a <code class="docutils literal notranslate"><span class="pre">WriteTransport</span></code>; it does not have any
read-related methods.  The protocol returned is a <code class="docutils literal notranslate"><span class="pre">BaseProtocol</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">subprocess_shell(protocol_factory,</span> <span class="pre">cmd,</span> <span class="pre">&lt;options&gt;)</span></code>: Create a
subprocess from <code class="docutils literal notranslate"><span class="pre">cmd</span></code>, which is a string using the platform’s
“shell” syntax.  This is similar to the standard library
<code class="docutils literal notranslate"><span class="pre">subprocess.Popen()</span></code> class called with <code class="docutils literal notranslate"><span class="pre">shell=True</span></code>.  The
remaining arguments and return value are described below.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">subprocess_exec(protocol_factory,</span> <span class="pre">*args,</span> <span class="pre">&lt;options&gt;)</span></code>: Create a
subprocess from one or more string arguments, where the first string
specifies the program to execute, and the remaining strings specify
the program’s arguments.  (Thus, together the string arguments form
the <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code> value of the program, assuming it is a Python
script.)  This is similar to the standard library
<code class="docutils literal notranslate"><span class="pre">subprocess.Popen()</span></code> class called with <code class="docutils literal notranslate"><span class="pre">shell=False</span></code> and the
list of strings passed as the first argument; however, where
<code class="docutils literal notranslate"><span class="pre">Popen()</span></code> takes a single argument which is list of strings,
<code class="docutils literal notranslate"><span class="pre">subprocess_exec()</span></code> takes multiple string arguments.  The
remaining arguments and return value are described below.</p></li>
</ul>
<p>Apart from the way the program to execute is specified, the two
<code class="docutils literal notranslate"><span class="pre">subprocess_*()</span></code> methods behave the same.  The transport returned is
a <code class="docutils literal notranslate"><span class="pre">SubprocessTransport</span></code> which has a different interface than the
common bidirectional stream transport.  The protocol returned is a
<code class="docutils literal notranslate"><span class="pre">SubprocessProtocol</span></code> which also has a custom interface.</p>
<p>The &lt;options&gt; are all specified using optional keyword arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">stdin</span></code>: Either a file-like object representing the pipe to be
connected to the subprocess’s standard input stream using
<code class="docutils literal notranslate"><span class="pre">connect_write_pipe()</span></code>, or the constant <code class="docutils literal notranslate"><span class="pre">subprocess.PIPE</span></code> (the
default).  By default a new pipe will be created and connected.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stdout</span></code>: Either a file-like object representing the pipe to be
connected to the subprocess’s standard output stream using
<code class="docutils literal notranslate"><span class="pre">connect_read_pipe()</span></code>, or the constant <code class="docutils literal notranslate"><span class="pre">subprocess.PIPE</span></code> (the
default).  By default a new pipe will be created and connected.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stderr</span></code>: Either a file-like object representing the pipe to be
connected to the subprocess’s standard error stream using
<code class="docutils literal notranslate"><span class="pre">connect_read_pipe()</span></code>, or one of the constants <code class="docutils literal notranslate"><span class="pre">subprocess.PIPE</span></code>
(the default) or <code class="docutils literal notranslate"><span class="pre">subprocess.STDOUT</span></code>.  By default a new pipe will
be created and connected.  When <code class="docutils literal notranslate"><span class="pre">subprocess.STDOUT</span></code> is specified,
the subprocess’s standard error stream will be connected to the same
pipe as the standard output stream.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bufsize</span></code>: The buffer size to be used when creating a pipe; this
is passed to <code class="docutils literal notranslate"><span class="pre">subprocess.Popen()</span></code>.  In the default implementation
this defaults to zero, and on Windows it must be zero; these
defaults deviate from <code class="docutils literal notranslate"><span class="pre">subprocess.Popen()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">executable</span></code>, <code class="docutils literal notranslate"><span class="pre">preexec_fn</span></code>, <code class="docutils literal notranslate"><span class="pre">close_fds</span></code>, <code class="docutils literal notranslate"><span class="pre">cwd</span></code>, <code class="docutils literal notranslate"><span class="pre">env</span></code>,
<code class="docutils literal notranslate"><span class="pre">startupinfo</span></code>, <code class="docutils literal notranslate"><span class="pre">creationflags</span></code>, <code class="docutils literal notranslate"><span class="pre">restore_signals</span></code>,
<code class="docutils literal notranslate"><span class="pre">start_new_session</span></code>, <code class="docutils literal notranslate"><span class="pre">pass_fds</span></code>: These optional arguments are
passed to <code class="docutils literal notranslate"><span class="pre">subprocess.Popen()</span></code> without interpretation.</p></li>
</ul>
</section>
<section id="signal-callbacks">
<h4><a class="toc-backref" href="#id24">Signal callbacks</a><a class="headerlink" href="#signal-callbacks" title="Permalink to this headline">¶</a></h4>
<p>These methods are only supported on UNIX.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">add_signal_handler(sig,</span> <span class="pre">callback,</span> <span class="pre">*args)</span></code>.  Whenever signal
<code class="docutils literal notranslate"><span class="pre">sig</span></code> is received, arrange for <code class="docutils literal notranslate"><span class="pre">callback(*args)</span></code> to be called.
Specifying another callback for the same signal replaces the
previous handler (only one handler can be active per signal).  The
<code class="docutils literal notranslate"><span class="pre">sig</span></code> must be a valid signal number defined in the <code class="docutils literal notranslate"><span class="pre">signal</span></code>
module.  If the signal cannot be handled this raises an exception:
<code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if it is not a valid signal or if it is an
uncatchable signal (e.g. <code class="docutils literal notranslate"><span class="pre">SIGKILL</span></code>), <code class="docutils literal notranslate"><span class="pre">RuntimeError</span></code> if this
particular event loop instance cannot handle signals (since signals
are global per process, only an event loop associated with the main
thread can handle signals).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">remove_signal_handler(sig)</span></code>.  Removes the handler for signal
<code class="docutils literal notranslate"><span class="pre">sig</span></code>, if one is set.  Raises the same exceptions as
<code class="docutils literal notranslate"><span class="pre">add_signal_handler()</span></code> (except that it may return <code class="docutils literal notranslate"><span class="pre">False</span></code>
instead raising <code class="docutils literal notranslate"><span class="pre">RuntimeError</span></code> for uncatchable signals).  Returns
<code class="docutils literal notranslate"><span class="pre">True</span></code> if a handler was removed successfully, <code class="docutils literal notranslate"><span class="pre">False</span></code> if no
handler was set.</p></li>
</ul>
<p>Note: If these methods are statically known to be unsupported, they
may raise <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> instead of <code class="docutils literal notranslate"><span class="pre">RuntimeError</span></code>.</p>
</section>
</section>
<section id="mutual-exclusion-of-callbacks">
<h3><a class="toc-backref" href="#id25">Mutual Exclusion of Callbacks</a><a class="headerlink" href="#mutual-exclusion-of-callbacks" title="Permalink to this headline">¶</a></h3>
<p>An event loop should enforce mutual exclusion of callbacks, i.e. it
should never start a callback while a previously callback is still
running.  This should apply across all types of callbacks, regardless
of whether they are scheduled using <code class="docutils literal notranslate"><span class="pre">call_soon()</span></code>, <code class="docutils literal notranslate"><span class="pre">call_later()</span></code>,
<code class="docutils literal notranslate"><span class="pre">call_at()</span></code>, <code class="docutils literal notranslate"><span class="pre">call_soon_threadsafe()</span></code>, <code class="docutils literal notranslate"><span class="pre">add_reader()</span></code>,
<code class="docutils literal notranslate"><span class="pre">add_writer()</span></code>, or <code class="docutils literal notranslate"><span class="pre">add_signal_handler()</span></code>.</p>
</section>
<section id="exceptions">
<h3><a class="toc-backref" href="#id26">Exceptions</a><a class="headerlink" href="#exceptions" title="Permalink to this headline">¶</a></h3>
<p>There are two categories of exceptions in Python: those that derive
from the <code class="docutils literal notranslate"><span class="pre">Exception</span></code> class and those that derive from
<code class="docutils literal notranslate"><span class="pre">BaseException</span></code>.  Exceptions deriving from <code class="docutils literal notranslate"><span class="pre">Exception</span></code> will
generally be caught and handled appropriately; for example, they will
be passed through by Futures, and they will be logged and ignored when
they occur in a callback.</p>
<p>However, exceptions deriving only from <code class="docutils literal notranslate"><span class="pre">BaseException</span></code> are typically
not caught, and will usually cause the program to terminate with a
traceback.  In some cases they are caught and re-raised.  (Examples of
this category include <code class="docutils literal notranslate"><span class="pre">KeyboardInterrupt</span></code> and <code class="docutils literal notranslate"><span class="pre">SystemExit</span></code>; it is
usually unwise to treat these the same as most other exceptions.)</p>
<p>The event loop passes the latter category into its <em>exception
handler</em>.  This is a callback which accepts a <em>context</em> dict as a
parameter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">exception_handler</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p><em>context</em> may have many different keys but several of them are very
widely used:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'message'</span></code>: error message.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'exception'</span></code>: exception instance; <code class="docutils literal notranslate"><span class="pre">None</span></code> if there is no
exception.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'source_traceback'</span></code>: a list of strings representing stack at the
point the object involved in the error was created.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'handle_traceback'</span></code>: a list of strings representing the stack at
the moment the handle involved in the error was created.</p></li>
</ul>
<p>The loop has the following methods related to exception handling:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">get_exception_handler()</span></code> returns the current exception handler
registered for the loop.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set_exception_handler(handler)</span></code> sets the exception handler.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">default_exception_handler(context)</span></code> the <em>default</em> exception
handler for this loop implementation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">call_exception_handler(context)</span></code> passes <em>context</em> into the
registered exception handler.  This allows handling uncaught
exceptions uniformly by third-party libraries.</p>
<p>The loop uses <code class="docutils literal notranslate"><span class="pre">default_exception_handler()</span></code> if the default was not
overridden by explicit <code class="docutils literal notranslate"><span class="pre">set_exception_handler()</span></code> call.</p>
</li>
</ul>
</section>
<section id="debug-mode">
<h3><a class="toc-backref" href="#id27">Debug Mode</a><a class="headerlink" href="#debug-mode" title="Permalink to this headline">¶</a></h3>
<p>By default the loop operates in <em>release</em> mode.  Applications may
enable <em>debug</em> mode better error reporting at the cost of some
performance.</p>
<p>In debug mode many additional checks are enabled, for example:</p>
<ul>
<li><p>Source tracebacks are available for unhandled exceptions in futures/tasks.</p></li>
<li><p>The loop checks for slow callbacks to detect accidental blocking for I/O.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">loop.slow_callback_duration</span></code> attribute controls the maximum
execution time allowed between two <em>yield points</em> before a slow
callback is reported.  The default value is 0.1 seconds; it may be
changed by assigning to it.</p>
</li>
</ul>
<p>There are two methods related to debug mode:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">get_debug()</span></code> returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if <em>debug</em> mode is enabled,
<code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set_debug(enabled)</span></code> enables <em>debug</em> mode if the argument is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
<p>Debug mode is automatically enabled if the <code class="docutils literal notranslate"><span class="pre">PYTHONASYNCIODEBUG</span></code>
<em>environment variable</em> is defined and not empty.</p>
</section>
<section id="handles">
<h3><a class="toc-backref" href="#id28">Handles</a><a class="headerlink" href="#handles" title="Permalink to this headline">¶</a></h3>
<p>The various methods for registering one-off callbacks
(<code class="docutils literal notranslate"><span class="pre">call_soon()</span></code>, <code class="docutils literal notranslate"><span class="pre">call_later()</span></code>, <code class="docutils literal notranslate"><span class="pre">call_at()</span></code> and
<code class="docutils literal notranslate"><span class="pre">call_soon_threadsafe()</span></code>) all return an object representing the
registration that can be used to cancel the callback.  This object is
called a <code class="docutils literal notranslate"><span class="pre">Handle</span></code>.  Handles are opaque and have only one public
method:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cancel()</span></code>: Cancel the callback.</p></li>
</ul>
<p>Note that <code class="docutils literal notranslate"><span class="pre">add_reader()</span></code>, <code class="docutils literal notranslate"><span class="pre">add_writer()</span></code> and
<code class="docutils literal notranslate"><span class="pre">add_signal_handler()</span></code> do not return Handles.</p>
</section>
<section id="servers">
<h3><a class="toc-backref" href="#id29">Servers</a><a class="headerlink" href="#servers" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">create_server()</span></code> method returns a <code class="docutils literal notranslate"><span class="pre">Server</span></code> instance, which
wraps the sockets (or other network objects) used to accept requests.
This class has two public methods:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">close()</span></code>: Close the service.  This stops accepting new requests
but does not cancel requests that have already been accepted and are
currently being handled.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wait_closed()</span></code>: A coroutine that blocks until the service is
closed and all accepted requests have been handled.</p></li>
</ul>
</section>
<section id="futures">
<h3><a class="toc-backref" href="#id30">Futures</a><a class="headerlink" href="#futures" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">asyncio.Future</span></code> class here is intentionally similar to the
<code class="docutils literal notranslate"><span class="pre">concurrent.futures.Future</span></code> class specified by <a class="reference external" href="pep-3148.html">PEP 3148</a>, but there
are slight differences.  Whenever this PEP talks about Futures or
futures this should be understood to refer to <code class="docutils literal notranslate"><span class="pre">asyncio.Future</span></code> unless
<code class="docutils literal notranslate"><span class="pre">concurrent.futures.Future</span></code> is explicitly mentioned.  The supported
public API is as follows, indicating the differences with <a class="reference external" href="pep-3148.html">PEP 3148</a>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cancel()</span></code>.  If the Future is already done (or cancelled), do
nothing and return <code class="docutils literal notranslate"><span class="pre">False</span></code>.  Otherwise, this attempts to cancel
the Future and returns <code class="docutils literal notranslate"><span class="pre">True</span></code>.  If the cancellation attempt is
successful, eventually the Future’s state will change to cancelled
(so that <code class="docutils literal notranslate"><span class="pre">cancelled()</span></code> will return <code class="docutils literal notranslate"><span class="pre">True</span></code>)
and the callbacks will be scheduled.  For regular Futures,
cancellation will always succeed immediately; but for Tasks (see
below) the task may ignore or delay the cancellation attempt.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cancelled()</span></code>.  Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if the Future was successfully
cancelled.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">done()</span></code>.  Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if the Future is done.  Note that a
cancelled Future is considered done too (here and everywhere).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">result()</span></code>.  Returns the result set with <code class="docutils literal notranslate"><span class="pre">set_result()</span></code>, or
raises the exception set with <code class="docutils literal notranslate"><span class="pre">set_exception()</span></code>.  Raises
<code class="docutils literal notranslate"><span class="pre">CancelledError</span></code> if cancelled.  Difference with <a class="reference external" href="pep-3148.html">PEP 3148</a>: This has
no timeout argument and does <em>not</em> wait; if the future is not yet
done, it raises an exception.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exception()</span></code>.  Returns the exception if set with
<code class="docutils literal notranslate"><span class="pre">set_exception()</span></code>, or <code class="docutils literal notranslate"><span class="pre">None</span></code> if a result was set with
<code class="docutils literal notranslate"><span class="pre">set_result()</span></code>.  Raises <code class="docutils literal notranslate"><span class="pre">CancelledError</span></code> if cancelled.
Difference with <a class="reference external" href="pep-3148.html">PEP 3148</a>: This has no timeout argument and does
<em>not</em> wait; if the future is not yet done, it raises an exception.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">add_done_callback(fn)</span></code>.  Add a callback to be run when the Future
becomes done (or is cancelled).  If the Future is already done (or
cancelled), schedules the callback to using <code class="docutils literal notranslate"><span class="pre">call_soon()</span></code>.
Difference with <a class="reference external" href="pep-3148.html">PEP 3148</a>: The callback is never called immediately,
and always in the context of the caller – typically this is a
thread.  You can think of this as calling the callback through
<code class="docutils literal notranslate"><span class="pre">call_soon()</span></code>.  Note that in order to match <a class="reference external" href="pep-3148.html">PEP 3148</a>, the callback
(unlike all other callbacks defined in this PEP, and ignoring the
convention from the section “Callback Style” below) is always called
with a single argument, the Future object.  (The motivation for
strictly serializing callbacks scheduled with <code class="docutils literal notranslate"><span class="pre">call_soon()</span></code>
applies here too.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">remove_done_callback(fn)</span></code>.  Remove the argument from the list of
callbacks.  This method is not defined by <a class="reference external" href="pep-3148.html">PEP 3148</a>.  The argument
must be equal (using <code class="docutils literal notranslate"><span class="pre">==</span></code>) to the argument passed to
<code class="docutils literal notranslate"><span class="pre">add_done_callback()</span></code>.  Returns the number of times the callback
was removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set_result(result)</span></code>.  The Future must not be done (nor cancelled)
already.  This makes the Future done and schedules the callbacks.
Difference with <a class="reference external" href="pep-3148.html">PEP 3148</a>: This is a public API.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set_exception(exception)</span></code>.  The Future must not be done (nor
cancelled) already.  This makes the Future done and schedules the
callbacks.  Difference with <a class="reference external" href="pep-3148.html">PEP 3148</a>: This is a public API.</p></li>
</ul>
<p>The internal method <code class="docutils literal notranslate"><span class="pre">set_running_or_notify_cancel()</span></code> is not
supported; there is no way to set the running state.  Likewise,
the method <code class="docutils literal notranslate"><span class="pre">running()</span></code> is not supported.</p>
<p>The following exceptions are defined:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">InvalidStateError</span></code>.  Raised whenever the Future is not in a state
acceptable to the method being called (e.g. calling <code class="docutils literal notranslate"><span class="pre">set_result()</span></code>
on a Future that is already done, or calling <code class="docutils literal notranslate"><span class="pre">result()</span></code> on a Future
that is not yet done).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">InvalidTimeoutError</span></code>.  Raised by <code class="docutils literal notranslate"><span class="pre">result()</span></code> and <code class="docutils literal notranslate"><span class="pre">exception()</span></code>
when a nonzero <code class="docutils literal notranslate"><span class="pre">timeout</span></code> argument is given.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CancelledError</span></code>.  An alias for
<code class="docutils literal notranslate"><span class="pre">concurrent.futures.CancelledError</span></code>.  Raised when <code class="docutils literal notranslate"><span class="pre">result()</span></code> or
<code class="docutils literal notranslate"><span class="pre">exception()</span></code> is called on a Future that is cancelled.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TimeoutError</span></code>.  An alias for <code class="docutils literal notranslate"><span class="pre">concurrent.futures.TimeoutError</span></code>.
May be raised by <code class="docutils literal notranslate"><span class="pre">run_until_complete()</span></code>.</p></li>
</ul>
<p>A Future is associated with an event loop when it is created.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">asyncio.Future</span></code> object is not acceptable to the <code class="docutils literal notranslate"><span class="pre">wait()</span></code> and
<code class="docutils literal notranslate"><span class="pre">as_completed()</span></code> functions in the <code class="docutils literal notranslate"><span class="pre">concurrent.futures</span></code> package.
However, there are similar APIs <code class="docutils literal notranslate"><span class="pre">asyncio.wait()</span></code> and
<code class="docutils literal notranslate"><span class="pre">asyncio.as_completed()</span></code>, described below.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">asyncio.Future</span></code> object is acceptable to a <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code> expression
when used in a coroutine.  This is implemented through the
<code class="docutils literal notranslate"><span class="pre">__iter__()</span></code> interface on the Future.  See the section “Coroutines
and the Scheduler” below.</p>
<p>When a Future is garbage-collected, if it has an associated exception
but neither <code class="docutils literal notranslate"><span class="pre">result()</span></code> nor <code class="docutils literal notranslate"><span class="pre">exception()</span></code> has ever been called, the
exception is logged.  (When a coroutine uses <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code> to wait
for a Future, that Future’s <code class="docutils literal notranslate"><span class="pre">result()</span></code> method is called once the
coroutine is resumed.)</p>
<p>In the future (pun intended) we may unify <code class="docutils literal notranslate"><span class="pre">asyncio.Future</span></code> and
<code class="docutils literal notranslate"><span class="pre">concurrent.futures.Future</span></code>, e.g. by adding an <code class="docutils literal notranslate"><span class="pre">__iter__()</span></code> method
to the latter that works with <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code>.  To prevent accidentally
blocking the event loop by calling e.g. <code class="docutils literal notranslate"><span class="pre">result()</span></code> on a Future
that’s not done yet, the blocking operation may detect that an event
loop is active in the current thread and raise an exception instead.
However the current PEP strives to have no dependencies beyond Python
3.3, so changes to <code class="docutils literal notranslate"><span class="pre">concurrent.futures.Future</span></code> are off the table for
now.</p>
<p>There are some public functions related to Futures:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">asyncio.async(arg)</span></code>.  This takes an argument that is either a
coroutine object or a Future (i.e., anything you can use with
<code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code>) and returns a Future.  If the argument is a Future,
it is returned unchanged; if it is a coroutine object, it wraps it
in a Task (remember that <code class="docutils literal notranslate"><span class="pre">Task</span></code> is a subclass of <code class="docutils literal notranslate"><span class="pre">Future</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">asyncio.wrap_future(future)</span></code>.  This takes a <a class="reference external" href="pep-3148.html">PEP 3148</a> Future
(i.e., an instance of <code class="docutils literal notranslate"><span class="pre">concurrent.futures.Future</span></code>) and returns a
Future compatible with the event loop (i.e., a <code class="docutils literal notranslate"><span class="pre">asyncio.Future</span></code>
instance).</p></li>
</ul>
</section>
<section id="transports">
<h3><a class="toc-backref" href="#id31">Transports</a><a class="headerlink" href="#transports" title="Permalink to this headline">¶</a></h3>
<p>Transports and protocols are strongly influenced by Twisted and <a class="reference external" href="pep-3153.html">PEP
3153</a>.  Users rarely implement or instantiate transports – rather,
event loops offer utility methods to set up transports.</p>
<p>Transports work in conjunction with protocols.  Protocols are
typically written without knowing or caring about the exact type of
transport used, and transports can be used with a wide variety of
protocols.  For example, an HTTP client protocol implementation may be
used with either a plain socket transport or an SSL/TLS transport.
The plain socket transport can be used with many different protocols
besides HTTP (e.g. SMTP, IMAP, POP, FTP, IRC, SPDY).</p>
<p>The most common type of transport is a bidirectional stream transport.
There are also unidirectional stream transports (used for pipes) and
datagram transports (used by the <code class="docutils literal notranslate"><span class="pre">create_datagram_endpoint()</span></code>
method).</p>
<section id="methods-for-all-transports">
<h4><a class="toc-backref" href="#id32">Methods For All Transports</a><a class="headerlink" href="#methods-for-all-transports" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">get_extra_info(name,</span> <span class="pre">default=None)</span></code>.  This is a catch-all method
that returns implementation-specific information about a transport.
The first argument is the name of the extra field to be retrieved.
The optional second argument is a default value to be returned.
Consult the implementation documentation to find out the supported
extra field names.  For an unsupported name, the default is always
returned.</p></li>
</ul>
</section>
<section id="bidirectional-stream-transports">
<h4><a class="toc-backref" href="#id33">Bidirectional Stream Transports</a><a class="headerlink" href="#bidirectional-stream-transports" title="Permalink to this headline">¶</a></h4>
<p>A bidirectional stream transport is an abstraction on top of a socket
or something similar (for example, a pair of UNIX pipes or an SSL/TLS
connection).</p>
<p>Most connections have an asymmetric nature: the client and server
usually have very different roles and behaviors.  Hence, the interface
between transport and protocol is also asymmetric.  From the
protocol’s point of view, <em>writing</em> data is done by calling the
<code class="docutils literal notranslate"><span class="pre">write()</span></code> method on the transport object; this buffers the data and
returns immediately.  However, the transport takes a more active role
in <em>reading</em> data: whenever some data is read from the socket (or
other data source), the transport calls the protocol’s
<code class="docutils literal notranslate"><span class="pre">data_received()</span></code> method.</p>
<p>Nevertheless, the interface between transport and protocol used by
bidirectional streams is the same for clients as it is for servers,
since the connection between a client and a server is essentially a
pair of streams, one in each direction.</p>
<p>Bidirectional stream transports have the following public methods:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">write(data)</span></code>.  Write some bytes.  The argument must be a bytes
object.  Returns <code class="docutils literal notranslate"><span class="pre">None</span></code>.  The transport is free to buffer the
bytes, but it must eventually cause the bytes to be transferred to
the entity at the other end, and it must maintain stream behavior.
That is, <code class="docutils literal notranslate"><span class="pre">t.write(b'abc');</span> <span class="pre">t.write(b'def')</span></code> is equivalent to
<code class="docutils literal notranslate"><span class="pre">t.write(b'abcdef')</span></code>, as well as to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">t</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;d&#39;</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">writelines(iterable)</span></code>.  Equivalent to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_eof()</span></code>.  Close the writing end of the connection.
Subsequent calls to <code class="docutils literal notranslate"><span class="pre">write()</span></code> are not allowed.  Once all buffered
data is transferred, the transport signals to the other end that no
more data will be received.  Some protocols don’t support this
operation; in that case, calling <code class="docutils literal notranslate"><span class="pre">write_eof()</span></code> will raise an
exception.  (Note: This used to be called <code class="docutils literal notranslate"><span class="pre">half_close()</span></code>, but
unless you already know what it is for, that name doesn’t indicate
<em>which</em> end is closed.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">can_write_eof()</span></code>.  Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the protocol supports
<code class="docutils literal notranslate"><span class="pre">write_eof()</span></code>, <code class="docutils literal notranslate"><span class="pre">False</span></code> if it does not.  (This method typically
returns a fixed value that depends only on the specific Transport
class, not on the state of the Transport object.  It is needed
because some protocols need to change their behavior when
<code class="docutils literal notranslate"><span class="pre">write_eof()</span></code> is unavailable.  For example, in HTTP, to send data
whose size is not known ahead of time, the end of the data is
typically indicated using <code class="docutils literal notranslate"><span class="pre">write_eof()</span></code>; however, SSL/TLS does not
support this, and an HTTP protocol implementation would have to use
the “chunked” transfer encoding in this case.  But if the data size
is known ahead of time, the best approach in both cases is to use
the Content-Length header.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_write_buffer_size()</span></code>.  Return the current size of the
transport’s write buffer in bytes.  This only knows about the write
buffer managed explicitly by the transport; buffering in other
layers of the network stack or elsewhere of the network is not
reported.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set_write_buffer_limits(high=None,</span> <span class="pre">low=None)</span></code>.  Set the high- and
low-water limits for flow control.</p>
<p>These two values control when to call the protocol’s
<code class="docutils literal notranslate"><span class="pre">pause_writing()</span></code> and <code class="docutils literal notranslate"><span class="pre">resume_writing()</span></code> methods.  If specified,
the low-water limit must be less than or equal to the high-water
limit.  Neither value can be negative.</p>
<p>The defaults are implementation-specific.  If only the high-water
limit is given, the low-water limit defaults to an
implementation-specific value less than or equal to the high-water
limit.  Setting high to zero forces low to zero as well, and causes
<code class="docutils literal notranslate"><span class="pre">pause_writing()</span></code> to be called whenever the buffer becomes
non-empty.  Setting low to zero causes <code class="docutils literal notranslate"><span class="pre">resume_writing()</span></code> to be
called only once the buffer is empty.  Use of zero for either limit
is generally sub-optimal as it reduces opportunities for doing I/O
and computation concurrently.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">pause_reading()</span></code>.  Suspend delivery of data to the protocol until
a subsequent <code class="docutils literal notranslate"><span class="pre">resume_reading()</span></code> call.  Between <code class="docutils literal notranslate"><span class="pre">pause_reading()</span></code>
and <code class="docutils literal notranslate"><span class="pre">resume_reading()</span></code>, the protocol’s <code class="docutils literal notranslate"><span class="pre">data_received()</span></code> method
will not be called.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resume_reading()</span></code>.  Restart delivery of data to the protocol via
<code class="docutils literal notranslate"><span class="pre">data_received()</span></code>.  Note that “paused” is a binary state –
<code class="docutils literal notranslate"><span class="pre">pause_reading()</span></code> should only be called when the transport is not
paused, while <code class="docutils literal notranslate"><span class="pre">resume_reading()</span></code> should only be called when the
transport is paused.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">close()</span></code>.  Sever the connection with the entity at the other end.
Any data buffered by <code class="docutils literal notranslate"><span class="pre">write()</span></code> will (eventually) be transferred
before the connection is actually closed.  The protocol’s
<code class="docutils literal notranslate"><span class="pre">data_received()</span></code> method will not be called again.  Once all
buffered data has been flushed, the protocol’s <code class="docutils literal notranslate"><span class="pre">connection_lost()</span></code>
method will be called with <code class="docutils literal notranslate"><span class="pre">None</span></code> as the argument.  Note that
this method does not wait for all that to happen.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">abort()</span></code>.  Immediately sever the connection.  Any data still
buffered by the transport is thrown away.  Soon, the protocol’s
<code class="docutils literal notranslate"><span class="pre">connection_lost()</span></code> method will be called with <code class="docutils literal notranslate"><span class="pre">None</span></code> as
argument.</p></li>
</ul>
</section>
<section id="unidirectional-stream-transports">
<h4><a class="toc-backref" href="#id34">Unidirectional Stream Transports</a><a class="headerlink" href="#unidirectional-stream-transports" title="Permalink to this headline">¶</a></h4>
<p>A writing stream transport supports the <code class="docutils literal notranslate"><span class="pre">write()</span></code>, <code class="docutils literal notranslate"><span class="pre">writelines()</span></code>,
<code class="docutils literal notranslate"><span class="pre">write_eof()</span></code>, <code class="docutils literal notranslate"><span class="pre">can_write_eof()</span></code>, <code class="docutils literal notranslate"><span class="pre">close()</span></code> and <code class="docutils literal notranslate"><span class="pre">abort()</span></code> methods
described for bidirectional stream transports.</p>
<p>A reading stream transport supports the <code class="docutils literal notranslate"><span class="pre">pause_reading()</span></code>,
<code class="docutils literal notranslate"><span class="pre">resume_reading()</span></code> and <code class="docutils literal notranslate"><span class="pre">close()</span></code> methods described for
bidirectional stream transports.</p>
<p>A writing stream transport calls only <code class="docutils literal notranslate"><span class="pre">connection_made()</span></code> and
<code class="docutils literal notranslate"><span class="pre">connection_lost()</span></code> on its associated protocol.</p>
<p>A reading stream transport can call all protocol methods specified in
the Protocols section below (i.e., the previous two plus
<code class="docutils literal notranslate"><span class="pre">data_received()</span></code> and <code class="docutils literal notranslate"><span class="pre">eof_received()</span></code>).</p>
</section>
<section id="datagram-transports">
<h4><a class="toc-backref" href="#id35">Datagram Transports</a><a class="headerlink" href="#datagram-transports" title="Permalink to this headline">¶</a></h4>
<p>Datagram transports have these methods:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sendto(data,</span> <span class="pre">addr=None)</span></code>.  Sends a datagram (a bytes object).
The optional second argument is the destination address.  If
omitted, <code class="docutils literal notranslate"><span class="pre">remote_addr</span></code> must have been specified in the
<code class="docutils literal notranslate"><span class="pre">create_datagram_endpoint()</span></code> call that created this transport.  If
present, and <code class="docutils literal notranslate"><span class="pre">remote_addr</span></code> was specified, they must match.  The
(data, addr) pair may be sent immediately or buffered.  The return
value is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">abort()</span></code>.  Immediately close the transport.  Buffered data will
be discarded.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">close()</span></code>.  Close the transport.  Buffered data will be
transmitted asynchronously.</p></li>
</ul>
<p>Datagram transports call the following methods on the associated
protocol object: <code class="docutils literal notranslate"><span class="pre">connection_made()</span></code>, <code class="docutils literal notranslate"><span class="pre">connection_lost()</span></code>,
<code class="docutils literal notranslate"><span class="pre">error_received()</span></code> and <code class="docutils literal notranslate"><span class="pre">datagram_received()</span></code>.  (“Connection”
in these method names is a slight misnomer, but the concepts still
exist: <code class="docutils literal notranslate"><span class="pre">connection_made()</span></code> means the transport representing the
endpoint has been created, and <code class="docutils literal notranslate"><span class="pre">connection_lost()</span></code> means the
transport is closed.)</p>
</section>
<section id="subprocess-transports">
<h4><a class="toc-backref" href="#id36">Subprocess Transports</a><a class="headerlink" href="#subprocess-transports" title="Permalink to this headline">¶</a></h4>
<p>Subprocess transports have the following methods:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">get_pid()</span></code>.  Return the process ID of the subprocess.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_returncode()</span></code>.  Return the process return code, if the
process has exited; otherwise <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_pipe_transport(fd)</span></code>.  Return the pipe transport (a
unidirectional stream transport) corresponding to the argument,
which should be 0, 1 or 2 representing stdin, stdout or stderr (of
the subprocess).  If there is no such pipe transport, return
<code class="docutils literal notranslate"><span class="pre">None</span></code>.  For stdin, this is a writing transport; for stdout and
stderr this is a reading transport.  You must use this method to get
a transport you can use to write to the subprocess’s stdin.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">send_signal(signal)</span></code>.  Send a signal to the subprocess.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">terminate()</span></code>.  Terminate the subprocess.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kill()</span></code>.  Kill the subprocess.  On Windows this is an alias for
<code class="docutils literal notranslate"><span class="pre">terminate()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">close()</span></code>.  This is an alias for <code class="docutils literal notranslate"><span class="pre">terminate()</span></code>.</p></li>
</ul>
<p>Note that <code class="docutils literal notranslate"><span class="pre">send_signal()</span></code>, <code class="docutils literal notranslate"><span class="pre">terminate()</span></code> and <code class="docutils literal notranslate"><span class="pre">kill()</span></code> wrap the
corresponding methods in the standard library <code class="docutils literal notranslate"><span class="pre">subprocess</span></code> module.</p>
</section>
</section>
<section id="protocols">
<h3><a class="toc-backref" href="#id37">Protocols</a><a class="headerlink" href="#protocols" title="Permalink to this headline">¶</a></h3>
<p>Protocols are always used in conjunction with transports.  While a few
common protocols are provided (e.g. decent though not necessarily
excellent HTTP client and server implementations), most protocols will
be implemented by user code or third-party libraries.</p>
<p>Like for transports, we distinguish between stream protocols, datagram
protocols, and perhaps other custom protocols.  The most common type
of protocol is a bidirectional stream protocol.  (There are no
unidirectional protocols.)</p>
<section id="stream-protocols">
<h4><a class="toc-backref" href="#id38">Stream Protocols</a><a class="headerlink" href="#stream-protocols" title="Permalink to this headline">¶</a></h4>
<p>A (bidirectional) stream protocol must implement the following
methods, which will be called by the transport.  Think of these as
callbacks that are always called by the event loop in the right
context.  (See the “Context” section way above.)</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">connection_made(transport)</span></code>.  Indicates that the transport is
ready and connected to the entity at the other end.  The protocol
should probably save the transport reference as an instance variable
(so it can call its <code class="docutils literal notranslate"><span class="pre">write()</span></code> and other methods later), and may
write an initial greeting or request at this point.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_received(data)</span></code>.  The transport has read some bytes from the
connection.  The argument is always a non-empty bytes object.  There
are no guarantees about the minimum or maximum size of the data
passed along this way.  <code class="docutils literal notranslate"><span class="pre">p.data_received(b'abcdef')</span></code> should be
treated exactly equivalent to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">data_received</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">data_received</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;def&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">eof_received()</span></code>.  This is called when the other end called
<code class="docutils literal notranslate"><span class="pre">write_eof()</span></code> (or something equivalent).  If this returns a false
value (including <code class="docutils literal notranslate"><span class="pre">None</span></code>), the transport will close itself.  If it
returns a true value, closing the transport is up to the protocol.
However, for SSL/TLS connections this is ignored, because the TLS
standard requires that no more data is sent and the connection is
closed as soon as a “closure alert” is received.</p>
<p>The default implementation returns <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">pause_writing()</span></code>.  Asks that the protocol temporarily stop
writing data to the transport.  Heeding the request is optional, but
the transport’s buffer may grow without bounds if you keep writing.
The buffer size at which this is called can be controlled through
the transport’s <code class="docutils literal notranslate"><span class="pre">set_write_buffer_limits()</span></code> method.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resume_writing()</span></code>.  Tells the protocol that it is safe to start
writing data to the transport again.  Note that this may be called
directly by the transport’s <code class="docutils literal notranslate"><span class="pre">write()</span></code> method (as opposed to being
called indirectly using <code class="docutils literal notranslate"><span class="pre">call_soon()</span></code>), so that the protocol may
be aware of its paused state immediately after <code class="docutils literal notranslate"><span class="pre">write()</span></code> returns.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">connection_lost(exc)</span></code>.  The transport has been closed or aborted,
has detected that the other end has closed the connection cleanly,
or has encountered an unexpected error.  In the first three cases
the argument is <code class="docutils literal notranslate"><span class="pre">None</span></code>; for an unexpected error, the argument is
the exception that caused the transport to give up.</p></li>
</ul>
<p>Here is a table indicating the order and multiplicity of the basic
calls:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">connection_made()</span></code> – exactly once</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_received()</span></code> – zero or more times</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">eof_received()</span></code> – at most once</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">connection_lost()</span></code> – exactly once</p></li>
</ol>
<p>Calls to <code class="docutils literal notranslate"><span class="pre">pause_writing()</span></code> and <code class="docutils literal notranslate"><span class="pre">resume_writing()</span></code> occur in pairs
and only between #1 and #4.  These pairs will not be nested.  The
final <code class="docutils literal notranslate"><span class="pre">resume_writing()</span></code> call may be omitted; i.e. a paused
connection may be lost and never be resumed.</p>
</section>
<section id="datagram-protocols">
<h4><a class="toc-backref" href="#id39">Datagram Protocols</a><a class="headerlink" href="#datagram-protocols" title="Permalink to this headline">¶</a></h4>
<p>Datagram protocols have <code class="docutils literal notranslate"><span class="pre">connection_made()</span></code> and
<code class="docutils literal notranslate"><span class="pre">connection_lost()</span></code> methods with the same signatures as stream
protocols.  (As explained in the section about datagram transports, we
prefer the slightly odd nomenclature over defining different method
names to indicating the opening and closing of the socket.)</p>
<p>In addition, they have the following methods:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">datagram_received(data,</span> <span class="pre">addr)</span></code>.  Indicates that a datagram
<code class="docutils literal notranslate"><span class="pre">data</span></code> (a bytes objects) was received from remote address <code class="docutils literal notranslate"><span class="pre">addr</span></code>
(an IPv4 2-tuple or an IPv6 4-tuple).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">error_received(exc)</span></code>.  Indicates that a send or receive operation
raised an <code class="docutils literal notranslate"><span class="pre">OSError</span></code> exception.  Since datagram errors may be
transient, it is up to the protocol to call the transport’s
<code class="docutils literal notranslate"><span class="pre">close()</span></code> method if it wants to close the endpoint.</p></li>
</ul>
<p>Here is a chart indicating the order and multiplicity of calls:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">connection_made()</span></code> – exactly once</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">datagram_received()</span></code>, <code class="docutils literal notranslate"><span class="pre">error_received()</span></code> – zero or more times</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">connection_lost()</span></code> – exactly once</p></li>
</ol>
</section>
<section id="subprocess-protocol">
<h4><a class="toc-backref" href="#id40">Subprocess Protocol</a><a class="headerlink" href="#subprocess-protocol" title="Permalink to this headline">¶</a></h4>
<p>Subprocess protocols have <code class="docutils literal notranslate"><span class="pre">connection_made()</span></code>, <code class="docutils literal notranslate"><span class="pre">connection_lost()</span></code>,
<code class="docutils literal notranslate"><span class="pre">pause_writing()</span></code> and <code class="docutils literal notranslate"><span class="pre">resume_writing()</span></code> methods with the same
signatures as stream protocols.  In addition, they have the following
methods:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pipe_data_received(fd,</span> <span class="pre">data)</span></code>.  Called when the subprocess writes
data to its stdout or stderr.  <code class="docutils literal notranslate"><span class="pre">fd</span></code> is the file descriptor (1 for
stdout, 2 for stderr).  <code class="docutils literal notranslate"><span class="pre">data</span></code> is a <code class="docutils literal notranslate"><span class="pre">bytes</span></code> object.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pipe_connection_lost(fd,</span> <span class="pre">exc)</span></code>.  Called when the subprocess
closes its stdin, stdout or stderr.  <code class="docutils literal notranslate"><span class="pre">fd</span></code> is the file descriptor.
<code class="docutils literal notranslate"><span class="pre">exc</span></code> is an exception or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">process_exited()</span></code>.  Called when the subprocess has exited.  To
retrieve the exit status, use the transport’s <code class="docutils literal notranslate"><span class="pre">get_returncode()</span></code>
method.</p></li>
</ul>
<p>Note that depending on the behavior of the subprocess it is possible
that <code class="docutils literal notranslate"><span class="pre">process_exited()</span></code> is called either before or after
<code class="docutils literal notranslate"><span class="pre">pipe_connection_lost()</span></code>.  For example, if the subprocess creates a
sub-subprocess that shares its stdin/stdout/stderr and then itself
exits, <code class="docutils literal notranslate"><span class="pre">process_exited()</span></code> may be called while all the pipes are
still open.  On the other hand, when the subprocess closes its
stdin/stdout/stderr but does not exit, <code class="docutils literal notranslate"><span class="pre">pipe_connection_lost()</span></code> may
be called for all three pipes without <code class="docutils literal notranslate"><span class="pre">process_exited()</span></code> being
called.  If (as is the more common case) the subprocess exits and
thereby implicitly closes all pipes, the calling order is undefined.</p>
</section>
</section>
<section id="callback-style">
<h3><a class="toc-backref" href="#id41">Callback Style</a><a class="headerlink" href="#callback-style" title="Permalink to this headline">¶</a></h3>
<p>Most interfaces taking a callback also take positional arguments.  For
instance, to arrange for <code class="docutils literal notranslate"><span class="pre">foo(&quot;abc&quot;,</span> <span class="pre">42)</span></code> to be called soon, you
call <code class="docutils literal notranslate"><span class="pre">loop.call_soon(foo,</span> <span class="pre">&quot;abc&quot;,</span> <span class="pre">42)</span></code>.  To schedule the call
<code class="docutils literal notranslate"><span class="pre">foo()</span></code>, use <code class="docutils literal notranslate"><span class="pre">loop.call_soon(foo)</span></code>.  This convention greatly
reduces the number of small lambdas required in typical callback
programming.</p>
<p>This convention specifically does <em>not</em> support keyword arguments.
Keyword arguments are used to pass optional extra information about
the callback.  This allows graceful evolution of the API without
having to worry about whether a keyword might be significant to a
callee somewhere.  If you have a callback that <em>must</em> be called with a
keyword argument, you can use a lambda.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">loop</span><span class="o">.</span><span class="n">call_soon</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">foo</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="n">repeat</span><span class="o">=</span><span class="mi">42</span><span class="p">))</span>
</pre></div>
</div>
</section>
</section>
<section id="coroutines-and-the-scheduler">
<h2><a class="toc-backref" href="#id42">Coroutines and the Scheduler</a><a class="headerlink" href="#coroutines-and-the-scheduler" title="Permalink to this headline">¶</a></h2>
<p>This is a separate toplevel section because its status is different
from the event loop interface.  Usage of coroutines is optional, and
it is perfectly fine to write code using callbacks only.  On the other
hand, there is only one implementation of the scheduler/coroutine API,
and if you’re using coroutines, that’s the one you’re using.</p>
<section id="coroutines">
<h3><a class="toc-backref" href="#id43">Coroutines</a><a class="headerlink" href="#coroutines" title="Permalink to this headline">¶</a></h3>
<p>A coroutine is a generator that follows certain conventions.  For
documentation purposes, all coroutines should be decorated with
<code class="docutils literal notranslate"><span class="pre">&#64;asyncio.coroutine</span></code>, but this cannot be strictly enforced.</p>
<p>Coroutines use the <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code> syntax introduced in <a class="reference external" href="pep-0380.html">PEP 380</a>,
instead of the original <code class="docutils literal notranslate"><span class="pre">yield</span></code> syntax.</p>
<p>The word “coroutine”, like the word “generator”, is used for two
different (though related) concepts:</p>
<ul class="simple">
<li><p>The function that defines a coroutine (a function definition
decorated with <code class="docutils literal notranslate"><span class="pre">asyncio.coroutine</span></code>).  If disambiguation is needed
we will call this a <em>coroutine function</em>.</p></li>
<li><p>The object obtained by calling a coroutine function.  This object
represents a computation or an I/O operation (usually a combination)
that will complete eventually.  If disambiguation is needed we will
call it a <em>coroutine object</em>.</p></li>
</ul>
<p>Things a coroutine can do:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">result</span> <span class="pre">=</span> <span class="pre">yield</span> <span class="pre">from</span> <span class="pre">future</span></code> – suspends the coroutine until the
future is done, then returns the future’s result, or raises an
exception, which will be propagated.  (If the future is cancelled,
it will raise a <code class="docutils literal notranslate"><span class="pre">CancelledError</span></code> exception.)  Note that tasks are
futures, and everything said about futures also applies to tasks.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">result</span> <span class="pre">=</span> <span class="pre">yield</span> <span class="pre">from</span> <span class="pre">coroutine</span></code> – wait for another coroutine to
produce a result (or raise an exception, which will be propagated).
The <code class="docutils literal notranslate"><span class="pre">coroutine</span></code> expression must be a <em>call</em> to another coroutine.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">expression</span></code> – produce a result to the coroutine that is
waiting for this one using <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">raise</span> <span class="pre">exception</span></code> – raise an exception in the coroutine that is
waiting for this one using <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code>.</p></li>
</ul>
<p>Calling a coroutine does not start its code running – it is just a
generator, and the coroutine object returned by the call is really a
generator object, which doesn’t do anything until you iterate over it.
In the case of a coroutine object, there are two basic ways to start
it running: call <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span> <span class="pre">coroutine</span></code> from another coroutine
(assuming the other coroutine is already running!), or convert it to a
Task (see below).</p>
<p>Coroutines (and tasks) can only run when the event loop is running.</p>
</section>
<section id="waiting-for-multiple-coroutines">
<h3><a class="toc-backref" href="#id44">Waiting for Multiple Coroutines</a><a class="headerlink" href="#waiting-for-multiple-coroutines" title="Permalink to this headline">¶</a></h3>
<p>To wait for multiple coroutines or Futures, two APIs similar to the
<code class="docutils literal notranslate"><span class="pre">wait()</span></code> and <code class="docutils literal notranslate"><span class="pre">as_completed()</span></code> APIs in the <code class="docutils literal notranslate"><span class="pre">concurrent.futures</span></code>
package are provided:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">asyncio.wait(fs,</span> <span class="pre">timeout=None,</span> <span class="pre">return_when=ALL_COMPLETED)</span></code>.  This
is a coroutine that waits for the Futures or coroutines given by
<code class="docutils literal notranslate"><span class="pre">fs</span></code> to complete.  Coroutine arguments will be wrapped in Tasks
(see below).  This returns a Future whose result on success is a
tuple of two sets of Futures, <code class="docutils literal notranslate"><span class="pre">(done,</span> <span class="pre">pending)</span></code>, where <code class="docutils literal notranslate"><span class="pre">done</span></code> is
the set of original Futures (or wrapped coroutines) that are done
(or cancelled), and <code class="docutils literal notranslate"><span class="pre">pending</span></code> is the rest, i.e. those that are
still not done (nor cancelled).  Note that with the defaults for
<code class="docutils literal notranslate"><span class="pre">timeout</span></code> and <code class="docutils literal notranslate"><span class="pre">return_when</span></code>, <code class="docutils literal notranslate"><span class="pre">done</span></code> will always be an empty
list.  Optional arguments <code class="docutils literal notranslate"><span class="pre">timeout</span></code> and <code class="docutils literal notranslate"><span class="pre">return_when</span></code> have the
same meaning and defaults as for <code class="docutils literal notranslate"><span class="pre">concurrent.futures.wait()</span></code>:
<code class="docutils literal notranslate"><span class="pre">timeout</span></code>, if not <code class="docutils literal notranslate"><span class="pre">None</span></code>, specifies a timeout for the overall
operation; <code class="docutils literal notranslate"><span class="pre">return_when</span></code>, specifies when to stop.  The constants
<code class="docutils literal notranslate"><span class="pre">FIRST_COMPLETED</span></code>, <code class="docutils literal notranslate"><span class="pre">FIRST_EXCEPTION</span></code>, <code class="docutils literal notranslate"><span class="pre">ALL_COMPLETED</span></code> are
defined with the same values and the same meanings as in <a class="reference external" href="pep-3148.html">PEP 3148</a>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ALL_COMPLETED</span></code> (default): Wait until all Futures are done (or
until the timeout occurs).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FIRST_COMPLETED</span></code>: Wait until at least one Future is done (or
until the timeout occurs).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FIRST_EXCEPTION</span></code>: Wait until at least one Future is done but
not cancelled with an exception set.  (The exclusion of cancelled
Futures from the condition is surprising, but <a class="reference external" href="pep-3148.html">PEP 3148</a> does it
this way.)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">asyncio.as_completed(fs,</span> <span class="pre">timeout=None)</span></code>.  Returns an iterator whose
values are Futures or coroutines; waiting for successive values
waits until the next Future or coroutine from the set <code class="docutils literal notranslate"><span class="pre">fs</span></code>
completes, and returns its result (or raises its exception).  The
optional argument <code class="docutils literal notranslate"><span class="pre">timeout</span></code> has the same meaning and default as it
does for <code class="docutils literal notranslate"><span class="pre">concurrent.futures.wait()</span></code>: when the timeout occurs, the
next Future returned by the iterator will raise <code class="docutils literal notranslate"><span class="pre">TimeoutError</span></code>
when waited for.  Example of use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">as_completed</span><span class="p">(</span><span class="n">fs</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">yield from</span> <span class="n">f</span>  <span class="c1"># May raise an exception.</span>
    <span class="c1"># Use result.</span>
</pre></div>
</div>
<p>Note: if you do not wait for the values produced by the iterator,
your <code class="docutils literal notranslate"><span class="pre">for</span></code> loop may not make progress (since you are not allowing
other tasks to run).</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">asyncio.wait_for(f,</span> <span class="pre">timeout)</span></code>.  This is a convenience to wait for
a single coroutine or Future with a timeout.  When a timeout occurs,
it cancels the task and raises TimeoutError.  To avoid the task
cancellation, wrap it in <code class="docutils literal notranslate"><span class="pre">shield()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">asyncio.gather(f1,</span> <span class="pre">f2,</span> <span class="pre">...)</span></code>.  Returns a Future which waits until
all arguments (Futures or coroutines) are done and return a list of
their corresponding results.  If one or more of the arguments is
cancelled or raises an exception, the returned Future is cancelled
or has its exception set (matching what happened to the first
argument), and the remaining arguments are left running in the
background.  Cancelling the returned Future does not affect the
arguments.  Note that coroutine arguments are converted to Futures
using <code class="docutils literal notranslate"><span class="pre">asyncio.async()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">asyncio.shield(f)</span></code>.  Wait for a Future, shielding it from
cancellation.  This returns a Future whose result or exception
is exactly the same as the argument; however, if the returned
Future is cancelled, the argument Future is unaffected.</p>
<p>A use case for this function would be a coroutine that caches a
query result for a coroutine that handles a request in an HTTP
server.  When the request is cancelled by the client, we could
(arguably) want the query-caching coroutine to continue to run, so
that when the client reconnects, the query result is (hopefully)
cached.  This could be written e.g. as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@asyncio</span><span class="o">.</span><span class="n">coroutine</span>
<span class="k">def</span> <span class="nf">handle_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="n">cached_query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cache</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">cached_query</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">cached_query</span> <span class="o">=</span> <span class="k">yield from</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">shield</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fill_cache</span><span class="p">(</span><span class="o">...</span><span class="p">))</span>
    <span class="o">...</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="sleeping">
<h3><a class="toc-backref" href="#id45">Sleeping</a><a class="headerlink" href="#sleeping" title="Permalink to this headline">¶</a></h3>
<p>The coroutine <code class="docutils literal notranslate"><span class="pre">asyncio.sleep(delay)</span></code> returns after a given time delay.</p>
</section>
<section id="tasks">
<h3><a class="toc-backref" href="#id46">Tasks</a><a class="headerlink" href="#tasks" title="Permalink to this headline">¶</a></h3>
<p>A Task is an object that manages an independently running coroutine.
The Task interface is the same as the Future interface, and in fact
<code class="docutils literal notranslate"><span class="pre">Task</span></code> is a subclass of <code class="docutils literal notranslate"><span class="pre">Future</span></code>.  The task becomes done when its
coroutine returns or raises an exception; if it returns a result, that
becomes the task’s result, if it raises an exception, that becomes the
task’s exception.</p>
<p>Cancelling a task that’s not done yet throws an
<code class="docutils literal notranslate"><span class="pre">asyncio.CancelledError</span></code> exception into the coroutine.  If the
coroutine doesn’t catch this (or if it re-raises it) the task will be
marked as cancelled (i.e., <code class="docutils literal notranslate"><span class="pre">cancelled()</span></code> will return <code class="docutils literal notranslate"><span class="pre">True</span></code>); but
if the coroutine somehow catches and ignores the exception it may
continue to execute (and <code class="docutils literal notranslate"><span class="pre">cancelled()</span></code> will return <code class="docutils literal notranslate"><span class="pre">False</span></code>).</p>
<p>Tasks are also useful for interoperating between coroutines and
callback-based frameworks like Twisted.  After converting a coroutine
into a Task, callbacks can be added to the Task.</p>
<p>To convert a coroutine into a task, call the coroutine function and
pass the resulting coroutine object to the <code class="docutils literal notranslate"><span class="pre">loop.create_task()</span></code>
method.  You may also use <code class="docutils literal notranslate"><span class="pre">asyncio.ensure_future()</span></code> for this purpose.</p>
<p>You may ask, why not automatically convert all coroutines to Tasks?
The <code class="docutils literal notranslate"><span class="pre">&#64;asyncio.coroutine</span></code> decorator could do this.  However, this would
slow things down considerably in the case where one coroutine calls
another (and so on), as switching to a “bare” coroutine has much less
overhead than switching to a Task.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Task</span></code> class is derived from <code class="docutils literal notranslate"><span class="pre">Future</span></code> adding new methods:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">current_task(loop=None)</span></code>. A <em>class method</em> returning the
currently running task in an event loop.  If <em>loop</em> is <code class="docutils literal notranslate"><span class="pre">None</span></code> the
method returns the current task for the default loop.  Every
coroutine is executed inside a <em>task context</em>, either a <code class="docutils literal notranslate"><span class="pre">Task</span></code>
created using <code class="docutils literal notranslate"><span class="pre">ensure_future()</span></code> or <code class="docutils literal notranslate"><span class="pre">loop.create_task()</span></code>, or by
being called from another coroutine using <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code> or
<code class="docutils literal notranslate"><span class="pre">await</span></code>.  This method returns <code class="docutils literal notranslate"><span class="pre">None</span></code> when called <em>outside</em> a
coroutine, e.g. in a callback scheduled using <code class="docutils literal notranslate"><span class="pre">loop.call_later()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">all_tasks(loop=None)</span></code>. A <em>class method</em> returning a set of all
active tasks for the loop.  This uses the default loop if <em>loop</em> is
<code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
</ul>
</section>
<section id="the-scheduler">
<h3><a class="toc-backref" href="#id47">The Scheduler</a><a class="headerlink" href="#the-scheduler" title="Permalink to this headline">¶</a></h3>
<p>The scheduler has no public interface.  You interact with it by using
<code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span> <span class="pre">future</span></code> and <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span> <span class="pre">task</span></code>.  In fact, there is no
single object representing the scheduler – its behavior is
implemented by the <code class="docutils literal notranslate"><span class="pre">Task</span></code> and <code class="docutils literal notranslate"><span class="pre">Future</span></code> classes using only the
public interface of the event loop, so it will work with third-party
event loop implementations, too.</p>
</section>
<section id="convenience-utilities">
<h3><a class="toc-backref" href="#id48">Convenience Utilities</a><a class="headerlink" href="#convenience-utilities" title="Permalink to this headline">¶</a></h3>
<p>A few functions and classes are provided to simplify the writing of
basic stream-based clients and servers, such as FTP or HTTP.  Thes
are:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">asyncio.open_connection(host,</span> <span class="pre">port)</span></code>: A wrapper for
<code class="docutils literal notranslate"><span class="pre">EventLoop.create_connection()</span></code> that does not require you to
provide a <code class="docutils literal notranslate"><span class="pre">Protocol</span></code> factory or class.  This is a coroutine that
returns a <code class="docutils literal notranslate"><span class="pre">(reader,</span> <span class="pre">writer)</span></code> pair, where <code class="docutils literal notranslate"><span class="pre">reader</span></code> is an instance
of <code class="docutils literal notranslate"><span class="pre">StreamReader</span></code> and <code class="docutils literal notranslate"><span class="pre">writer</span></code> is an instance of
<code class="docutils literal notranslate"><span class="pre">StreamWriter</span></code> (both described below).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">asyncio.start_server(client_connected_cb,</span> <span class="pre">host,</span> <span class="pre">port)</span></code>: A wrapper
for <code class="docutils literal notranslate"><span class="pre">EventLoop.create_server()</span></code> that takes a simple callback
function rather than a <code class="docutils literal notranslate"><span class="pre">Protocol</span></code> factory or class.  This is a
coroutine that returns a <code class="docutils literal notranslate"><span class="pre">Server</span></code> object just as
<code class="docutils literal notranslate"><span class="pre">create_server()</span></code> does.  Each time a client connection is
accepted, <code class="docutils literal notranslate"><span class="pre">client_connected_cb(reader,</span> <span class="pre">writer)</span></code> is called, where
<code class="docutils literal notranslate"><span class="pre">reader</span></code> is an instance of <code class="docutils literal notranslate"><span class="pre">StreamReader</span></code> and <code class="docutils literal notranslate"><span class="pre">writer</span></code> is an
instance of <code class="docutils literal notranslate"><span class="pre">StreamWriter</span></code> (both described below).  If the result
returned by <code class="docutils literal notranslate"><span class="pre">client_connected_cb()</span></code> is a coroutine, it is
automatically wrapped in a <code class="docutils literal notranslate"><span class="pre">Task</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">StreamReader</span></code>: A class offering an interface not unlike that of a
read-only binary stream, except that the various reading methods are
coroutines.  It is normally driven by a <code class="docutils literal notranslate"><span class="pre">StreamReaderProtocol</span></code>
instance.  Note that there should be only one reader.  The interface
for the reader is:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">readline()</span></code>: A coroutine that reads a string of bytes
representing a line of text ending in <code class="docutils literal notranslate"><span class="pre">'\n'</span></code>, or until the end
of the stream, whichever comes first.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read(n)</span></code>: A coroutine that reads up to <code class="docutils literal notranslate"><span class="pre">n</span></code> bytes.  If <code class="docutils literal notranslate"><span class="pre">n</span></code>
is omitted or negative, it reads until the end of the stream.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">readexactly(n)</span></code>: A coroutine that reads exactly <code class="docutils literal notranslate"><span class="pre">n</span></code> bytes, or
until the end of the stream, whichever comes first.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exception()</span></code>: Return the exception that has been set on the
stream using <code class="docutils literal notranslate"><span class="pre">set_exception()</span></code>, or None if no exception is set.</p></li>
</ul>
<p>The interface for the driver is:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">feed_data(data)</span></code>: Append <code class="docutils literal notranslate"><span class="pre">data</span></code> (a <code class="docutils literal notranslate"><span class="pre">bytes</span></code> object) to the
internal buffer.  This unblocks a blocked reading coroutine if it
provides sufficient data to fulfill the reader’s contract.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">feed_eof()</span></code>: Signal the end of the buffer.  This unblocks a
blocked reading coroutine.  No more data should be fed to the
reader after this call.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set_exception(exc)</span></code>: Set an exception on the stream.  All
subsequent reading methods will raise this exception.  No more
data should be fed to the reader after this call.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">StreamWriter</span></code>: A class offering an interface not unlike that of a
write-only binary stream.  It wraps a transport.  The interface is
an extended subset of the transport interface: the following methods
behave the same as the corresponding transport methods: <code class="docutils literal notranslate"><span class="pre">write()</span></code>,
<code class="docutils literal notranslate"><span class="pre">writelines()</span></code>, <code class="docutils literal notranslate"><span class="pre">write_eof()</span></code>, <code class="docutils literal notranslate"><span class="pre">can_write_eof()</span></code>,
<code class="docutils literal notranslate"><span class="pre">get_extra_info()</span></code>, <code class="docutils literal notranslate"><span class="pre">close()</span></code>.  Note that the writing methods
are _not_ coroutines (this is the same as for transports, but
different from the <code class="docutils literal notranslate"><span class="pre">StreamReader</span></code> class).  The following method is
in addition to the transport interface:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">drain()</span></code>: This should be called with <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code> after
writing significant data, for the purpose of flow control.  The
intended use is like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="k">yield from</span> <span class="n">writer</span><span class="o">.</span><span class="n">drain</span><span class="p">()</span>
</pre></div>
</div>
<p>Note that this is not technically a coroutine: it returns either a
Future or an empty tuple (both can be passed to <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code>).
Use of this method is optional.  However, when it is not used, the
internal buffer of the transport underlying the <code class="docutils literal notranslate"><span class="pre">StreamWriter</span></code>
may fill up with all data that was ever written to the writer.  If
an app does not have a strict limit on how much data it writes, it
_should_ call <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span> <span class="pre">drain()</span></code> occasionally to avoid filling
up the transport buffer.</p>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">StreamReaderProtocol</span></code>: A protocol implementation used as an
adapter between the bidirectional stream transport/protocol
interface and the <code class="docutils literal notranslate"><span class="pre">StreamReader</span></code> and <code class="docutils literal notranslate"><span class="pre">StreamWriter</span></code> classes.  It
acts as a driver for a specific <code class="docutils literal notranslate"><span class="pre">StreamReader</span></code> instance, calling
its methods <code class="docutils literal notranslate"><span class="pre">feed_data()</span></code>, <code class="docutils literal notranslate"><span class="pre">feed_eof()</span></code>, and <code class="docutils literal notranslate"><span class="pre">set_exception()</span></code>
in response to various protocol callbacks.  It also controls the
behavior of the <code class="docutils literal notranslate"><span class="pre">drain()</span></code> method of the <code class="docutils literal notranslate"><span class="pre">StreamWriter</span></code> instance.</p></li>
</ul>
</section>
</section>
<section id="synchronization">
<h2><a class="toc-backref" href="#id49">Synchronization</a><a class="headerlink" href="#synchronization" title="Permalink to this headline">¶</a></h2>
<p>Locks, events, conditions and semaphores modeled after those in the
<code class="docutils literal notranslate"><span class="pre">threading</span></code> module are implemented and can be accessed by importing
the <code class="docutils literal notranslate"><span class="pre">asyncio.locks</span></code> submodule.  Queues modeled after those in the
<code class="docutils literal notranslate"><span class="pre">queue</span></code> module are implemented and can be accessed by importing the
<code class="docutils literal notranslate"><span class="pre">asyncio.queues</span></code> submodule.</p>
<p>In general these have a close correspondence to their threaded
counterparts, however, blocking methods (e.g. <code class="docutils literal notranslate"><span class="pre">acquire()</span></code> on locks,
<code class="docutils literal notranslate"><span class="pre">put()</span></code> and <code class="docutils literal notranslate"><span class="pre">get()</span></code> on queues) are coroutines, and timeout
parameters are not provided (you can use <code class="docutils literal notranslate"><span class="pre">asyncio.wait_for()</span></code> to add
a timeout to a blocking call, however).</p>
<p>The docstrings in the modules provide more complete documentation.</p>
<section id="locks">
<h3><a class="toc-backref" href="#id50">Locks</a><a class="headerlink" href="#locks" title="Permalink to this headline">¶</a></h3>
<p>The following classes are provided by <code class="docutils literal notranslate"><span class="pre">asyncio.locks</span></code>.  For all
these except <code class="docutils literal notranslate"><span class="pre">Event</span></code>, the <code class="docutils literal notranslate"><span class="pre">with</span></code> statement may be used in
combination with <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code> to acquire the lock and ensure that
the lock is released regardless of how the <code class="docutils literal notranslate"><span class="pre">with</span></code> block is left, as
follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="p">(</span><span class="k">yield from</span> <span class="n">my_lock</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Lock</span></code>: a basic mutex, with methods <code class="docutils literal notranslate"><span class="pre">acquire()</span></code> (a coroutine),
<code class="docutils literal notranslate"><span class="pre">locked()</span></code>, and <code class="docutils literal notranslate"><span class="pre">release()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Event</span></code>: an event variable, with methods <code class="docutils literal notranslate"><span class="pre">wait()</span></code> (a coroutine),
<code class="docutils literal notranslate"><span class="pre">set()</span></code>, <code class="docutils literal notranslate"><span class="pre">clear()</span></code>, and <code class="docutils literal notranslate"><span class="pre">is_set()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Condition</span></code>: a condition variable, with methods <code class="docutils literal notranslate"><span class="pre">acquire()</span></code>,
<code class="docutils literal notranslate"><span class="pre">wait()</span></code>, <code class="docutils literal notranslate"><span class="pre">wait_for(predicate)</span></code> (all three coroutines),
<code class="docutils literal notranslate"><span class="pre">locked()</span></code>, <code class="docutils literal notranslate"><span class="pre">release()</span></code>, <code class="docutils literal notranslate"><span class="pre">notify()</span></code>, and <code class="docutils literal notranslate"><span class="pre">notify_all()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Semaphore</span></code>: a semaphore, with methods <code class="docutils literal notranslate"><span class="pre">acquire()</span></code> (a
coroutine), <code class="docutils literal notranslate"><span class="pre">locked()</span></code>, and <code class="docutils literal notranslate"><span class="pre">release()</span></code>.  The constructor
argument is the initial value (default <code class="docutils literal notranslate"><span class="pre">1</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BoundedSemaphore</span></code>: a bounded semaphore; this is similar to
<code class="docutils literal notranslate"><span class="pre">Semaphore</span></code> but the initial value is also the maximum value.</p></li>
</ul>
</section>
<section id="queues">
<h3><a class="toc-backref" href="#id51">Queues</a><a class="headerlink" href="#queues" title="Permalink to this headline">¶</a></h3>
<p>The following classes and exceptions are provided by <code class="docutils literal notranslate"><span class="pre">asyncio.queues</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Queue</span></code>: a standard queue, with methods <code class="docutils literal notranslate"><span class="pre">get()</span></code>, <code class="docutils literal notranslate"><span class="pre">put()</span></code> (both
coroutines), <code class="docutils literal notranslate"><span class="pre">get_nowait()</span></code>, <code class="docutils literal notranslate"><span class="pre">put_nowait()</span></code>, <code class="docutils literal notranslate"><span class="pre">empty()</span></code>,
<code class="docutils literal notranslate"><span class="pre">full()</span></code>, <code class="docutils literal notranslate"><span class="pre">qsize()</span></code>, and <code class="docutils literal notranslate"><span class="pre">maxsize()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PriorityQueue</span></code>: a subclass of <code class="docutils literal notranslate"><span class="pre">Queue</span></code> that retrieves entries
in priority order (lowest first).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LifoQueue</span></code>: a subclass of <code class="docutils literal notranslate"><span class="pre">Queue</span></code> that retrieves the most
recently added entries first.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">JoinableQueue</span></code>: a subclass of <code class="docutils literal notranslate"><span class="pre">Queue</span></code> with <code class="docutils literal notranslate"><span class="pre">task_done()</span></code> and
<code class="docutils literal notranslate"><span class="pre">join()</span></code> methods (the latter a coroutine).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Empty</span></code>, <code class="docutils literal notranslate"><span class="pre">Full</span></code>: exceptions raised when <code class="docutils literal notranslate"><span class="pre">get_nowait()</span></code> or
<code class="docutils literal notranslate"><span class="pre">put_nowait()</span></code> is called on a queue that is empty or full,
respectively.</p></li>
</ul>
</section>
</section>
<section id="miscellaneous">
<h2><a class="toc-backref" href="#id52">Miscellaneous</a><a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h2>
<section id="logging">
<h3><a class="toc-backref" href="#id53">Logging</a><a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h3>
<p>All logging performed by the <code class="docutils literal notranslate"><span class="pre">asyncio</span></code> package uses a single
<code class="docutils literal notranslate"><span class="pre">logging.Logger</span></code> object, <code class="docutils literal notranslate"><span class="pre">asyncio.logger</span></code>.  To customize logging
you can use the standard <code class="docutils literal notranslate"><span class="pre">Logger</span></code> API on this object.  (Do not
replace the object though.)</p>
</section>
<section id="sigchld-handling-on-unix">
<h3><a class="toc-backref" href="#id54"><code class="docutils literal notranslate"><span class="pre">SIGCHLD</span></code> handling on UNIX</a><a class="headerlink" href="#sigchld-handling-on-unix" title="Permalink to this headline">¶</a></h3>
<p>Efficient implementation of the <code class="docutils literal notranslate"><span class="pre">process_exited()</span></code> method on
subprocess protocols requires a <code class="docutils literal notranslate"><span class="pre">SIGCHLD</span></code> signal handler.  However,
signal handlers can only be set on the event loop associated with the
main thread.  In order to support spawning subprocesses from event
loops running in other threads, a mechanism exists to allow sharing a
<code class="docutils literal notranslate"><span class="pre">SIGCHLD</span></code> handler between multiple event loops.  There are two
additional functions, <code class="docutils literal notranslate"><span class="pre">asyncio.get_child_watcher()</span></code> and
<code class="docutils literal notranslate"><span class="pre">asyncio.set_child_watcher()</span></code>, and corresponding methods on the
event loop policy.</p>
<p>There are two child watcher implementation classes,
<code class="docutils literal notranslate"><span class="pre">FastChildWatcher</span></code> and <code class="docutils literal notranslate"><span class="pre">SafeChildWatcher</span></code>.  Both use <code class="docutils literal notranslate"><span class="pre">SIGCHLD</span></code>.
The <code class="docutils literal notranslate"><span class="pre">SafeChildWatcher</span></code> class is used by default; it is inefficient
when many subprocesses exist simultaneously.  The <code class="docutils literal notranslate"><span class="pre">FastChildWatcher</span></code>
class is efficient, but it may interfere with other code (either C
code or Python code) that spawns subprocesses without using an
<code class="docutils literal notranslate"><span class="pre">asyncio</span></code> event loop.  If you are sure you are not using other code
that spawns subprocesses, to use the fast implementation, run the
following in your main thread:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">watcher</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">FastChildWatcher</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">set_child_watcher</span><span class="p">(</span><span class="n">watcher</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="wish-list">
<h2><a class="toc-backref" href="#id55">Wish List</a><a class="headerlink" href="#wish-list" title="Permalink to this headline">¶</a></h2>
<p>(There is agreement that these features are desirable, but no
implementation was available when Python 3.4 beta 1 was released, and
the feature freeze for the rest of the Python 3.4 release cycle
prohibits adding them in this late stage.  However, they will
hopefully be added in Python 3.5, and perhaps earlier in the PyPI
distribution.)</p>
<ul class="simple">
<li><p>Support a “start TLS” operation to upgrade a TCP socket to SSL/TLS.</p></li>
</ul>
<p>Former wish list items that have since been implemented (but aren’t
specified by the PEP):</p>
<ul class="simple">
<li><p>UNIX domain sockets.</p></li>
<li><p>A per-loop error handling callback.</p></li>
</ul>
</section>
<section id="open-issues">
<h2><a class="toc-backref" href="#id56">Open Issues</a><a class="headerlink" href="#open-issues" title="Permalink to this headline">¶</a></h2>
<p>(Note that these have been resolved de facto in favor of the status
quo by the acceptance of the PEP.  However, the PEP’s provisional
status allows revising these decisions for Python 3.5.)</p>
<ul class="simple">
<li><p>Why do <code class="docutils literal notranslate"><span class="pre">create_connection()</span></code> and <code class="docutils literal notranslate"><span class="pre">create_datagram_endpoint()</span></code>
have a <code class="docutils literal notranslate"><span class="pre">proto</span></code> argument but not <code class="docutils literal notranslate"><span class="pre">create_server()</span></code>?  And why are
the family, flag, proto arguments for <code class="docutils literal notranslate"><span class="pre">getaddrinfo()</span></code> sometimes
zero and sometimes named constants (whose value is also zero)?</p></li>
<li><p>Do we need another inquiry method to tell whether the loop is in the
process of stopping?</p></li>
<li><p>A fuller public API for Handle?  What’s the use case?</p></li>
<li><p>A debugging API?  E.g. something that logs a lot of stuff, or logs
unusual conditions (like queues filling up faster than they drain)
or even callbacks taking too much time…</p></li>
<li><p>Do we need introspection APIs?  E.g. asking for the read callback
given a file descriptor.  Or when the next scheduled call is.  Or
the list of file descriptors registered with callbacks.  Right now
these all require using internals.</p></li>
<li><p>Do we need more socket I/O methods, e.g. <code class="docutils literal notranslate"><span class="pre">sock_sendto()</span></code> and
<code class="docutils literal notranslate"><span class="pre">sock_recvfrom()</span></code>, and perhaps others like <code class="docutils literal notranslate"><span class="pre">pipe_read()</span></code>?
I guess users can write their own (it’s not rocket science).</p></li>
<li><p>We may need APIs to control various timeouts.  E.g. we may want to
limit the time spent in DNS resolution, connecting, ssl/tls handshake,
idle connection, close/shutdown, even per session.  Possibly it’s
sufficient to add <code class="docutils literal notranslate"><span class="pre">timeout</span></code> keyword arguments to some methods,
and other timeouts can probably be implemented by clever use of
<code class="docutils literal notranslate"><span class="pre">call_later()</span></code> and <code class="docutils literal notranslate"><span class="pre">Task.cancel()</span></code>.  But it’s possible that some
operations need default timeouts, and we may want to change the
default for a specific operation globally (i.e., per event loop).</p></li>
</ul>
</section>
<section id="references">
<h2><a class="toc-backref" href="#id57">References</a><a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="pep-0492.html">PEP 492</a> describes the semantics of <code class="docutils literal notranslate"><span class="pre">async/await</span></code>.</p></li>
<li><p><a class="reference external" href="pep-0380.html">PEP 380</a> describes the semantics of <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code>.</p></li>
<li><p>Greg Ewing’s <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code> tutorials:
<a class="reference external" href="http://www.cosc.canterbury.ac.nz/greg.ewing/python/yield-from/yield_from.html">http://www.cosc.canterbury.ac.nz/greg.ewing/python/yield-from/yield_from.html</a></p></li>
<li><p><a class="reference external" href="pep-3148.html">PEP 3148</a> describes <code class="docutils literal notranslate"><span class="pre">concurrent.futures.Future</span></code>.</p></li>
<li><p><a class="reference external" href="pep-3153.html">PEP 3153</a>, while rejected, has a good write-up explaining the need
to separate transports and protocols.</p></li>
<li><p><a class="reference external" href="pep-0418.html">PEP 418</a> discusses the issues of timekeeping.</p></li>
<li><p>Tulip repo: <a class="reference external" href="http://code.google.com/p/tulip/">http://code.google.com/p/tulip/</a></p></li>
<li><p>PyPI: the Python Package Index at <a class="reference external" href="http://pypi.python.org/">http://pypi.python.org/</a></p></li>
<li><p>Nick Coghlan wrote a nice blog post with some background, thoughts
about different approaches to async I/O, gevent, and how to use
futures with constructs like <code class="docutils literal notranslate"><span class="pre">while</span></code>, <code class="docutils literal notranslate"><span class="pre">for</span></code> and <code class="docutils literal notranslate"><span class="pre">with</span></code>:
<a class="reference external" href="http://python-notes.boredomandlaziness.org/en/latest/pep_ideas/async_programming.html">http://python-notes.boredomandlaziness.org/en/latest/pep_ideas/async_programming.html</a></p></li>
<li><p>TBD: references to the relevant parts of Twisted, Tornado, ZeroMQ,
pyftpdlib, libevent, libev, pyev, libuv, wattle, and so on.</p></li>
</ul>
</section>
<section id="acknowledgments">
<h2><a class="toc-backref" href="#id58">Acknowledgments</a><a class="headerlink" href="#acknowledgments" title="Permalink to this headline">¶</a></h2>
<p>Apart from <a class="reference external" href="pep-3153.html">PEP 3153</a>, influences include <a class="reference external" href="pep-0380.html">PEP 380</a> and Greg Ewing’s
tutorial for <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code>, Twisted, Tornado, ZeroMQ, pyftpdlib, and
wattle (Steve Dower’s counter-proposal).  My previous work on
asynchronous support in the NDB library for Google App Engine provided
an important starting point.</p>
<p>I am grateful for the numerous discussions on python-ideas from
September through December 2012, and many more on python-tulip since
then; a Skype session with Steve Dower and Dino Viehland; email
exchanges with and a visit by Ben Darnell; an audience with Niels
Provos (original author of libevent); and in-person meetings (as well
as frequent email exchanges) with several Twisted developers,
including Glyph, Brian Warner, David Reid, and Duncan McGreggor.</p>
<p>Contributors to the implementation include
Eli Bendersky,
Gustavo Carneiro (Gambit Research),
Saúl Ibarra Corretgé,
Geert Jansen,
A. Jesse Jiryu Davis,
Nikolay Kim,
Charles-François Natali,
Richard Oudkerk,
Antoine Pitrou,
Giampaolo Rodolá,
Andrew Svetlov,
and many others who submitted bugs and/or fixes.</p>
<p>I thank Antoine Pitrou for his feedback in his role of official PEP
BDFL.</p>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#id59">Copyright</a><a class="headerlink" href="#copyright" title="Permalink to this headline">¶</a></h2>
<p>This document has been placed in the public domain.</p>
</section>
</section>
<span>Source: <a class="reference external" href="https://github.com/python/peps/blob/master/pep-3156.txt">https://github.com/python/peps/blob/master/pep-3156.txt</a></span><div class="zero-height line"><br /></div>
<span>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/master/pep-3156.txt">2021-06-28T11:16:08Z</a></span>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../contents/">PEPs</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">PEP Table of Contents (needed for Sphinx):</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../pep-0000/">PEP 0 – Index of Python Enhancement Proposals (PEPs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0001/">PEP 1 – PEP Purpose and Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0002/">PEP 2 – Procedure for Adding New Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0003/">PEP 3 – Guidelines for Handling Bug Reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0004/">PEP 4 – Deprecation of Standard Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0005/">PEP 5 – Guidelines for Language Evolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0006/">PEP 6 – Bug Fix Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0007/">PEP 7 – Style Guide for C Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0008/">PEP 8 – Style Guide for Python Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0009/">PEP 9 – Sample Plaintext PEP Template</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0010/">PEP 10 – Voting Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0011/">PEP 11 – Removing support for little used platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0012/">PEP 12 – Sample reStructuredText PEP Template</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0013/">PEP 13 – Python Language Governance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0020/">PEP 20 – The Zen of Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0042/">PEP 42 – Feature Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0100/">PEP 100 – Python Unicode Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0101/">PEP 101 – Doing Python Releases 101</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0102/">PEP 102 – Doing Python Micro Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0103/">PEP 103 – Collecting information about git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0160/">PEP 160 – Python 1.6 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0200/">PEP 200 – Python 2.0 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0201/">PEP 201 – Lockstep Iteration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0202/">PEP 202 – List Comprehensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0203/">PEP 203 – Augmented Assignments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0204/">PEP 204 – Range Literals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0205/">PEP 205 – Weak References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0206/">PEP 206 – Python Advanced Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0207/">PEP 207 – Rich Comparisons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0208/">PEP 208 – Reworking the Coercion Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0209/">PEP 209 – Multi-dimensional Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0210/">PEP 210 – Decoupling the Interpreter Loop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0211/">PEP 211 – Adding A New Outer Product Operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0212/">PEP 212 – Loop Counter Iteration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0213/">PEP 213 – Attribute Access Handlers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0214/">PEP 214 – Extended Print Statement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0215/">PEP 215 – String Interpolation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0216/">PEP 216 – Docstring Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0217/">PEP 217 – Display Hook for Interactive Use</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0218/">PEP 218 – Adding a Built-In Set Object Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0219/">PEP 219 – Stackless Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0220/">PEP 220 – Coroutines, Generators, Continuations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0221/">PEP 221 – Import As</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0222/">PEP 222 – Web Library Enhancements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0223/">PEP 223 – Change the Meaning of ``\x`` Escapes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0224/">PEP 224 – Attribute Docstrings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0225/">PEP 225 – Elementwise/Objectwise Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0226/">PEP 226 – Python 2.1 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0227/">PEP 227 – Statically Nested Scopes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0228/">PEP 228 – Reworking Python’s Numeric Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0229/">PEP 229 – Using Distutils to Build Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0230/">PEP 230 – Warning Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0231/">PEP 231 – __findattr__()</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0232/">PEP 232 – Function Attributes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0233/">PEP 233 – Python Online Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0234/">PEP 234 – Iterators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0235/">PEP 235 – Import on Case-Insensitive Platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0236/">PEP 236 – Back to the __future__</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0237/">PEP 237 – Unifying Long Integers and Integers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0238/">PEP 238 – Changing the Division Operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0239/">PEP 239 – Adding a Rational Type to Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0240/">PEP 240 – Adding a Rational Literal to Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0241/">PEP 241 – Metadata for Python Software Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0242/">PEP 242 – Numeric Kinds</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0243/">PEP 243 – Module Repository Upload Mechanism</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0244/">PEP 244 – The ``directive`` statement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0245/">PEP 245 – Python Interface Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0246/">PEP 246 – Object Adaptation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0247/">PEP 247 – API for Cryptographic Hash Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0248/">PEP 248 – Python Database API Specification v1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0249/">PEP 249 – Python Database API Specification v2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0250/">PEP 250 – Using site-packages on Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0251/">PEP 251 – Python 2.2 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0252/">PEP 252 – Making Types Look More Like Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0253/">PEP 253 – Subtyping Built-in Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0254/">PEP 254 – Making Classes Look More Like Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0255/">PEP 255 – Simple Generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0256/">PEP 256 – Docstring Processing System Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0257/">PEP 257 – Docstring Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0258/">PEP 258 – Docutils Design Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0259/">PEP 259 – Omit printing newline after newline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0260/">PEP 260 – Simplify xrange()</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0261/">PEP 261 – Support for “wide” Unicode characters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0262/">PEP 262 – A Database of Installed Python Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0263/">PEP 263 – Defining Python Source Code Encodings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0264/">PEP 264 – Future statements in simulated shells</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0265/">PEP 265 – Sorting Dictionaries by Value</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0266/">PEP 266 – Optimizing Global Variable/Attribute Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0267/">PEP 267 – Optimized Access to Module Namespaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0268/">PEP 268 – Extended HTTP functionality and WebDAV</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0269/">PEP 269 – Pgen Module for Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0270/">PEP 270 – uniq method for list objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0271/">PEP 271 – Prefixing sys.path by command line option</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0272/">PEP 272 – API for Block Encryption Algorithms v1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0273/">PEP 273 – Import Modules from Zip Archives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0274/">PEP 274 – Dict Comprehensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0275/">PEP 275 – Switching on Multiple Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0276/">PEP 276 – Simple Iterator for ints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0277/">PEP 277 – Unicode file name support for Windows NT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0278/">PEP 278 – Universal Newline Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0279/">PEP 279 – The enumerate() built-in function</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0280/">PEP 280 – Optimizing access to globals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0281/">PEP 281 – Loop Counter Iteration with range and xrange</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0282/">PEP 282 – A Logging System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0283/">PEP 283 – Python 2.3 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0284/">PEP 284 – Integer for-loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0285/">PEP 285 – Adding a bool type</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0286/">PEP 286 – Enhanced Argument Tuples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0287/">PEP 287 – reStructuredText Docstring Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0288/">PEP 288 – Generators Attributes and Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0289/">PEP 289 – Generator Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0290/">PEP 290 – Code Migration and Modernization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0291/">PEP 291 – Backward Compatibility for the Python 2 Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0292/">PEP 292 – Simpler String Substitutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0293/">PEP 293 – Codec Error Handling Callbacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0294/">PEP 294 – Type Names in the types Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0295/">PEP 295 – Interpretation of multiline string constants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0296/">PEP 296 – Adding a bytes Object Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0297/">PEP 297 – Support for System Upgrades</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0298/">PEP 298 – The Locked Buffer Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0299/">PEP 299 – Special __main__() function in modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0301/">PEP 301 – Package Index and Metadata for Distutils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0302/">PEP 302 – New Import Hooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0303/">PEP 303 – Extend divmod() for Multiple Divisors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0304/">PEP 304 – Controlling Generation of Bytecode Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0305/">PEP 305 – CSV File API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0306/">PEP 306 – How to Change Python’s Grammar</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0307/">PEP 307 – Extensions to the pickle protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0308/">PEP 308 – Conditional Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0309/">PEP 309 – Partial Function Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0310/">PEP 310 – Reliable Acquisition/Release Pairs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0311/">PEP 311 – Simplified Global Interpreter Lock Acquisition for Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0312/">PEP 312 – Simple Implicit Lambda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0313/">PEP 313 – Adding Roman Numeral Literals to Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0314/">PEP 314 – Metadata for Python Software Packages v1.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0315/">PEP 315 – Enhanced While Loop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0316/">PEP 316 – Programming by Contract for Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0317/">PEP 317 – Eliminate Implicit Exception Instantiation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0318/">PEP 318 – Decorators for Functions and Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0319/">PEP 319 – Python Synchronize/Asynchronize Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0320/">PEP 320 – Python 2.4 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0321/">PEP 321 – Date/Time Parsing and Formatting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0322/">PEP 322 – Reverse Iteration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0323/">PEP 323 – Copyable Iterators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0324/">PEP 324 – subprocess - New process module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0325/">PEP 325 – Resource-Release Support for Generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0326/">PEP 326 – A Case for Top and Bottom Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0327/">PEP 327 – Decimal Data Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0328/">PEP 328 – Imports: Multi-Line and Absolute/Relative</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0329/">PEP 329 – Treating Builtins as Constants in the Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0330/">PEP 330 – Python Bytecode Verification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0331/">PEP 331 – Locale-Independent Float/String Conversions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0332/">PEP 332 – Byte vectors and String/Unicode Unification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0333/">PEP 333 – Python Web Server Gateway Interface v1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0334/">PEP 334 – Simple Coroutines via SuspendIteration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0335/">PEP 335 – Overloadable Boolean Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0336/">PEP 336 – Make None Callable</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0337/">PEP 337 – Logging Usage in the Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0338/">PEP 338 – Executing modules as scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0339/">PEP 339 – Design of the CPython Compiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0340/">PEP 340 – Anonymous Block Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0341/">PEP 341 – Unifying try-except and try-finally</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0342/">PEP 342 – Coroutines via Enhanced Generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0343/">PEP 343 – The “with” Statement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0344/">PEP 344 – Exception Chaining and Embedded Tracebacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0345/">PEP 345 – Metadata for Python Software Packages 1.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0346/">PEP 346 – User Defined (“``with``”) Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0347/">PEP 347 – Migrating the Python CVS to Subversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0348/">PEP 348 – Exception Reorganization for Python 3.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0349/">PEP 349 – Allow str() to return unicode strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0350/">PEP 350 – Codetags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0351/">PEP 351 – The freeze protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0352/">PEP 352 – Required Superclass for Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0353/">PEP 353 – Using ssize_t as the index type</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0354/">PEP 354 – Enumerations in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0355/">PEP 355 – Path - Object oriented filesystem paths</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0356/">PEP 356 – Python 2.5 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0357/">PEP 357 – Allowing Any Object to be Used for Slicing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0358/">PEP 358 – The “bytes” Object</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0359/">PEP 359 – The “make” Statement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0360/">PEP 360 – Externally Maintained Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0361/">PEP 361 – Python 2.6 and 3.0 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0362/">PEP 362 – Function Signature Object</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0363/">PEP 363 – Syntax For Dynamic Attribute Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0364/">PEP 364 – Transitioning to the Py3K Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0365/">PEP 365 – Adding the pkg_resources module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0366/">PEP 366 – Main module explicit relative imports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0367/">PEP 367 – New Super</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0368/">PEP 368 – Standard image protocol and class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0369/">PEP 369 – Post import hooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0370/">PEP 370 – Per user site-packages directory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0371/">PEP 371 – Addition of the multiprocessing package to the standard library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0372/">PEP 372 – Adding an ordered dictionary to collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0373/">PEP 373 – Python 2.7 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0374/">PEP 374 – Choosing a distributed VCS for the Python project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0375/">PEP 375 – Python 3.1 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0376/">PEP 376 – Database of Installed Python Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0377/">PEP 377 – Allow __enter__() methods to skip the statement body</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0378/">PEP 378 – Format Specifier for Thousands Separator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0379/">PEP 379 – Adding an Assignment Expression</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0380/">PEP 380 – Syntax for Delegating to a Subgenerator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0381/">PEP 381 – Mirroring infrastructure for PyPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0382/">PEP 382 – Namespace Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0383/">PEP 383 – Non-decodable Bytes in System Character Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0384/">PEP 384 – Defining a Stable ABI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0385/">PEP 385 – Migrating from Subversion to Mercurial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0386/">PEP 386 – Changing the version comparison module in Distutils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0387/">PEP 387 – Backwards Compatibility Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0389/">PEP 389 – argparse - New Command Line Parsing Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0390/">PEP 390 – Static metadata for Distutils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0391/">PEP 391 – Dictionary-Based Configuration For Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0392/">PEP 392 – Python 3.2 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0393/">PEP 393 – Flexible String Representation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0394/">PEP 394 – The “python” Command on Unix-Like Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0395/">PEP 395 – Qualified Names for Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0396/">PEP 396 – Module Version Numbers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0397/">PEP 397 – Python launcher for Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0398/">PEP 398 – Python 3.3 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0399/">PEP 399 – Pure Python/C Accelerator Module Compatibility Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0400/">PEP 400 – Deprecate codecs.StreamReader and codecs.StreamWriter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0401/">PEP 401 – BDFL Retirement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0402/">PEP 402 – Simplified Package Layout and Partitioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0403/">PEP 403 – General purpose decorator clause (aka “&#64;in” clause)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0404/">PEP 404 – Python 2.8 Un-release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0405/">PEP 405 – Python Virtual Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0406/">PEP 406 – Improved Encapsulation of Import State</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0407/">PEP 407 – New release cycle and introducing long-term support versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0408/">PEP 408 – Standard library __preview__ package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0409/">PEP 409 – Suppressing exception context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0410/">PEP 410 – Use decimal.Decimal type for timestamps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0411/">PEP 411 – Provisional packages in the Python standard library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0412/">PEP 412 – Key-Sharing Dictionary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0413/">PEP 413 – Faster evolution of the Python Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0414/">PEP 414 – Explicit Unicode Literal for Python 3.3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0415/">PEP 415 – Implement context suppression with exception attributes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0416/">PEP 416 – Add a frozendict builtin type</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0417/">PEP 417 – Including mock in the Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0418/">PEP 418 – Add monotonic time, performance counter, and process time functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0419/">PEP 419 – Protecting cleanup statements from interruptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0420/">PEP 420 – Implicit Namespace Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0421/">PEP 421 – Adding sys.implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0422/">PEP 422 – Simpler customisation of class creation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0423/">PEP 423 – Naming conventions and recipes related to packaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0424/">PEP 424 – A method for exposing a length hint</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0425/">PEP 425 – Compatibility Tags for Built Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0426/">PEP 426 – Metadata for Python Software Packages 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0427/">PEP 427 – The Wheel Binary Package Format 1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0428/">PEP 428 – The pathlib module – object-oriented filesystem paths</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0429/">PEP 429 – Python 3.4 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0430/">PEP 430 – Migrating to Python 3 as the default online documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0431/">PEP 431 – Time zone support improvements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0432/">PEP 432 – Restructuring the CPython startup sequence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0433/">PEP 433 – Easier suppression of file descriptor inheritance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0434/">PEP 434 – IDLE Enhancement Exception for All Branches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0435/">PEP 435 – Adding an Enum type to the Python standard library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0436/">PEP 436 – The Argument Clinic DSL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0437/">PEP 437 – A DSL for specifying signatures, annotations and argument converters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0438/">PEP 438 – Transitioning to release-file hosting on PyPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0439/">PEP 439 – Inclusion of implicit pip bootstrap in Python installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0440/">PEP 440 – Version Identification and Dependency Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0441/">PEP 441 – Improving Python ZIP Application Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0442/">PEP 442 – Safe object finalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0443/">PEP 443 – Single-dispatch generic functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0444/">PEP 444 – Python Web3 Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0445/">PEP 445 – Add new APIs to customize Python memory allocators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0446/">PEP 446 – Make newly created file descriptors non-inheritable</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0447/">PEP 447 – Add __getdescriptor__ method to metaclass</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0448/">PEP 448 – Additional Unpacking Generalizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0449/">PEP 449 – Removal of the PyPI Mirror Auto Discovery and Naming Scheme</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0450/">PEP 450 – Adding A Statistics Module To The Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0451/">PEP 451 – A ModuleSpec Type for the Import System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0452/">PEP 452 – API for Cryptographic Hash Functions v2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0453/">PEP 453 – Explicit bootstrapping of pip in Python installations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0454/">PEP 454 – Add a new tracemalloc module to trace Python memory allocations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0455/">PEP 455 – Adding a key-transforming dictionary to collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0456/">PEP 456 – Secure and interchangeable hash algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0457/">PEP 457 – Notation For Positional-Only Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0458/">PEP 458 – Secure PyPI downloads with signed repository metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0459/">PEP 459 – Standard Metadata Extensions for Python Software Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0460/">PEP 460 – Add binary interpolation and formatting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0461/">PEP 461 – Adding % formatting to bytes and bytearray</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0462/">PEP 462 – Core development workflow automation for CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0463/">PEP 463 – Exception-catching expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0464/">PEP 464 – Removal of the PyPI Mirror Authenticity API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0465/">PEP 465 – A dedicated infix operator for matrix multiplication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0466/">PEP 466 – Network Security Enhancements for Python 2.7.x</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0467/">PEP 467 – Minor API improvements for binary sequences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0468/">PEP 468 – Preserving the order of \*\*kwargs in a function.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0469/">PEP 469 – Migration of dict iteration code to Python 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0470/">PEP 470 – Removing External Hosting Support on PyPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0471/">PEP 471 – os.scandir() function – a better and faster directory iterator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0472/">PEP 472 – Support for indexing with keyword arguments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0473/">PEP 473 – Adding structured data to built-in exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0474/">PEP 474 – Creating forge.python.org</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0475/">PEP 475 – Retry system calls failing with EINTR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0476/">PEP 476 – Enabling certificate verification by default for stdlib http clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0477/">PEP 477 – Backport ensurepip (PEP 453) to Python 2.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0478/">PEP 478 – Python 3.5 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0479/">PEP 479 – Change StopIteration handling inside generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0480/">PEP 480 – Surviving a Compromise of PyPI: End-to-end signing of packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0481/">PEP 481 – Migrate CPython to Git, Github, and Phabricator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0482/">PEP 482 – Literature Overview for Type Hints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0483/">PEP 483 – The Theory of Type Hints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0484/">PEP 484 – Type Hints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0485/">PEP 485 – A Function for testing approximate equality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0486/">PEP 486 – Make the Python Launcher aware of virtual environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0487/">PEP 487 – Simpler customisation of class creation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0488/">PEP 488 – Elimination of PYO files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0489/">PEP 489 – Multi-phase extension module initialization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0490/">PEP 490 – Chain exceptions at C level</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0491/">PEP 491 – The Wheel Binary Package Format 1.9</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0492/">PEP 492 – Coroutines with async and await syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0493/">PEP 493 – HTTPS verification migration tools for Python 2.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0494/">PEP 494 – Python 3.6 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0495/">PEP 495 – Local Time Disambiguation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0496/">PEP 496 – Environment Markers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0497/">PEP 497 – A standard mechanism for backward compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0498/">PEP 498 – Literal String Interpolation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0499/">PEP 499 – ``python -m foo`` should bind ``sys.modules[‘foo’]`` in addition to ``sys.modules[‘__main__’]``</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0500/">PEP 500 – A protocol for delegating datetime methods to their
tzinfo implementations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0501/">PEP 501 – General purpose string interpolation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0502/">PEP 502 – String Interpolation - Extended Discussion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0503/">PEP 503 – Simple Repository API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0504/">PEP 504 – Using the System RNG by default</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0505/">PEP 505 – None-aware operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0506/">PEP 506 – Adding A Secrets Module To The Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0507/">PEP 507 – Migrate CPython to Git and GitLab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0508/">PEP 508 – Dependency specification for Python Software Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0509/">PEP 509 – Add a private version to dict</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0510/">PEP 510 – Specialize functions with guards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0511/">PEP 511 – API for code transformers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0512/">PEP 512 – Migrating from hg.python.org to GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0513/">PEP 513 – A Platform Tag for Portable Linux Built Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0514/">PEP 514 – Python registration in the Windows registry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0515/">PEP 515 – Underscores in Numeric Literals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0516/">PEP 516 – Build system abstraction for pip/conda etc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0517/">PEP 517 – A build-system independent format for source trees</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0518/">PEP 518 – Specifying Minimum Build System Requirements for Python Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0519/">PEP 519 – Adding a file system path protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0520/">PEP 520 – Preserving Class Attribute Definition Order</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0521/">PEP 521 – Managing global context via ‘with’ blocks in generators and coroutines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0522/">PEP 522 – Allow BlockingIOError in security sensitive APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0523/">PEP 523 – Adding a frame evaluation API to CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0524/">PEP 524 – Make os.urandom() blocking on Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0525/">PEP 525 – Asynchronous Generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0526/">PEP 526 – Syntax for Variable Annotations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0527/">PEP 527 – Removing Un(der)used file types/extensions on PyPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0528/">PEP 528 – Change Windows console encoding to UTF-8</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0529/">PEP 529 – Change Windows filesystem encoding to UTF-8</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0530/">PEP 530 – Asynchronous Comprehensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0531/">PEP 531 – Existence checking operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0532/">PEP 532 – A circuit breaking protocol and binary operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0533/">PEP 533 – Deterministic cleanup for iterators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0534/">PEP 534 – Improved Errors for Missing Standard Library Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0535/">PEP 535 – Rich comparison chaining</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0536/">PEP 536 – Final Grammar for Literal String Interpolation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0537/">PEP 537 – Python 3.7 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0538/">PEP 538 – Coercing the legacy C locale to a UTF-8 based locale</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0539/">PEP 539 – A New C-API for Thread-Local Storage in CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0540/">PEP 540 – Add a new UTF-8 Mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0541/">PEP 541 – Package Index Name Retention</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0542/">PEP 542 – Dot Notation Assignment In Function Header</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0543/">PEP 543 – A Unified TLS API for Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0544/">PEP 544 – Protocols: Structural subtyping (static duck typing)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0545/">PEP 545 – Python Documentation Translations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0546/">PEP 546 – Backport ssl.MemoryBIO and ssl.SSLObject to Python 2.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0547/">PEP 547 – Running extension modules using the -m option</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0548/">PEP 548 – More Flexible Loop Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0549/">PEP 549 – Instance Descriptors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0550/">PEP 550 – Execution Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0551/">PEP 551 – Security transparency in the Python runtime</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0552/">PEP 552 – Deterministic pycs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0553/">PEP 553 – Built-in breakpoint()</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0554/">PEP 554 – Multiple Interpreters in the Stdlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0555/">PEP 555 – Context-local variables (contextvars)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0556/">PEP 556 – Threaded garbage collection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0557/">PEP 557 – Data Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0558/">PEP 558 – Defined semantics for locals()</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0559/">PEP 559 – Built-in noop()</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0560/">PEP 560 – Core support for typing module and generic types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0561/">PEP 561 – Distributing and Packaging Type Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0562/">PEP 562 – Module __getattr__ and __dir__</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0563/">PEP 563 – Postponed Evaluation of Annotations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0564/">PEP 564 – Add new time functions with nanosecond resolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0565/">PEP 565 – Show DeprecationWarning in __main__</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0566/">PEP 566 – Metadata for Python Software Packages 2.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0567/">PEP 567 – Context Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0568/">PEP 568 – Generator-sensitivity for Context Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0569/">PEP 569 – Python 3.8 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0570/">PEP 570 – Python Positional-Only Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0571/">PEP 571 – The manylinux2010 Platform Tag</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0572/">PEP 572 – Assignment Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0573/">PEP 573 – Module State Access from C Extension Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0574/">PEP 574 – Pickle protocol 5 with out-of-band data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0575/">PEP 575 – Unifying function/method classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0576/">PEP 576 – Rationalize Built-in function classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0577/">PEP 577 – Augmented Assignment Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0578/">PEP 578 – Python Runtime Audit Hooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0579/">PEP 579 – Refactoring C functions and methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0580/">PEP 580 – The C call protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0581/">PEP 581 – Using GitHub Issues for CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0582/">PEP 582 – Python local packages directory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0583/">PEP 583 – A Concurrency Memory Model for Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0584/">PEP 584 – Add Union Operators To dict</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0585/">PEP 585 – Type Hinting Generics In Standard Collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0586/">PEP 586 – Literal Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0587/">PEP 587 – Python Initialization Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0588/">PEP 588 – GitHub Issues Migration Plan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0589/">PEP 589 – TypedDict: Type Hints for Dictionaries with a Fixed Set of Keys</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0590/">PEP 590 – Vectorcall: a fast calling protocol for CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0591/">PEP 591 – Adding a final qualifier to typing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0592/">PEP 592 – Adding “Yank” Support to the Simple API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0593/">PEP 593 – Flexible function and variable annotations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0594/">PEP 594 – Removing dead batteries from the standard library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0595/">PEP 595 – Improving bugs.python.org</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0596/">PEP 596 – Python 3.9 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0597/">PEP 597 – Add optional EncodingWarning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0598/">PEP 598 – Introducing incremental feature releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0599/">PEP 599 – The manylinux2014 Platform Tag</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0600/">PEP 600 – Future ‘manylinux’ Platform Tags for Portable Linux Built Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0601/">PEP 601 – Forbid return/break/continue breaking out of finally</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0602/">PEP 602 – Annual Release Cycle for Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0603/">PEP 603 – Adding a frozenmap type to collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0604/">PEP 604 – Allow writing union types as ``X | Y``</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0605/">PEP 605 – A rolling feature release stream for CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0606/">PEP 606 – Python Compatibility Version</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0607/">PEP 607 – Reducing CPython’s Feature Delivery Latency</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0608/">PEP 608 – Coordinated Python release</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0609/">PEP 609 – PyPA Governance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0610/">PEP 610 – Recording the Direct URL Origin of installed distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0611/">PEP 611 – The one million limit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0612/">PEP 612 – Parameter Specification Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0613/">PEP 613 – Explicit Type Aliases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0614/">PEP 614 – Relaxing Grammar Restrictions On Decorators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0615/">PEP 615 – Support for the IANA Time Zone Database in the Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0616/">PEP 616 – String methods to remove prefixes and suffixes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0617/">PEP 617 – New PEG parser for CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0618/">PEP 618 – Add Optional Length-Checking To zip</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0619/">PEP 619 – Python 3.10 Release Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0620/">PEP 620 – Hide implementation details from the C API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0621/">PEP 621 – Storing project metadata in pyproject.toml</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0622/">PEP 622 – Structural Pattern Matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0623/">PEP 623 – Remove wstr from Unicode</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0624/">PEP 624 – Remove Py_UNICODE encoder APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0625/">PEP 625 – File name of a Source Distribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0626/">PEP 626 – Precise line numbers for debugging and other tools.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0627/">PEP 627 – Recording installed projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0628/">PEP 628 – Add ``math.tau``</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0629/">PEP 629 – Versioning PyPI’s Simple API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0630/">PEP 630 – Isolating Extension Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0631/">PEP 631 – Dependency specification in pyproject.toml based on PEP 508</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0632/">PEP 632 – Deprecate distutils module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0633/">PEP 633 – Dependency specification in pyproject.toml using an exploded TOML table</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0634/">PEP 634 – Structural Pattern Matching: Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0635/">PEP 635 – Structural Pattern Matching: Motivation and Rationale</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0636/">PEP 636 – Structural Pattern Matching: Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0637/">PEP 637 – Support for indexing with keyword arguments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0638/">PEP 638 – Syntactic Macros</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0639/">PEP 639 – Metadata for Python Software Packages 2.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0640/">PEP 640 – Unused variable syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0641/">PEP 641 – Using an underscore in the version portion of Python 3.10 compatibility tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0642/">PEP 642 – Explicit Pattern Syntax for Structural Pattern Matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0643/">PEP 643 – Metadata for Package Source Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0644/">PEP 644 – Require OpenSSL 1.1.1 or newer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0645/">PEP 645 – Allow writing optional types as ``x?``</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0646/">PEP 646 – Variadic Generics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0647/">PEP 647 – User-Defined Type Guards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0648/">PEP 648 – Extensible customizations of the interpreter at startup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0649/">PEP 649 – Deferred Evaluation Of Annotations Using Descriptors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0650/">PEP 650 – Specifying Installer Requirements for Python Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0651/">PEP 651 – Robust Stack Overflow Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0652/">PEP 652 – Maintaining the Stable ABI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0653/">PEP 653 – Precise Semantics for Pattern Matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0654/">PEP 654 – Exception Groups and except*</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0655/">PEP 655 – Marking individual TypedDict items as required or potentially-missing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0656/">PEP 656 – Platform Tag for Linux Distributions Using Musl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0657/">PEP 657 – Include Fine Grained Error Locations in Tracebacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0658/">PEP 658 – Serve Distribution Metadata in the Simple Repository API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0659/">PEP 659 – Specializing Adaptive Interpreter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0660/">PEP 660 – Editable installs for pyproject.toml based builds (wheel based)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0661/">PEP 661 – Sentinel Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0662/">PEP 662 – Editable installs via virtual wheels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0666/">PEP 666 – Reject Foolish Indentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0754/">PEP 754 – IEEE 754 Floating Point Special Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-0801/">PEP 801 – Reserved</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3000/">PEP 3000 – Python 3000</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3001/">PEP 3001 – Procedure for reviewing and improving standard library modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3002/">PEP 3002 – Procedure for Backwards-Incompatible Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3003/">PEP 3003 – Python Language Moratorium</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3099/">PEP 3099 – Things that will Not Change in Python 3000</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3100/">PEP 3100 – Miscellaneous Python 3.0 Plans</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3101/">PEP 3101 – Advanced String Formatting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3102/">PEP 3102 – Keyword-Only Arguments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3103/">PEP 3103 – A Switch/Case Statement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3104/">PEP 3104 – Access to Names in Outer Scopes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3105/">PEP 3105 – Make print a function</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3106/">PEP 3106 – Revamping dict.keys(), .values() and .items()</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3107/">PEP 3107 – Function Annotations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3108/">PEP 3108 – Standard Library Reorganization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3109/">PEP 3109 – Raising Exceptions in Python 3000</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3110/">PEP 3110 – Catching Exceptions in Python 3000</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3111/">PEP 3111 – Simple input built-in in Python 3000</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3112/">PEP 3112 – Bytes literals in Python 3000</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3113/">PEP 3113 – Removal of Tuple Parameter Unpacking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3114/">PEP 3114 – Renaming iterator.next() to iterator.__next__()</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3115/">PEP 3115 – Metaclasses in Python 3000</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3116/">PEP 3116 – New I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3117/">PEP 3117 – Postfix type declarations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3118/">PEP 3118 – Revising the buffer protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3119/">PEP 3119 – Introducing Abstract Base Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3120/">PEP 3120 – Using UTF-8 as the default source encoding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3121/">PEP 3121 – Extension Module Initialization and Finalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3122/">PEP 3122 – Delineation of the main module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3123/">PEP 3123 – Making PyObject_HEAD conform to standard C</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3124/">PEP 3124 – Overloading, Generic Functions, Interfaces, and Adaptation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3125/">PEP 3125 – Remove Backslash Continuation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3126/">PEP 3126 – Remove Implicit String Concatenation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3127/">PEP 3127 – Integer Literal Support and Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3128/">PEP 3128 – BList: A Faster List-like Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3129/">PEP 3129 – Class Decorators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3130/">PEP 3130 – Access to Current Module/Class/Function</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3131/">PEP 3131 – Supporting Non-ASCII Identifiers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3132/">PEP 3132 – Extended Iterable Unpacking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3133/">PEP 3133 – Introducing Roles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3134/">PEP 3134 – Exception Chaining and Embedded Tracebacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3135/">PEP 3135 – New Super</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3136/">PEP 3136 – Labeled break and continue</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3137/">PEP 3137 – Immutable Bytes and Mutable Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3138/">PEP 3138 – String representation in Python 3000</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3139/">PEP 3139 – Cleaning out sys and the “interpreter” module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3140/">PEP 3140 – str(container) should call str(item), not repr(item)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3141/">PEP 3141 – A Type Hierarchy for Numbers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3142/">PEP 3142 – Add a “while” clause to generator expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3143/">PEP 3143 – Standard daemon process library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3144/">PEP 3144 – IP Address Manipulation Library for the Python Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3145/">PEP 3145 – Asynchronous I/O For subprocess.Popen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3146/">PEP 3146 – Merging Unladen Swallow into CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3147/">PEP 3147 – PYC Repository Directories</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3148/">PEP 3148 – futures - execute computations asynchronously</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3149/">PEP 3149 – ABI version tagged .so files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3150/">PEP 3150 – Statement local namespaces (aka “given” clause)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3151/">PEP 3151 – Reworking the OS and IO exception hierarchy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3152/">PEP 3152 – Cofunctions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3153/">PEP 3153 – Asynchronous IO support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3154/">PEP 3154 – Pickle protocol version 4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3155/">PEP 3155 – Qualified name for classes and functions</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">PEP 3156 – Asynchronous IO Support Rebooted: the “asyncio” Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-3333/">PEP 3333 – Python Web Server Gateway Interface v1.0.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8000/">PEP 8000 – Python Language Governance Proposal Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8001/">PEP 8001 – Python Governance Voting Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8002/">PEP 8002 – Open Source Governance Survey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8010/">PEP 8010 – The Technical Leader Governance Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8011/">PEP 8011 – Python Governance Model Lead by Trio of Pythonistas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8012/">PEP 8012 – The Community Governance Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8013/">PEP 8013 – The External Council Governance Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8014/">PEP 8014 – The Commons Governance Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8015/">PEP 8015 – Organization of the Python community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8016/">PEP 8016 – The Steering Council Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8100/">PEP 8100 – January 2019 steering council election</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8101/">PEP 8101 – 2020 Term steering council election</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pep-8102/">PEP 8102 – 2021 Term steering council election</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../contents/">Documentation overview</a><ul>
      <li>Previous: <a href="../pep-3155/" title="previous chapter">PEP 3155 – Qualified name for classes and functions</a></li>
      <li>Next: <a href="../pep-3333/" title="next chapter">PEP 3333 – Python Web Server Gateway Interface v1.0.1</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      
      
      
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/pep-3156.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>